var __defProp=Object.defineProperty;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});var __publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);import{g as getDefaultExportFromCjs,f as reactExports,R as React,c as shFrm,h as scorer,i as dash,j as jsxRuntimeExports,a as sh,d as defaultEnv}from"./index-8abc5264.js";import{S as ShaclFormSingleEditorReact}from"./ShaclFormSingleEditorReact-ca40b4a2.js";import"./ShaclFormSingleEditor-b41685f3.js";var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}__name(emptyFunction,"emptyFunction");function emptyFunctionWithReset(){}__name(emptyFunctionWithReset,"emptyFunctionWithReset");emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=__name(function(){function shim(props,propName,componentName,location,propFullName,secret){if(secret!==ReactPropTypesSecret){var err=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw err.name="Invariant Violation",err}}__name(shim,"shim"),shim.isRequired=shim;function getShim(){return shim}__name(getShim,"getShim");var ReactPropTypes={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return ReactPropTypes.PropTypes=ReactPropTypes,ReactPropTypes},"factoryWithThrowingShims");propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return __name(adopt,"adopt"),new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}__name(fulfilled,"fulfilled");function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}__name(rejected,"rejected");function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}__name(step,"step"),step((generator=generator.apply(thisArg,_arguments||[])).next())})}__name(__awaiter,"__awaiter");function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;g&&(g=0,op[0]&&(_=0)),_;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(t=_.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}__name(__generator,"__generator");function __read(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}__name(__read,"__read");function __spreadArray(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))}__name(__spreadArray,"__spreadArray");var COMMON_MIME_TYPES=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function toFileWithPath(file,path){var f=withMimeType(file);if(typeof f.path!="string"){var webkitRelativePath=file.webkitRelativePath;Object.defineProperty(f,"path",{value:typeof path=="string"?path:typeof webkitRelativePath=="string"&&webkitRelativePath.length>0?webkitRelativePath:file.name,writable:!1,configurable:!1,enumerable:!0})}return f}__name(toFileWithPath,"toFileWithPath");function withMimeType(file){var name=file.name,hasExtension=name&&name.lastIndexOf(".")!==-1;if(hasExtension&&!file.type){var ext=name.split(".").pop().toLowerCase(),type=COMMON_MIME_TYPES.get(ext);type&&Object.defineProperty(file,"type",{value:type,writable:!1,configurable:!1,enumerable:!0})}return file}__name(withMimeType,"withMimeType");var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(evt){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return isObject(evt)&&isDataTransfer(evt.dataTransfer)?[2,getDataTransferFiles(evt.dataTransfer,evt.type)]:isChangeEvt(evt)?[2,getInputFiles(evt)]:Array.isArray(evt)&&evt.every(function(item){return"getFile"in item&&typeof item.getFile=="function"})?[2,getFsHandleFiles(evt)]:[2,[]]})})}__name(fromEvent,"fromEvent");function isDataTransfer(value){return isObject(value)}__name(isDataTransfer,"isDataTransfer");function isChangeEvt(value){return isObject(value)&&isObject(value.target)}__name(isChangeEvt,"isChangeEvt");function isObject(v){return typeof v=="object"&&v!==null}__name(isObject,"isObject");function getInputFiles(evt){return fromList(evt.target.files).map(function(file){return toFileWithPath(file)})}__name(getInputFiles,"getInputFiles");function getFsHandleFiles(handles){return __awaiter(this,void 0,void 0,function(){var files;return __generator(this,function(_a){switch(_a.label){case 0:return[4,Promise.all(handles.map(function(h){return h.getFile()}))];case 1:return files=_a.sent(),[2,files.map(function(file){return toFileWithPath(file)})]}})})}__name(getFsHandleFiles,"getFsHandleFiles");function getDataTransferFiles(dt,type){return __awaiter(this,void 0,void 0,function(){var items,files;return __generator(this,function(_a){switch(_a.label){case 0:return dt.items?(items=fromList(dt.items).filter(function(item){return item.kind==="file"}),type!=="drop"?[2,items]:[4,Promise.all(items.map(toFilePromises))]):[3,2];case 1:return files=_a.sent(),[2,noIgnoredFiles(flatten(files))];case 2:return[2,noIgnoredFiles(fromList(dt.files).map(function(file){return toFileWithPath(file)}))]}})})}__name(getDataTransferFiles,"getDataTransferFiles");function noIgnoredFiles(files){return files.filter(function(file){return FILES_TO_IGNORE.indexOf(file.name)===-1})}__name(noIgnoredFiles,"noIgnoredFiles");function fromList(items){if(items===null)return[];for(var files=[],i=0;i<items.length;i++){var file=items[i];files.push(file)}return files}__name(fromList,"fromList");function toFilePromises(item){if(typeof item.webkitGetAsEntry!="function")return fromDataTransferItem(item);var entry=item.webkitGetAsEntry();return entry&&entry.isDirectory?fromDirEntry(entry):fromDataTransferItem(item)}__name(toFilePromises,"toFilePromises");function flatten(items){return items.reduce(function(acc,files){return __spreadArray(__spreadArray([],__read(acc),!1),__read(Array.isArray(files)?flatten(files):[files]),!1)},[])}__name(flatten,"flatten");function fromDataTransferItem(item){var file=item.getAsFile();if(!file)return Promise.reject("".concat(item," is not a File"));var fwp=toFileWithPath(file);return Promise.resolve(fwp)}__name(fromDataTransferItem,"fromDataTransferItem");function fromEntry(entry){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,entry.isDirectory?fromDirEntry(entry):fromFileEntry(entry)]})})}__name(fromEntry,"fromEntry");function fromDirEntry(entry){var reader=entry.createReader();return new Promise(function(resolve,reject){var entries=[];function readEntries(){var _this=this;reader.readEntries(function(batch){return __awaiter(_this,void 0,void 0,function(){var files,err_1,items;return __generator(this,function(_a){switch(_a.label){case 0:if(batch.length)return[3,5];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,Promise.all(entries)];case 2:return files=_a.sent(),resolve(files),[3,4];case 3:return err_1=_a.sent(),reject(err_1),[3,4];case 4:return[3,6];case 5:items=Promise.all(batch.map(fromEntry)),entries.push(items),readEntries(),_a.label=6;case 6:return[2]}})})},function(err){reject(err)})}__name(readEntries,"readEntries"),readEntries()})}__name(fromDirEntry,"fromDirEntry");function fromFileEntry(entry){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,new Promise(function(resolve,reject){entry.file(function(file){var fwp=toFileWithPath(file,entry.fullPath);resolve(fwp)},function(err){reject(err)})})]})})}__name(fromFileEntry,"fromFileEntry");var _default=__name(function(file,acceptedFiles){if(file&&acceptedFiles){var acceptedFilesArray=Array.isArray(acceptedFiles)?acceptedFiles:acceptedFiles.split(","),fileName=file.name||"",mimeType=(file.type||"").toLowerCase(),baseMimeType=mimeType.replace(/\/.*$/,"");return acceptedFilesArray.some(function(type){var validType=type.trim().toLowerCase();return validType.charAt(0)==="."?fileName.toLowerCase().endsWith(validType):validType.endsWith("/*")?baseMimeType===validType.replace(/\/.*$/,""):mimeType===validType})}return!0},"_default");function _toConsumableArray$1(arr){return _arrayWithoutHoles$1(arr)||_iterableToArray$1(arr)||_unsupportedIterableToArray$1(arr)||_nonIterableSpread$1()}__name(_toConsumableArray$1,"_toConsumableArray$1");function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}__name(_nonIterableSpread$1,"_nonIterableSpread$1");function _iterableToArray$1(iter){if(typeof Symbol<"u"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}__name(_iterableToArray$1,"_iterableToArray$1");function _arrayWithoutHoles$1(arr){if(Array.isArray(arr))return _arrayLikeToArray$1(arr)}__name(_arrayWithoutHoles$1,"_arrayWithoutHoles$1");function ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}__name(ownKeys$1,"ownKeys$1");function _objectSpread$1(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(source),!0).forEach(function(key){_defineProperty$1(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$1(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}__name(_objectSpread$1,"_objectSpread$1");function _defineProperty$1(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name(_defineProperty$1,"_defineProperty$1");function _slicedToArray$1(arr,i){return _arrayWithHoles$1(arr)||_iterableToArrayLimit$1(arr,i)||_unsupportedIterableToArray$1(arr,i)||_nonIterableRest$1()}__name(_slicedToArray$1,"_slicedToArray$1");function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}__name(_nonIterableRest$1,"_nonIterableRest$1");function _unsupportedIterableToArray$1(o,minLen){if(o){if(typeof o=="string")return _arrayLikeToArray$1(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray$1(o,minLen)}}__name(_unsupportedIterableToArray$1,"_unsupportedIterableToArray$1");function _arrayLikeToArray$1(arr,len){(len==null||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__name(_arrayLikeToArray$1,"_arrayLikeToArray$1");function _iterableToArrayLimit$1(arr,i){var _i=arr==null?null:typeof Symbol<"u"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i!=null){var _arr=[],_n=!0,_d=!1,_s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return!=null&&_i.return()}finally{if(_d)throw _e}}return _arr}}__name(_iterableToArrayLimit$1,"_iterableToArrayLimit$1");function _arrayWithHoles$1(arr){if(Array.isArray(arr))return arr}__name(_arrayWithHoles$1,"_arrayWithHoles$1");var FILE_INVALID_TYPE="file-invalid-type",FILE_TOO_LARGE="file-too-large",FILE_TOO_SMALL="file-too-small",TOO_MANY_FILES="too-many-files",getInvalidTypeRejectionErr=__name(function(accept){accept=Array.isArray(accept)&&accept.length===1?accept[0]:accept;var messageSuffix=Array.isArray(accept)?"one of ".concat(accept.join(", ")):accept;return{code:FILE_INVALID_TYPE,message:"File type must be ".concat(messageSuffix)}},"getInvalidTypeRejectionErr"),getTooLargeRejectionErr=__name(function(maxSize){return{code:FILE_TOO_LARGE,message:"File is larger than ".concat(maxSize," ").concat(maxSize===1?"byte":"bytes")}},"getTooLargeRejectionErr"),getTooSmallRejectionErr=__name(function(minSize){return{code:FILE_TOO_SMALL,message:"File is smaller than ".concat(minSize," ").concat(minSize===1?"byte":"bytes")}},"getTooSmallRejectionErr"),TOO_MANY_FILES_REJECTION={code:TOO_MANY_FILES,message:"Too many files"};function fileAccepted(file,accept){var isAcceptable=file.type==="application/x-moz-file"||_default(file,accept);return[isAcceptable,isAcceptable?null:getInvalidTypeRejectionErr(accept)]}__name(fileAccepted,"fileAccepted");function fileMatchSize(file,minSize,maxSize){if(isDefined(file.size))if(isDefined(minSize)&&isDefined(maxSize)){if(file.size>maxSize)return[!1,getTooLargeRejectionErr(maxSize)];if(file.size<minSize)return[!1,getTooSmallRejectionErr(minSize)]}else{if(isDefined(minSize)&&file.size<minSize)return[!1,getTooSmallRejectionErr(minSize)];if(isDefined(maxSize)&&file.size>maxSize)return[!1,getTooLargeRejectionErr(maxSize)]}return[!0,null]}__name(fileMatchSize,"fileMatchSize");function isDefined(value){return value!=null}__name(isDefined,"isDefined");function allFilesAccepted(_ref){var files=_ref.files,accept=_ref.accept,minSize=_ref.minSize,maxSize=_ref.maxSize,multiple=_ref.multiple,maxFiles=_ref.maxFiles,validator=_ref.validator;return!multiple&&files.length>1||multiple&&maxFiles>=1&&files.length>maxFiles?!1:files.every(function(file){var _fileAccepted=fileAccepted(file,accept),_fileAccepted2=_slicedToArray$1(_fileAccepted,1),accepted=_fileAccepted2[0],_fileMatchSize=fileMatchSize(file,minSize,maxSize),_fileMatchSize2=_slicedToArray$1(_fileMatchSize,1),sizeMatch=_fileMatchSize2[0],customErrors=validator?validator(file):null;return accepted&&sizeMatch&&!customErrors})}__name(allFilesAccepted,"allFilesAccepted");function isPropagationStopped(event){return typeof event.isPropagationStopped=="function"?event.isPropagationStopped():typeof event.cancelBubble<"u"?event.cancelBubble:!1}__name(isPropagationStopped,"isPropagationStopped");function isEvtWithFiles(event){return event.dataTransfer?Array.prototype.some.call(event.dataTransfer.types,function(type){return type==="Files"||type==="application/x-moz-file"}):!!event.target&&!!event.target.files}__name(isEvtWithFiles,"isEvtWithFiles");function onDocumentDragOver(event){event.preventDefault()}__name(onDocumentDragOver,"onDocumentDragOver");function isIe(userAgent){return userAgent.indexOf("MSIE")!==-1||userAgent.indexOf("Trident/")!==-1}__name(isIe,"isIe");function isEdge(userAgent){return userAgent.indexOf("Edge/")!==-1}__name(isEdge,"isEdge");function isIeOrEdge(){var userAgent=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return isIe(userAgent)||isEdge(userAgent)}__name(isIeOrEdge,"isIeOrEdge");function composeEventHandlers(){for(var _len=arguments.length,fns=new Array(_len),_key=0;_key<_len;_key++)fns[_key]=arguments[_key];return function(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return fns.some(function(fn){return!isPropagationStopped(event)&&fn&&fn.apply(void 0,[event].concat(args)),isPropagationStopped(event)})}}__name(composeEventHandlers,"composeEventHandlers");function canUseFileSystemAccessAPI(){return"showOpenFilePicker"in window}__name(canUseFileSystemAccessAPI,"canUseFileSystemAccessAPI");function pickerOptionsFromAccept(accept){if(isDefined(accept)){var acceptForPicker=Object.entries(accept).filter(function(_ref2){var _ref3=_slicedToArray$1(_ref2,2),mimeType=_ref3[0],ext=_ref3[1],ok=!0;return isMIMEType(mimeType)||(console.warn('Skipped "'.concat(mimeType,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),ok=!1),(!Array.isArray(ext)||!ext.every(isExt))&&(console.warn('Skipped "'.concat(mimeType,'" because an invalid file extension was provided.')),ok=!1),ok}).reduce(function(agg,_ref4){var _ref5=_slicedToArray$1(_ref4,2),mimeType=_ref5[0],ext=_ref5[1];return _objectSpread$1(_objectSpread$1({},agg),{},_defineProperty$1({},mimeType,ext))},{});return[{description:"Files",accept:acceptForPicker}]}return accept}__name(pickerOptionsFromAccept,"pickerOptionsFromAccept");function acceptPropAsAcceptAttr(accept){if(isDefined(accept))return Object.entries(accept).reduce(function(a,_ref6){var _ref7=_slicedToArray$1(_ref6,2),mimeType=_ref7[0],ext=_ref7[1];return[].concat(_toConsumableArray$1(a),[mimeType],_toConsumableArray$1(ext))},[]).filter(function(v){return isMIMEType(v)||isExt(v)}).join(",")}__name(acceptPropAsAcceptAttr,"acceptPropAsAcceptAttr");function isAbort(v){return v instanceof DOMException&&(v.name==="AbortError"||v.code===v.ABORT_ERR)}__name(isAbort,"isAbort");function isSecurityError(v){return v instanceof DOMException&&(v.name==="SecurityError"||v.code===v.SECURITY_ERR)}__name(isSecurityError,"isSecurityError");function isMIMEType(v){return v==="audio/*"||v==="video/*"||v==="image/*"||v==="text/*"||/\w+\/[-+.\w]+/g.test(v)}__name(isMIMEType,"isMIMEType");function isExt(v){return/^.*\.[\w]+$/.test(v)}__name(isExt,"isExt");var _excluded=["children"],_excluded2=["open"],_excluded3=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_excluded4=["refKey","onChange","onClick"];function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}__name(_toConsumableArray,"_toConsumableArray");function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}__name(_nonIterableSpread,"_nonIterableSpread");function _iterableToArray(iter){if(typeof Symbol<"u"&&iter[Symbol.iterator]!=null||iter["@@iterator"]!=null)return Array.from(iter)}__name(_iterableToArray,"_iterableToArray");function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}__name(_arrayWithoutHoles,"_arrayWithoutHoles");function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}__name(_slicedToArray,"_slicedToArray");function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}__name(_nonIterableRest,"_nonIterableRest");function _unsupportedIterableToArray(o,minLen){if(o){if(typeof o=="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}__name(_unsupportedIterableToArray,"_unsupportedIterableToArray");function _arrayLikeToArray(arr,len){(len==null||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}__name(_arrayLikeToArray,"_arrayLikeToArray");function _iterableToArrayLimit(arr,i){var _i=arr==null?null:typeof Symbol<"u"&&arr[Symbol.iterator]||arr["@@iterator"];if(_i!=null){var _arr=[],_n=!0,_d=!1,_s,_e;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return!=null&&_i.return()}finally{if(_d)throw _e}}return _arr}}__name(_iterableToArrayLimit,"_iterableToArrayLimit");function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}__name(_arrayWithHoles,"_arrayWithHoles");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}__name(ownKeys,"ownKeys");function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}__name(_objectSpread,"_objectSpread");function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__name(_defineProperty,"_defineProperty");function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded),key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}__name(_objectWithoutProperties,"_objectWithoutProperties");function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={},sourceKeys=Object.keys(source),key,i;for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],!(excluded.indexOf(key)>=0)&&(target[key]=source[key]);return target}__name(_objectWithoutPropertiesLoose,"_objectWithoutPropertiesLoose");var Dropzone=reactExports.forwardRef(function(_ref,ref){var children=_ref.children,params=_objectWithoutProperties(_ref,_excluded),_useDropzone=useDropzone(params),open=_useDropzone.open,props=_objectWithoutProperties(_useDropzone,_excluded2);return reactExports.useImperativeHandle(ref,function(){return{open}},[open]),React.createElement(reactExports.Fragment,null,children(_objectSpread(_objectSpread({},props),{},{open})))});Dropzone.displayName="Dropzone";var defaultProps={disabled:!1,getFilesFromEvent:fromEvent,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Dropzone.defaultProps=defaultProps;Dropzone.propTypes={children:PropTypes.func,accept:PropTypes.objectOf(PropTypes.arrayOf(PropTypes.string)),multiple:PropTypes.bool,preventDropOnDocument:PropTypes.bool,noClick:PropTypes.bool,noKeyboard:PropTypes.bool,noDrag:PropTypes.bool,noDragEventsBubbling:PropTypes.bool,minSize:PropTypes.number,maxSize:PropTypes.number,maxFiles:PropTypes.number,disabled:PropTypes.bool,getFilesFromEvent:PropTypes.func,onFileDialogCancel:PropTypes.func,onFileDialogOpen:PropTypes.func,useFsAccessApi:PropTypes.bool,autoFocus:PropTypes.bool,onDragEnter:PropTypes.func,onDragLeave:PropTypes.func,onDragOver:PropTypes.func,onDrop:PropTypes.func,onDropAccepted:PropTypes.func,onDropRejected:PropTypes.func,onError:PropTypes.func,validator:PropTypes.func};const Dropzone$1=Dropzone;var initialState={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function useDropzone(){var props=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_defaultProps$props=_objectSpread(_objectSpread({},defaultProps),props),accept=_defaultProps$props.accept,disabled=_defaultProps$props.disabled,getFilesFromEvent=_defaultProps$props.getFilesFromEvent,maxSize=_defaultProps$props.maxSize,minSize=_defaultProps$props.minSize,multiple=_defaultProps$props.multiple,maxFiles=_defaultProps$props.maxFiles,onDragEnter=_defaultProps$props.onDragEnter,onDragLeave=_defaultProps$props.onDragLeave,onDragOver=_defaultProps$props.onDragOver,onDrop=_defaultProps$props.onDrop,onDropAccepted=_defaultProps$props.onDropAccepted,onDropRejected=_defaultProps$props.onDropRejected,onFileDialogCancel=_defaultProps$props.onFileDialogCancel,onFileDialogOpen=_defaultProps$props.onFileDialogOpen,useFsAccessApi=_defaultProps$props.useFsAccessApi,autoFocus=_defaultProps$props.autoFocus,preventDropOnDocument=_defaultProps$props.preventDropOnDocument,noClick=_defaultProps$props.noClick,noKeyboard=_defaultProps$props.noKeyboard,noDrag=_defaultProps$props.noDrag,noDragEventsBubbling=_defaultProps$props.noDragEventsBubbling,onError=_defaultProps$props.onError,validator=_defaultProps$props.validator,acceptAttr=reactExports.useMemo(function(){return acceptPropAsAcceptAttr(accept)},[accept]),pickerTypes=reactExports.useMemo(function(){return pickerOptionsFromAccept(accept)},[accept]),onFileDialogOpenCb=reactExports.useMemo(function(){return typeof onFileDialogOpen=="function"?onFileDialogOpen:noop},[onFileDialogOpen]),onFileDialogCancelCb=reactExports.useMemo(function(){return typeof onFileDialogCancel=="function"?onFileDialogCancel:noop},[onFileDialogCancel]),rootRef=reactExports.useRef(null),inputRef=reactExports.useRef(null),_useReducer=reactExports.useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1],isFocused=state.isFocused,isFileDialogActive=state.isFileDialogActive,fsAccessApiWorksRef=reactExports.useRef(typeof window<"u"&&window.isSecureContext&&useFsAccessApi&&canUseFileSystemAccessAPI()),onWindowFocus=__name(function(){!fsAccessApiWorksRef.current&&isFileDialogActive&&setTimeout(function(){if(inputRef.current){var files=inputRef.current.files;files.length||(dispatch({type:"closeDialog"}),onFileDialogCancelCb())}},300)},"onWindowFocus");reactExports.useEffect(function(){return window.addEventListener("focus",onWindowFocus,!1),function(){window.removeEventListener("focus",onWindowFocus,!1)}},[inputRef,isFileDialogActive,onFileDialogCancelCb,fsAccessApiWorksRef]);var dragTargetsRef=reactExports.useRef([]),onDocumentDrop=__name(function(event){rootRef.current&&rootRef.current.contains(event.target)||(event.preventDefault(),dragTargetsRef.current=[])},"onDocumentDrop");reactExports.useEffect(function(){return preventDropOnDocument&&(document.addEventListener("dragover",onDocumentDragOver,!1),document.addEventListener("drop",onDocumentDrop,!1)),function(){preventDropOnDocument&&(document.removeEventListener("dragover",onDocumentDragOver),document.removeEventListener("drop",onDocumentDrop))}},[rootRef,preventDropOnDocument]),reactExports.useEffect(function(){return!disabled&&autoFocus&&rootRef.current&&rootRef.current.focus(),function(){}},[rootRef,autoFocus,disabled]);var onErrCb=reactExports.useCallback(function(e){onError?onError(e):console.error(e)},[onError]),onDragEnterCb=reactExports.useCallback(function(event){event.preventDefault(),event.persist(),stopPropagation(event),dragTargetsRef.current=[].concat(_toConsumableArray(dragTargetsRef.current),[event.target]),isEvtWithFiles(event)&&Promise.resolve(getFilesFromEvent(event)).then(function(files){if(!(isPropagationStopped(event)&&!noDragEventsBubbling)){var fileCount=files.length,isDragAccept=fileCount>0&&allFilesAccepted({files,accept:acceptAttr,minSize,maxSize,multiple,maxFiles,validator}),isDragReject=fileCount>0&&!isDragAccept;dispatch({isDragAccept,isDragReject,isDragActive:!0,type:"setDraggedFiles"}),onDragEnter&&onDragEnter(event)}}).catch(function(e){return onErrCb(e)})},[getFilesFromEvent,onDragEnter,onErrCb,noDragEventsBubbling,acceptAttr,minSize,maxSize,multiple,maxFiles,validator]),onDragOverCb=reactExports.useCallback(function(event){event.preventDefault(),event.persist(),stopPropagation(event);var hasFiles=isEvtWithFiles(event);if(hasFiles&&event.dataTransfer)try{event.dataTransfer.dropEffect="copy"}catch{}return hasFiles&&onDragOver&&onDragOver(event),!1},[onDragOver,noDragEventsBubbling]),onDragLeaveCb=reactExports.useCallback(function(event){event.preventDefault(),event.persist(),stopPropagation(event);var targets=dragTargetsRef.current.filter(function(target){return rootRef.current&&rootRef.current.contains(target)}),targetIdx=targets.indexOf(event.target);targetIdx!==-1&&targets.splice(targetIdx,1),dragTargetsRef.current=targets,!(targets.length>0)&&(dispatch({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),isEvtWithFiles(event)&&onDragLeave&&onDragLeave(event))},[rootRef,onDragLeave,noDragEventsBubbling]),setFiles=reactExports.useCallback(function(files,event){var acceptedFiles=[],fileRejections=[];files.forEach(function(file){var _fileAccepted=fileAccepted(file,acceptAttr),_fileAccepted2=_slicedToArray(_fileAccepted,2),accepted=_fileAccepted2[0],acceptError=_fileAccepted2[1],_fileMatchSize=fileMatchSize(file,minSize,maxSize),_fileMatchSize2=_slicedToArray(_fileMatchSize,2),sizeMatch=_fileMatchSize2[0],sizeError=_fileMatchSize2[1],customErrors=validator?validator(file):null;if(accepted&&sizeMatch&&!customErrors)acceptedFiles.push(file);else{var errors=[acceptError,sizeError];customErrors&&(errors=errors.concat(customErrors)),fileRejections.push({file,errors:errors.filter(function(e){return e})})}}),(!multiple&&acceptedFiles.length>1||multiple&&maxFiles>=1&&acceptedFiles.length>maxFiles)&&(acceptedFiles.forEach(function(file){fileRejections.push({file,errors:[TOO_MANY_FILES_REJECTION]})}),acceptedFiles.splice(0)),dispatch({acceptedFiles,fileRejections,type:"setFiles"}),onDrop&&onDrop(acceptedFiles,fileRejections,event),fileRejections.length>0&&onDropRejected&&onDropRejected(fileRejections,event),acceptedFiles.length>0&&onDropAccepted&&onDropAccepted(acceptedFiles,event)},[dispatch,multiple,acceptAttr,minSize,maxSize,maxFiles,onDrop,onDropAccepted,onDropRejected,validator]),onDropCb=reactExports.useCallback(function(event){event.preventDefault(),event.persist(),stopPropagation(event),dragTargetsRef.current=[],isEvtWithFiles(event)&&Promise.resolve(getFilesFromEvent(event)).then(function(files){isPropagationStopped(event)&&!noDragEventsBubbling||setFiles(files,event)}).catch(function(e){return onErrCb(e)}),dispatch({type:"reset"})},[getFilesFromEvent,setFiles,onErrCb,noDragEventsBubbling]),openFileDialog=reactExports.useCallback(function(){if(fsAccessApiWorksRef.current){dispatch({type:"openDialog"}),onFileDialogOpenCb();var opts={multiple,types:pickerTypes};window.showOpenFilePicker(opts).then(function(handles){return getFilesFromEvent(handles)}).then(function(files){setFiles(files,null),dispatch({type:"closeDialog"})}).catch(function(e){isAbort(e)?(onFileDialogCancelCb(e),dispatch({type:"closeDialog"})):isSecurityError(e)?(fsAccessApiWorksRef.current=!1,inputRef.current?(inputRef.current.value=null,inputRef.current.click()):onErrCb(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):onErrCb(e)});return}inputRef.current&&(dispatch({type:"openDialog"}),onFileDialogOpenCb(),inputRef.current.value=null,inputRef.current.click())},[dispatch,onFileDialogOpenCb,onFileDialogCancelCb,useFsAccessApi,setFiles,onErrCb,pickerTypes,multiple]),onKeyDownCb=reactExports.useCallback(function(event){!rootRef.current||!rootRef.current.isEqualNode(event.target)||(event.key===" "||event.key==="Enter"||event.keyCode===32||event.keyCode===13)&&(event.preventDefault(),openFileDialog())},[rootRef,openFileDialog]),onFocusCb=reactExports.useCallback(function(){dispatch({type:"focus"})},[]),onBlurCb=reactExports.useCallback(function(){dispatch({type:"blur"})},[]),onClickCb=reactExports.useCallback(function(){noClick||(isIeOrEdge()?setTimeout(openFileDialog,0):openFileDialog())},[noClick,openFileDialog]),composeHandler=__name(function(fn){return disabled?null:fn},"composeHandler"),composeKeyboardHandler=__name(function(fn){return noKeyboard?null:composeHandler(fn)},"composeKeyboardHandler"),composeDragHandler=__name(function(fn){return noDrag?null:composeHandler(fn)},"composeDragHandler"),stopPropagation=__name(function(event){noDragEventsBubbling&&event.stopPropagation()},"stopPropagation"),getRootProps=reactExports.useMemo(function(){return function(){var _ref2=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_ref2$refKey=_ref2.refKey,refKey=_ref2$refKey===void 0?"ref":_ref2$refKey,role=_ref2.role,onKeyDown=_ref2.onKeyDown,onFocus=_ref2.onFocus,onBlur=_ref2.onBlur,onClick=_ref2.onClick,onDragEnter2=_ref2.onDragEnter,onDragOver2=_ref2.onDragOver,onDragLeave2=_ref2.onDragLeave,onDrop2=_ref2.onDrop,rest=_objectWithoutProperties(_ref2,_excluded3);return _objectSpread(_objectSpread(_defineProperty({onKeyDown:composeKeyboardHandler(composeEventHandlers(onKeyDown,onKeyDownCb)),onFocus:composeKeyboardHandler(composeEventHandlers(onFocus,onFocusCb)),onBlur:composeKeyboardHandler(composeEventHandlers(onBlur,onBlurCb)),onClick:composeHandler(composeEventHandlers(onClick,onClickCb)),onDragEnter:composeDragHandler(composeEventHandlers(onDragEnter2,onDragEnterCb)),onDragOver:composeDragHandler(composeEventHandlers(onDragOver2,onDragOverCb)),onDragLeave:composeDragHandler(composeEventHandlers(onDragLeave2,onDragLeaveCb)),onDrop:composeDragHandler(composeEventHandlers(onDrop2,onDropCb)),role:typeof role=="string"&&role!==""?role:"presentation"},refKey,rootRef),!disabled&&!noKeyboard?{tabIndex:0}:{}),rest)}},[rootRef,onKeyDownCb,onFocusCb,onBlurCb,onClickCb,onDragEnterCb,onDragOverCb,onDragLeaveCb,onDropCb,noKeyboard,noDrag,disabled]),onInputElementClick=reactExports.useCallback(function(event){event.stopPropagation()},[]),getInputProps=reactExports.useMemo(function(){return function(){var _ref3=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_ref3$refKey=_ref3.refKey,refKey=_ref3$refKey===void 0?"ref":_ref3$refKey,onChange=_ref3.onChange,onClick=_ref3.onClick,rest=_objectWithoutProperties(_ref3,_excluded4),inputProps=_defineProperty({accept:acceptAttr,multiple,type:"file",style:{display:"none"},onChange:composeHandler(composeEventHandlers(onChange,onDropCb)),onClick:composeHandler(composeEventHandlers(onClick,onInputElementClick)),tabIndex:-1},refKey,inputRef);return _objectSpread(_objectSpread({},inputProps),rest)}},[inputRef,accept,multiple,onDropCb,disabled]);return _objectSpread(_objectSpread({},state),{},{isFocused:isFocused&&!disabled,getRootProps,getInputProps,rootRef,inputRef,open:composeHandler(openFileDialog)})}__name(useDropzone,"useDropzone");function reducer(state,action){switch(action.type){case"focus":return _objectSpread(_objectSpread({},state),{},{isFocused:!0});case"blur":return _objectSpread(_objectSpread({},state),{},{isFocused:!1});case"openDialog":return _objectSpread(_objectSpread({},initialState),{},{isFileDialogActive:!0});case"closeDialog":return _objectSpread(_objectSpread({},state),{},{isFileDialogActive:!1});case"setDraggedFiles":return _objectSpread(_objectSpread({},state),{},{isDragActive:action.isDragActive,isDragAccept:action.isDragAccept,isDragReject:action.isDragReject});case"setFiles":return _objectSpread(_objectSpread({},state),{},{acceptedFiles:action.acceptedFiles,fileRejections:action.fileRejections});case"reset":return _objectSpread({},initialState);default:return state}}__name(reducer,"reducer");function noop(){}__name(noop,"noop");const _FileUpload=class _FileUpload extends ShaclFormSingleEditorReact{constructor(){super(...arguments);__publicField(this,"widgetSettings");__publicField(this,"error","");__publicField(this,"isUploading",!1)}static score(shaclPointer,dataPointer){return scorer(shaclPointer,dataPointer).has(dash("uriStart")).toNumber()}template(){const[hasError,setHasError]=reactExports.useState(!1);return this.value.value?jsxRuntimeExports.jsx("a",{title:this.value.value,href:this.value.value,target:"_blank",children:hasError?this.value.value.split("/").pop():jsxRuntimeExports.jsx("img",{onError:()=>{setHasError(!0)},className:"file-upload-image",src:this.value.value})}):null}header(){const showUpload=(this.shaclPointer.out([sh("maxCount")]).value??1/0)>=this.values.length;return jsxRuntimeExports.jsxs("div",{className:"widget",children:[this.error?jsxRuntimeExports.jsx("div",{className:"alert alert-danger mb-3",role:"alert",children:this.error}):null,this.isUploading?jsxRuntimeExports.jsx("div",{className:"spinner-border",role:"status",children:jsxRuntimeExports.jsx("span",{className:"visually-hidden",children:"Loading..."})}):showUpload?jsxRuntimeExports.jsx(Dropzone$1,{onDrop:files=>this.addFiles(files),children:({getRootProps,getInputProps})=>jsxRuntimeExports.jsxs("div",{className:"drop-zone",...getRootProps(),children:[jsxRuntimeExports.jsx("input",{...getInputProps()}),jsxRuntimeExports.jsx("span",{className:"lead",children:"Drag some files here or click to select files"})]})}):null]})}async addFiles(files){const prefix=this.shaclPointer.out([dash("uriStart")]).value.split(/\/|#/g).pop();try{for(const file of files){const formData=new FormData;formData.append("files",file),this.isUploading=!0,this.render();const response=await fetch(`${this.widgetSettings.backend}/${prefix}/`,{body:formData,method:"POST"});this.isUploading=!1;const filePaths=await response.json();for(const filePath of filePaths)this.addValue(defaultEnv.namedNode(filePath))}}catch(exception){this.error=exception.message??exception}this.render()}async beforeRemove(){return(await(await fetch(this.value.value,{method:"DELETE"})).json()).success===!0}};__name(_FileUpload,"FileUpload"),__publicField(_FileUpload,"hideAddButton",!0),__publicField(_FileUpload,"iri",shFrm("FileUpload").value);let FileUpload=_FileUpload;export{FileUpload as default};
