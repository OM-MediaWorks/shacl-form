var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{f as reactExports,a as sh,k as rdf,j as jsxRuntimeExports}from"./index-6798334f.js";import{S as ShaclFormSingleEditorReact}from"./ShaclFormSingleEditorReact-ac70313b.js";import{L as LanguageSelector}from"./LanguageSelector-30064e71.js";import"./ShaclFormSingleEditor-698b5a5a.js";function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}__name(_extends,"_extends");function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={},sourceKeys=Object.keys(source),key,i;for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],!(excluded.indexOf(key)>=0)&&(target[key]=source[key]);return target}__name(_objectWithoutPropertiesLoose,"_objectWithoutPropertiesLoose");var index$1=reactExports.useLayoutEffect,useLatest=__name(function(value){var ref=reactExports.useRef(value);return index$1(function(){ref.current=value}),ref},"useLatest"),updateRef=__name(function(ref,value){if(typeof ref=="function"){ref(value);return}ref.current=value},"updateRef"),useComposedRef=__name(function(libRef,userRef){var prevUserRef=reactExports.useRef();return reactExports.useCallback(function(instance){libRef.current=instance,prevUserRef.current&&updateRef(prevUserRef.current,null),prevUserRef.current=userRef,userRef&&updateRef(userRef,instance)},[userRef])},"useComposedRef"),HIDDEN_TEXTAREA_STYLE={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},forceHiddenStyles=__name(function(node){Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function(key){node.style.setProperty(key,HIDDEN_TEXTAREA_STYLE[key],"important")})},"forceHiddenStyles"),forceHiddenStyles$1=forceHiddenStyles,hiddenTextarea=null,getHeight=__name(function(node,sizingData){var height=node.scrollHeight;return sizingData.sizingStyle.boxSizing==="border-box"?height+sizingData.borderSize:height-sizingData.paddingSize},"getHeight");function calculateNodeHeight(sizingData,value,minRows,maxRows){minRows===void 0&&(minRows=1),maxRows===void 0&&(maxRows=1/0),hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),hiddenTextarea.setAttribute("tabindex","-1"),hiddenTextarea.setAttribute("aria-hidden","true"),forceHiddenStyles$1(hiddenTextarea)),hiddenTextarea.parentNode===null&&document.body.appendChild(hiddenTextarea);var paddingSize=sizingData.paddingSize,borderSize=sizingData.borderSize,sizingStyle=sizingData.sizingStyle,boxSizing=sizingStyle.boxSizing;Object.keys(sizingStyle).forEach(function(_key){var key=_key;hiddenTextarea.style[key]=sizingStyle[key]}),forceHiddenStyles$1(hiddenTextarea),hiddenTextarea.value=value;var height=getHeight(hiddenTextarea,sizingData);hiddenTextarea.value=value,height=getHeight(hiddenTextarea,sizingData),hiddenTextarea.value="x";var rowHeight=hiddenTextarea.scrollHeight-paddingSize,minHeight=rowHeight*minRows;boxSizing==="border-box"&&(minHeight=minHeight+paddingSize+borderSize),height=Math.max(minHeight,height);var maxHeight=rowHeight*maxRows;return boxSizing==="border-box"&&(maxHeight=maxHeight+paddingSize+borderSize),height=Math.min(maxHeight,height),[height,rowHeight]}__name(calculateNodeHeight,"calculateNodeHeight");var noop=__name(function(){},"noop"),pick=__name(function(props,obj){return props.reduce(function(acc,prop){return acc[prop]=obj[prop],acc},{})},"pick"),SIZING_STYLE=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],isIE=!!document.documentElement.currentStyle,getSizingData=__name(function(node){var style=window.getComputedStyle(node);if(style===null)return null;var sizingStyle=pick(SIZING_STYLE,style),boxSizing=sizingStyle.boxSizing;if(boxSizing==="")return null;isIE&&boxSizing==="border-box"&&(sizingStyle.width=parseFloat(sizingStyle.width)+parseFloat(sizingStyle.borderRightWidth)+parseFloat(sizingStyle.borderLeftWidth)+parseFloat(sizingStyle.paddingRight)+parseFloat(sizingStyle.paddingLeft)+"px");var paddingSize=parseFloat(sizingStyle.paddingBottom)+parseFloat(sizingStyle.paddingTop),borderSize=parseFloat(sizingStyle.borderBottomWidth)+parseFloat(sizingStyle.borderTopWidth);return{sizingStyle,paddingSize,borderSize}},"getSizingData"),getSizingData$1=getSizingData;function useListener(target,type,listener){var latestListener=useLatest(listener);reactExports.useLayoutEffect(function(){var handler=__name(function(ev){return latestListener.current(ev)},"handler");if(target)return target.addEventListener(type,handler),function(){return target.removeEventListener(type,handler)}},[])}__name(useListener,"useListener");var useWindowResizeListener=__name(function(listener){useListener(window,"resize",listener)},"useWindowResizeListener"),useFontsLoadedListener=__name(function(listener){useListener(document.fonts,"loadingdone",listener)},"useFontsLoadedListener"),_excluded=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],TextareaAutosize=__name(function(_ref,userRef){var cacheMeasurements=_ref.cacheMeasurements,maxRows=_ref.maxRows,minRows=_ref.minRows,_ref$onChange=_ref.onChange,onChange=_ref$onChange===void 0?noop:_ref$onChange,_ref$onHeightChange=_ref.onHeightChange,onHeightChange=_ref$onHeightChange===void 0?noop:_ref$onHeightChange,props=_objectWithoutPropertiesLoose(_ref,_excluded),isControlled=props.value!==void 0,libRef=reactExports.useRef(null),ref=useComposedRef(libRef,userRef),heightRef=reactExports.useRef(0),measurementsCacheRef=reactExports.useRef(),resizeTextarea=__name(function(){var node=libRef.current,nodeSizingData=cacheMeasurements&&measurementsCacheRef.current?measurementsCacheRef.current:getSizingData$1(node);if(nodeSizingData){measurementsCacheRef.current=nodeSizingData;var _calculateNodeHeight=calculateNodeHeight(nodeSizingData,node.value||node.placeholder||"x",minRows,maxRows),height=_calculateNodeHeight[0],rowHeight=_calculateNodeHeight[1];heightRef.current!==height&&(heightRef.current=height,node.style.setProperty("height",height+"px","important"),onHeightChange(height,{rowHeight}))}},"resizeTextarea"),handleChange=__name(function(event){isControlled||resizeTextarea(),onChange(event)},"handleChange");return reactExports.useLayoutEffect(resizeTextarea),useWindowResizeListener(resizeTextarea),useFontsLoadedListener(resizeTextarea),reactExports.createElement("textarea",_extends({},props,{onChange:handleChange,ref}))},"TextareaAutosize"),index=reactExports.forwardRef(TextareaAutosize);const _Text=class _Text extends ShaclFormSingleEditorReact{template(){var _a;const language=this.shaclPointer.out([sh("datatype")]).terms.some(term=>term.equals(rdf("langString")))?this.form.activeContentLanguage:void 0;return jsxRuntimeExports.jsxs("div",{className:"d-flex",children:[jsxRuntimeExports.jsx(index,{minRows:3,className:"form-control",onBlur:event=>{this.value=this.df.literal(event.target.value,language)},defaultValue:((_a=this.value)==null?void 0:_a.value)??""}),jsxRuntimeExports.jsx(LanguageSelector,{field:this})]})}};__name(_Text,"Text");let Text=_Text;export{Text as default};
