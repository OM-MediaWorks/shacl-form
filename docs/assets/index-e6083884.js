var __defProp=Object.defineProperty;var __defNormalProp=(obj,key,value)=>key in obj?__defProp(obj,key,{enumerable:!0,configurable:!0,writable:!0,value}):obj[key]=value;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});var __publicField=(obj,key,value)=>(__defNormalProp(obj,typeof key!="symbol"?key+"":key,value),value);import{S as ShaclFormSingleEditorUhtml}from"./ShaclFormSingleEditorUhtml-087f5486.js";import{o as IdentifierIssuer_1,M as MessageDigestBrowser,P as Permuter_1,N as NQuads_1,U as URDNA2015Sync_1,g as getDefaultExportFromCjs,p as N3Parser,i as dash}from"./index-d9e2d05a.js";import{r as require$$4}from"./___vite-browser-external_commonjs-proxy-ed0f6cea.js";import{y as yallist}from"./yallist-b7363eba.js";import"./ShaclFormSingleEditor-5cdcae25.js";import"./async-cd58429d.js";var Ot=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xe(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}__name(xe,"xe");function Be(){}__name(Be,"Be");Object.assign(Be,{default:Be,register:Be,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(s){const e=(this.document||this.ownerDocument).querySelectorAll(s);let t=e.length;for(;--t>=0&&e.item(t)!==this;);return t>-1});Element.prototype.closest||(Element.prototype.closest=function(s){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(s))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(e){const t=document.createDocumentFragment();Array.isArray(e)||(e=[e]),e.forEach(o=>{const i=o instanceof Node;t.appendChild(i?o:document.createTextNode(o))}),this.insertBefore(t,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(s){s=arguments.length===0?!0:!!s;const e=this.parentNode,t=window.getComputedStyle(e,null),o=parseInt(t.getPropertyValue("border-top-width")),i=parseInt(t.getPropertyValue("border-left-width")),n=this.offsetTop-e.offsetTop<e.scrollTop,r=this.offsetTop-e.offsetTop+this.clientHeight-o>e.scrollTop+e.clientHeight,a=this.offsetLeft-e.offsetLeft<e.scrollLeft,l=this.offsetLeft-e.offsetLeft+this.clientWidth-i>e.scrollLeft+e.clientWidth,c=n&&!r;(n||r)&&s&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-o+this.clientHeight/2),(a||l)&&s&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-i+this.clientWidth/2),(n||r||a||l)&&!s&&this.scrollIntoView(c)});window.requestIdleCallback=window.requestIdleCallback||function(s){const e=Date.now();return setTimeout(function(){s({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(s){clearTimeout(s)};let At=__name((s=21)=>crypto.getRandomValues(new Uint8Array(s)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),""),"At");var it=(s=>(s.VERBOSE="VERBOSE",s.INFO="INFO",s.WARN="WARN",s.ERROR="ERROR",s))(it||{});const B={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91},_t={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function be(s,e,t="log",o,i="color: inherit"){if(!("console"in window)||!window.console[t])return;const n=["info","log","warn","error"].includes(t),r=[];switch(be.logLevel){case"ERROR":if(t!=="error")return;break;case"WARN":if(!["error","warn"].includes(t))return;break;case"INFO":if(!n||s)return;break}o&&r.push(o);const a="Editor.js 2.28.0",l=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;s&&(n?(r.unshift(l,i),e=`%c${a}%c ${e}`):e=`( ${a} )${e}`);try{n?o?console[t](`${e} %o`,...r):console[t](e,...r):console[t](e)}catch{}}__name(be,"be");be.logLevel="VERBOSE";function Nt(s){be.logLevel=s}__name(Nt,"Nt");const L=be.bind(window,!1),K=be.bind(window,!0);function oe(s){return Object.prototype.toString.call(s).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}__name(oe,"oe");function D(s){return oe(s)==="function"||oe(s)==="asyncfunction"}__name(D,"D");function z(s){return oe(s)==="object"}__name(z,"z");function J(s){return oe(s)==="string"}__name(J,"J");function Rt(s){return oe(s)==="boolean"}__name(Rt,"Rt");function qe(s){return oe(s)==="number"}__name(qe,"qe");function Ze(s){return oe(s)==="undefined"}__name(Ze,"Ze");function V(s){return s?Object.keys(s).length===0&&s.constructor===Object:!0}__name(V,"V");function nt(s){return s>47&&s<58||s===32||s===13||s===229||s>64&&s<91||s>95&&s<112||s>185&&s<193||s>218&&s<223}__name(nt,"nt");async function Dt(s,e=()=>{},t=()=>{}){async function o(i,n,r){try{await i.function(i.data),await n(Ze(i.data)?{}:i.data)}catch{r(Ze(i.data)?{}:i.data)}}return __name(o,"o"),s.reduce(async(i,n)=>(await i,o(n,e,t)),Promise.resolve())}__name(Dt,"Dt");function st(s){return Array.prototype.slice.call(s)}__name(st,"st");function re(s,e){return function(){const t=this,o=arguments;window.setTimeout(()=>s.apply(t,o),e)}}__name(re,"re");function Pt(s){return s.name.split(".").pop()}__name(Pt,"Pt");function Ft(s){return/^[-\w]+\/([-+\w]+|\*)$/.test(s)}__name(Ft,"Ft");function Ht(s,e,t){let o;return(...i)=>{const n=this,r=__name(()=>{o=null,t||s.apply(n,i)},"r"),a=t&&!o;window.clearTimeout(o),o=window.setTimeout(r,e),a&&s.apply(n,i)}}__name(Ht,"Ht");function Ce(s,e,t=void 0){let o,i,n,r=null,a=0;t||(t={});const l=__name(function(){a=t.leading===!1?0:Date.now(),r=null,n=s.apply(o,i),r||(o=i=null)},"l");return function(){const c=Date.now();!a&&t.leading===!1&&(a=c);const u=e-(c-a);return o=this,i=arguments,u<=0||u>e?(r&&(clearTimeout(r),r=null),a=c,n=s.apply(o,i),r||(o=i=null)):!r&&t.trailing!==!1&&(r=setTimeout(l,u)),n}}__name(Ce,"Ce");function jt(){const s={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(s).find(t=>window.navigator.appVersion.toLowerCase().indexOf(t)!==-1);return e&&(s[e]=!0),s}__name(jt,"jt");function ae(s){return s[0].toUpperCase()+s.slice(1)}__name(ae,"ae");function Se(s,...e){if(!e.length)return s;const t=e.shift();if(z(s)&&z(t))for(const o in t)z(t[o])?(s[o]||Object.assign(s,{[o]:{}}),Se(s[o],t[o])):Object.assign(s,{[o]:t[o]});return Se(s,...e)}__name(Se,"Se");function Re(s){const e=jt();return s=s.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e.mac?s=s.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):s=s.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),s}__name(Re,"Re");function zt(s){try{return new URL(s).href}catch{}return s.substring(0,2)==="//"?window.location.protocol+s:window.location.origin+s}__name(zt,"zt");function Ut(){return At(10)}__name(Ut,"Ut");function $t(s){window.open(s,"_blank")}__name($t,"$t");function Wt(s=""){return`${s}${Math.floor(Math.random()*1e8).toString(16)}`}__name(Wt,"Wt");function Ie(s,e,t){const o=`«${e}» is deprecated and will be removed in the next major release. Please use the «${t}» instead.`;s&&K(o,"warn")}__name(Ie,"Ie");function ce(s,e,t){const o=t.value?"value":"get",i=t[o],n=`#${e}Cache`;if(t[o]=function(...r){return this[n]===void 0&&(this[n]=i.apply(this,...r)),this[n]},o==="get"&&t.set){const r=t.set;t.set=function(a){delete s[n],r.apply(this,a)}}return t}__name(ce,"ce");const rt=650;function te(){return window.matchMedia(`(max-width: ${rt}px)`).matches}__name(te,"te");const Ge=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Yt(s,e){const t=Array.isArray(s)||z(s),o=Array.isArray(e)||z(e);return t||o?JSON.stringify(s)===JSON.stringify(e):s===e}__name(Yt,"Yt");const _d=class _d{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,t=null,o={}){const i=document.createElement(e);Array.isArray(t)?i.classList.add(...t):t&&i.classList.add(t);for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n]);return i}static text(e){return document.createTextNode(e)}static append(e,t){Array.isArray(t)?t.forEach(o=>e.appendChild(o)):e.appendChild(t)}static prepend(e,t){Array.isArray(t)?(t=t.reverse(),t.forEach(o=>e.prepend(o))):e.prepend(t)}static swap(e,t){const o=document.createElement("div"),i=e.parentNode;i.insertBefore(o,e),i.insertBefore(e,t),i.insertBefore(t,o),i.removeChild(o)}static find(e=document,t){return e.querySelector(t)}static get(e){return document.getElementById(e)}static findAll(e=document,t){return e.querySelectorAll(t)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(t=>`input[type="${t}"]`).join(", ")}static findAllInputs(e){return st(e.querySelectorAll(_d.allInputsSelector)).reduce((t,o)=>_d.isNativeInput(o)||_d.containsOnlyInlineElements(o)?[...t,o]:[...t,..._d.getDeepestBlockElements(o)],[])}static getDeepestNode(e,t=!1){const o=t?"lastChild":"firstChild",i=t?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[o]){let n=e[o];if(_d.isSingleTag(n)&&!_d.isNativeInput(n)&&!_d.isLineBreakTag(n))if(n[i])n=n[i];else if(n.parentNode[i])n=n.parentNode[i];else return n.parentNode;return this.getDeepestNode(n,t)}return e}static isElement(e){return qe(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return qe(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const t=["INPUT","TEXTAREA"];return e&&e.tagName?t.includes(e.tagName):!1}static canSetCaret(e){let t=!0;if(_d.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":t=!1;break}else t=_d.isContentEditable(e);return t}static isNodeEmpty(e){let t;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?t=e.value:t=e.textContent.replace("​",""),t.trim().length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e){e.normalize();const t=[e];for(;t.length>0;)if(e=t.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e))return!1;e.childNodes&&t.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const t=_d.make("div");return t.innerHTML=e,t.childElementCount>0}static getContentLength(e){return _d.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let t;J(e)?(t=document.createElement("div"),t.innerHTML=e):t=e;const o=__name(i=>!_d.blockElements.includes(i.tagName.toLowerCase())&&Array.from(i.children).every(o),"o");return Array.from(t.children).every(o)}static getDeepestBlockElements(e){return _d.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((t,o)=>[...t,..._d.getDeepestBlockElements(o)],[])}static getHolder(e){return J(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const t=e.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,i=window.pageYOffset||document.documentElement.scrollTop,n=t.top+i,r=t.left+o;return{top:n,left:r,bottom:n+t.height,right:r+t.width}}};__name(_d,"d");let d=_d;const Kt={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},Xt={Text:"",Link:"",Bold:"",Italic:""},Vt={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},qt={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},at={ui:Kt,toolNames:Xt,tools:Vt,blockTunes:qt};var _a;const ie=(_a=class{static ui(s,e){return ie._t(s,e)}static t(s,e){return ie._t(s,e)}static setDictionary(s){ie.currentDictionary=s}static _t(s,e){const t=ie.getNamespace(s);return!t||!t[e]?e:t[e]}static getNamespace(s){return s.split(".").reduce((t,o)=>!t||!Object.keys(t).length?{}:t[o],ie.currentDictionary)}},__name(_a,"ie"),_a);let $=ie;$.currentDictionary=at;const _lt=class _lt extends Error{};__name(_lt,"lt");let lt=_lt;const _we=class _we{constructor(){this.subscribers={}}on(e,t){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(t)}once(e,t){e in this.subscribers||(this.subscribers[e]=[]);const o=__name(i=>{const n=t(i),r=this.subscribers[e].indexOf(o);return r!==-1&&this.subscribers[e].splice(r,1),n},"o");this.subscribers[e].push(o)}emit(e,t){V(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((o,i)=>{const n=i(o);return n!==void 0?n:o},t)}off(e,t){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let o=0;o<this.subscribers[e].length;o++)if(this.subscribers[e][o]===t){delete this.subscribers[e][o];break}}destroy(){this.subscribers={}}};__name(_we,"we");let we=_we;function ee(s){Object.setPrototypeOf(this,{get id(){return s.id},get name(){return s.name},get config(){return s.config},get holder(){return s.holder},get isEmpty(){return s.isEmpty},get selected(){return s.selected},set stretched(t){s.stretched=t},get stretched(){return s.stretched},call(t,o){return s.call(t,o)},save(){return s.save()},validate(t){return s.validate(t)},dispatchChange(){s.dispatchChange()}})}__name(ee,"ee");const _De=class _De{constructor(){this.allListeners=[]}on(e,t,o,i=!1){const n=Wt("l"),r={id:n,element:e,eventType:t,handler:o,options:i};if(!this.findOne(e,t,o))return this.allListeners.push(r),e.addEventListener(t,o,i),n}off(e,t,o,i){const n=this.findAll(e,t,o);n.forEach((r,a)=>{const l=this.allListeners.indexOf(n[a]);l>-1&&(this.allListeners.splice(l,1),r.element.removeEventListener(r.eventType,r.handler,r.options))})}offById(e){const t=this.findById(e);t&&t.element.removeEventListener(t.eventType,t.handler,t.options)}findOne(e,t,o){const i=this.findAll(e,t,o);return i.length>0?i[0]:null}findAll(e,t,o){let i;const n=e?this.findByEventTarget(e):[];return e&&t&&o?i=n.filter(r=>r.eventType===t&&r.handler===o):e&&t?i=n.filter(r=>r.eventType===t):i=n,i}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(t=>{if(t.element===e)return t})}findByType(e){return this.allListeners.filter(t=>{if(t.eventType===e)return t})}findByHandler(e){return this.allListeners.filter(t=>{if(t.handler===e)return t})}findById(e){return this.allListeners.find(t=>t.id===e)}};__name(_De,"De");let De=_De;const _C=class _C{constructor({config:e,eventsDispatcher:t}){if(this.nodes={},this.listeners=new De,this.readOnlyMutableListeners={on:(o,i,n,r=!1)=>{this.mutableListenerIds.push(this.listeners.on(o,i,n,r))},clearAll:()=>{for(const o of this.mutableListenerIds)this.listeners.offById(o);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===_C)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=t}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const t=this.nodes[e];t instanceof HTMLElement&&t.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}};__name(_C,"C");let C=_C;const _m=class _m{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const t=e.anchorNode;return t?d.isElement(t)?t:t.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(_m.get())}static isSelectionAtEditor(e){if(!e)return!1;let t=e.anchorNode||e.focusNode;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let o=null;return t&&t instanceof Element&&(o=t.closest(`.${_m.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let t=e.startContainer;t&&t.nodeType===Node.TEXT_NODE&&(t=t.parentNode);let o=null;return t&&t instanceof Element&&(o=t.closest(`.${_m.CSS.editorZone}`)),o?o.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!_m.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,t,o={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,t=e.createRange(),o.x=t.boundingLeft,o.y=t.boundingTop,o.width=t.boundingWidth,o.height=t.boundingHeight,o;if(!window.getSelection)return L("Method window.getSelection is not supported","warn"),o;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return L("Method SelectionUtils.rangeCount is not supported","warn"),o;if(e.rangeCount===0)return o;if(t=e.getRangeAt(0).cloneRange(),t.getBoundingClientRect&&(o=t.getBoundingClientRect()),o.x===0&&o.y===0){const i=document.createElement("span");if(i.getBoundingClientRect){i.appendChild(document.createTextNode("​")),t.insertNode(i),o=i.getBoundingClientRect();const n=i.parentNode;n.removeChild(i),n.normalize()}}return o}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,t=0){const o=document.createRange(),i=window.getSelection();return d.isNativeInput(e)?d.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=t,e.getBoundingClientRect()):void 0:(o.setStart(e,t),o.setEnd(e,t),i.removeAllRanges(),i.addRange(o),o.getBoundingClientRect())}static isRangeInsideContainer(e){const t=_m.range;return t===null?!1:e.contains(t.startContainer)}static addFakeCursor(){const e=_m.range;if(e===null)return;const t=d.make("span","codex-editor__fake-cursor");t.dataset.mutationFree="true",e.collapse(),e.insertNode(t)}static isFakeCursorInsideContainer(e){return d.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const t=d.find(e,".codex-editor__fake-cursor");t&&t.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=_m.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),t=document.createRange();t.selectNodeContents(e.focusNode),t.collapse(!1),e.removeAllRanges(),e.addRange(t)}findParentTag(e,t,o=10){const i=window.getSelection();let n=null;return!i||!i.anchorNode||!i.focusNode?null:([i.anchorNode,i.focusNode].forEach(a=>{let l=o;for(;l>0&&a.parentNode&&!(a.tagName===e&&(n=a,t&&a.classList&&!a.classList.contains(t)&&(n=null),n));)a=a.parentNode,l--}),n)}expandToTag(e){const t=window.getSelection();t.removeAllRanges();const o=document.createRange();o.selectNodeContents(e),t.addRange(o)}};__name(_m,"m");let m=_m;function Zt(s,e){const{type:t,target:o,addedNodes:i,removedNodes:n}=s;if(o===e)return!0;if(["characterData","attributes"].includes(t)){const l=o.nodeType===Node.TEXT_NODE?o.parentNode:o;return e.contains(l)}const r=Array.from(i).some(l=>e.contains(l)),a=Array.from(n).some(l=>e.contains(l));return r||a}__name(Zt,"Zt");const Me="redactor dom changed",ct="block changed",dt="fake cursor is about to be toggled",ht="fake cursor have been set";function Je(s,e){return s.mergeable&&s.name===e.name}__name(Je,"Je");function Gt(s,e){const t=e==null?void 0:e.export;return D(t)?t(s):J(t)?s[t]:(t!==void 0&&L("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}__name(Gt,"Gt");function Jt(s,e){const t=e==null?void 0:e.import;return D(t)?t(s):J(t)?{[t]:s}:(t!==void 0&&L("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}__name(Jt,"Jt");var q=(s=>(s.APPEND_CALLBACK="appendCallback",s.RENDERED="rendered",s.MOVED="moved",s.UPDATED="updated",s.REMOVED="removed",s.ON_PASTE="onPaste",s))(q||{});const _F=class _F extends we{constructor({id:e=Ut(),data:t,tool:o,api:i,readOnly:n,tunesData:r},a){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(l=void 0)=>{const c=l===void 0,u=l instanceof InputEvent;!c&&!u&&this.detectToolRootChange(l);let h;c||u?h=!0:h=!(l.length>0&&l.every(k=>{const{addedNodes:p,removedNodes:v,target:A}=k;return[...Array.from(p),...Array.from(v),A].some(_=>d.isElement(_)?_.dataset.mutationFree==="true":!1)})),h&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=o.name,this.id=e,this.settings=o.settings,this.config=o.settings.config||{},this.api=i,this.editorEventBus=a||null,this.blockAPI=new ee(this),this.tool=o,this.toolInstance=o.create(t,this.blockAPI,n),this.tunes=o.tunes,this.composeTunes(r),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",focused:"ce-block--focused",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=d.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const t=this.inputs.findIndex(o=>o===e||o.contains(e));t!==-1&&(this.inputIndex=t)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!V(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return D(this.toolInstance.merge)}get isEmpty(){const e=d.isEmpty(this.pluginsContent),t=!this.hasMedia;return e&&t}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set focused(e){this.holder.classList.toggle(_F.CSS.focused,e)}get focused(){return this.holder.classList.contains(_F.CSS.focused)}set selected(e){var i,n;this.holder.classList.toggle(_F.CSS.selected,e);const t=e===!0&&m.isRangeInsideContainer(this.holder),o=e===!1&&m.isFakeCursorInsideContainer(this.holder);(t||o)&&((i=this.editorEventBus)==null||i.emit(dt,{state:e}),t?m.addFakeCursor():m.removeFakeCursor(this.holder),(n=this.editorEventBus)==null||n.emit(ht,{state:e}))}get selected(){return this.holder.classList.contains(_F.CSS.selected)}set stretched(e){this.holder.classList.toggle(_F.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(_F.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(_F.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,t){if(D(this.toolInstance[e])){e==="appendCallback"&&L("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,t)}catch(o){L(`Error during '${e}' call: ${o.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),t=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([n,r])=>{if(D(r.save))try{t[n]=r.save()}catch(a){L(`Tune ${r.constructor.name} save method throws an Error %o`,"warn",a)}});const o=window.performance.now();let i;return Promise.resolve(e).then(n=>(i=window.performance.now(),{id:this.id,tool:this.name,data:n,tunes:t,time:i-o})).catch(n=>{L(`Saving process for ${this.name} tool failed due to the ${n}`,"log","red")})}async validate(e){let t=!0;return this.toolInstance.validate instanceof Function&&(t=await this.toolInstance.validate(e)),t}getTunes(){const e=document.createElement("div"),t=[],o=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],i=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(n=>n.render());return[o,i].flat().forEach(n=>{d.isElement(n)?e.appendChild(n):Array.isArray(n)?t.push(...n):t.push(n)}),[t,e]}updateCurrentInput(){this.currentInput=d.isNativeInput(document.activeElement)||!m.anchorNode?document.activeElement:m.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),D(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const t=await this.data;return e.find(i=>Object.entries(i.data).some(([n,r])=>t[n]&&Yt(t[n],r)))}async exportDataAsString(){const e=await this.data;return Gt(e,this.tool.conversionConfig)}compose(){const e=d.make("div",_F.CSS.wrapper),t=d.make("div",_F.CSS.content),o=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=o,t.appendChild(this.toolRenderedElement);let i=t;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(n=>{if(D(n.wrap))try{i=n.wrap(i)}catch(r){L(`Tune ${n.constructor.name} wrap method throws an Error %o`,"warn",r)}}),e.appendChild(i),e}composeTunes(e){Array.from(this.tunes.values()).forEach(t=>{(t.isInternal?this.defaultTunesInstances:this.tunesInstances).set(t.name,t.create(e[t.name],this.blockAPI))}),Object.entries(e).forEach(([t,o])=>{this.tunesInstances.has(t)||(this.unavailableTunesData[t]=o)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),d.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),d.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=t=>{const{mutations:o}=t;o.some(n=>Zt(n,this.toolRenderedElement))&&this.didMutated(o)},(e=this.editorEventBus)==null||e.on(Me,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(Me,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(t=>{if(Array.from(t.removedNodes).includes(this.toolRenderedElement)){const i=t.addedNodes[t.addedNodes.length-1];this.toolRenderedElement=i}})}dropInputsCache(){this.cachedInputs=[]}};__name(_F,"F");let F=_F;const _Qt=class _Qt extends C{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,t={},o={},i,n,r,a)=>{const l=this.Editor.BlockManager.insert({id:a,tool:e,data:t,index:i,needToFocus:n,replace:r});return new ee(l)},this.composeBlockData=async e=>{const t=this.Editor.Tools.blockTools.get(e);return new F({tool:t,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,t)=>{const{BlockManager:o}=this.Editor,i=o.getBlockById(e);if(i===void 0)throw new Error(`Block with id "${e}" not found`);const n=await o.update(i,t);return new ee(n)},this.convert=(e,t,o)=>{var h,f;const{BlockManager:i,Tools:n}=this.Editor,r=i.getBlockById(e);if(!r)throw new Error(`Block with id "${e}" not found`);const a=n.blockTools.get(r.name),l=n.blockTools.get(t);if(!l)throw new Error(`Block Tool with type "${t}" not found`);const c=((h=a==null?void 0:a.conversionConfig)==null?void 0:h.export)!==void 0,u=((f=l.conversionConfig)==null?void 0:f.import)!==void 0;if(c&&u)i.convert(r,t,o);else{const k=[c?!1:ae(r.name),u?!1:ae(t)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${r.name}" to "${t}" is not possible. ${k} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,t=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(t);const o=e.map(({id:i,type:n,data:r})=>this.Editor.BlockManager.composeBlock({id:i,tool:n||this.config.defaultBlock,data:r}));return this.Editor.BlockManager.insertMany(o,t),o.map(i=>new ee(i))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,t)=>this.swap(e,t),move:(e,t)=>this.move(e,t),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(e,t=!0)=>this.stretchBlock(e,t),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const t=this.Editor.BlockManager.getBlockById(e);if(!t){K("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(t)}getBlockByIndex(e){const t=this.Editor.BlockManager.getBlockByIndex(e);if(t===void 0){K("There is no block at index `"+e+"`","warn");return}return new ee(t)}getById(e){const t=this.Editor.BlockManager.getBlockById(e);return t===void 0?(K("There is no block with id `"+e+"`","warn"),null):new ee(t)}swap(e,t){L("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,t)}move(e,t){this.Editor.BlockManager.move(e,t)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const t=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(t)}catch(t){K(t,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,t=!0){Ie(!0,"blocks.stretchBlock()","BlockAPI");const o=this.Editor.BlockManager.getBlockByIndex(e);o&&(o.stretched=t)}insertNewBlock(){L("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}};__name(_Qt,"Qt");let Qt=_Qt;const _eo=class _eo extends C{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,t),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,t),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,t),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,t=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,t),!0):!1,this.setToBlock=(e,t=this.Editor.Caret.positions.DEFAULT,o=0)=>this.Editor.BlockManager.blocks[e]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e],t,o),!0):!1,this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}};__name(_eo,"eo");let eo=_eo;const _to=class _to extends C{get methods(){return{emit:(e,t)=>this.emit(e,t),off:(e,t)=>this.off(e,t),on:(e,t)=>this.on(e,t)}}on(e,t){this.eventsDispatcher.on(e,t)}emit(e,t){this.eventsDispatcher.emit(e,t)}off(e,t){this.eventsDispatcher.off(e,t)}};__name(_to,"to");let to=_to;const _Pe=class _Pe extends C{static getNamespace(e){return e.isTune()?`blockTunes.${e.name}`:`tools.${e.name}`}get methods(){return{t:()=>{K("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:t=>$.t(_Pe.getNamespace(e),t)})}};__name(_Pe,"Pe");let Pe=_Pe;const _oo=class _oo extends C{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}};__name(_oo,"oo");let oo=_oo;const _io=class _io extends C{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}};__name(_io,"io");let io=_io;const _no=class _no extends C{get methods(){return{on:(e,t,o,i)=>this.on(e,t,o,i),off:(e,t,o,i)=>this.off(e,t,o,i),offById:e=>this.offById(e)}}on(e,t,o,i){return this.listeners.on(e,t,o,i)}off(e,t,o,i){this.listeners.off(e,t,o,i)}offById(e){this.listeners.offById(e)}};__name(_no,"no");let no=_no;var Le={},so={get exports(){return Le},set exports(s){Le=s}};(function(s,e){(function(t,o){s.exports=o()})(window,function(){return function(t){var o={};function i(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return __name(i,"i"),i.m=t,i.c=o,i.d=function(n,r,a){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:a})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var l in n)i.d(a,l,(function(c){return n[c]}).bind(null,l));return a},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="/",i(i.s=0)}([function(t,o,i){i(1),t.exports=function(){var n=i(6),r="cdx-notify--bounce-in",a=null;return{show:function(l){if(l.message){(function(){if(a)return!0;a=n.getWrapper(),document.body.appendChild(a)})();var c=null,u=l.time||8e3;switch(l.type){case"confirm":c=n.confirm(l);break;case"prompt":c=n.prompt(l);break;default:c=n.alert(l),window.setTimeout(function(){c.remove()},u)}a.appendChild(c),c.classList.add(r)}}}}()},function(t,o,i){var n=i(2);typeof n=="string"&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(4)(n,r),n.locals&&(t.exports=n.locals)},function(t,o,i){(t.exports=i(3)(!1)).push([t.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(t,o){t.exports=function(i){var n=[];return n.toString=function(){return this.map(function(r){var a=function(l,c){var u=l[1]||"",h=l[3];if(!h)return u;if(c&&typeof btoa=="function"){var f=(p=h,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(p))))+" */"),k=h.sources.map(function(v){return"/*# sourceURL="+h.sourceRoot+v+" */"});return[u].concat(k).concat([f]).join(`
`)}var p;return[u].join(`
`)}(r,i);return r[2]?"@media "+r[2]+"{"+a+"}":a}).join("")},n.i=function(r,a){typeof r=="string"&&(r=[[null,r,""]]);for(var l={},c=0;c<this.length;c++){var u=this[c][0];typeof u=="number"&&(l[u]=!0)}for(c=0;c<r.length;c++){var h=r[c];typeof h[0]=="number"&&l[h[0]]||(a&&!h[2]?h[2]=a:a&&(h[2]="("+h[2]+") and ("+a+")"),n.push(h))}},n}},function(t,o,i){var n,r,a={},l=(n=__name(function(){return window&&document&&document.all&&!window.atob},"n"),function(){return r===void 0&&(r=n.apply(this,arguments)),r}),c=function(b){var g={};return function(E){if(typeof E=="function")return E();if(g[E]===void 0){var T=(function(O){return document.querySelector(O)}).call(this,E);if(window.HTMLIFrameElement&&T instanceof window.HTMLIFrameElement)try{T=T.contentDocument.head}catch{T=null}g[E]=T}return g[E]}}(),u=null,h=0,f=[],k=i(5);function p(b,g){for(var E=0;E<b.length;E++){var T=b[E],O=a[T.id];if(O){O.refs++;for(var S=0;S<O.parts.length;S++)O.parts[S](T.parts[S]);for(;S<T.parts.length;S++)O.parts.push(x(T.parts[S],g))}else{var H=[];for(S=0;S<T.parts.length;S++)H.push(x(T.parts[S],g));a[T.id]={id:T.id,refs:1,parts:H}}}}__name(p,"p");function v(b,g){for(var E=[],T={},O=0;O<b.length;O++){var S=b[O],H=g.base?S[0]+g.base:S[0],M={css:S[1],media:S[2],sourceMap:S[3]};T[H]?T[H].parts.push(M):E.push(T[H]={id:H,parts:[M]})}return E}__name(v,"v");function A(b,g){var E=c(b.insertInto);if(!E)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var T=f[f.length-1];if(b.insertAt==="top")T?T.nextSibling?E.insertBefore(g,T.nextSibling):E.appendChild(g):E.insertBefore(g,E.firstChild),f.push(g);else if(b.insertAt==="bottom")E.appendChild(g);else{if(typeof b.insertAt!="object"||!b.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var O=c(b.insertInto+" "+b.insertAt.before);E.insertBefore(g,O)}}__name(A,"A");function N(b){if(b.parentNode===null)return!1;b.parentNode.removeChild(b);var g=f.indexOf(b);g>=0&&f.splice(g,1)}__name(N,"N");function _(b){var g=document.createElement("style");return b.attrs.type===void 0&&(b.attrs.type="text/css"),y(g,b.attrs),A(b,g),g}__name(_,"_");function y(b,g){Object.keys(g).forEach(function(E){b.setAttribute(E,g[E])})}__name(y,"y");function x(b,g){var E,T,O,S;if(g.transform&&b.css){if(!(S=g.transform(b.css)))return function(){};b.css=S}if(g.singleton){var H=h++;E=u||(u=_(g)),T=R.bind(null,E,H,!1),O=R.bind(null,E,H,!0)}else b.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(E=function(M){var W=document.createElement("link");return M.attrs.type===void 0&&(M.attrs.type="text/css"),M.attrs.rel="stylesheet",y(W,M.attrs),A(M,W),W}(g),T=(function(M,W,de){var Q=de.css,Ee=de.sourceMap,Mt=W.convertToAbsoluteUrls===void 0&&Ee;(W.convertToAbsoluteUrls||Mt)&&(Q=k(Q)),Ee&&(Q+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Ee))))+" */");var Lt=new Blob([Q],{type:"text/css"}),Ve=M.href;M.href=URL.createObjectURL(Lt),Ve&&URL.revokeObjectURL(Ve)}).bind(null,E,g),O=__name(function(){N(E),E.href&&URL.revokeObjectURL(E.href)},"O")):(E=_(g),T=(function(M,W){var de=W.css,Q=W.media;if(Q&&M.setAttribute("media",Q),M.styleSheet)M.styleSheet.cssText=de;else{for(;M.firstChild;)M.removeChild(M.firstChild);M.appendChild(document.createTextNode(de))}}).bind(null,E),O=__name(function(){N(E)},"O"));return T(b),function(M){if(M){if(M.css===b.css&&M.media===b.media&&M.sourceMap===b.sourceMap)return;T(b=M)}else O()}}__name(x,"x"),t.exports=function(b,g){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(g=g||{}).attrs=typeof g.attrs=="object"?g.attrs:{},g.singleton||typeof g.singleton=="boolean"||(g.singleton=l()),g.insertInto||(g.insertInto="head"),g.insertAt||(g.insertAt="bottom");var E=v(b,g);return p(E,g),function(T){for(var O=[],S=0;S<E.length;S++){var H=E[S];(M=a[H.id]).refs--,O.push(M)}for(T&&p(v(T,g),g),S=0;S<O.length;S++){var M;if((M=O[S]).refs===0){for(var W=0;W<M.parts.length;W++)M.parts[W]();delete a[M.id]}}}};var w,I=(w=[],function(b,g){return w[b]=g,w.filter(Boolean).join(`
`)});function R(b,g,E,T){var O=E?"":T.css;if(b.styleSheet)b.styleSheet.cssText=I(g,O);else{var S=document.createTextNode(O),H=b.childNodes;H[g]&&b.removeChild(H[g]),H.length?b.insertBefore(S,H[g]):b.appendChild(S)}}__name(R,"R")},function(t,o){t.exports=function(i){var n=typeof window<"u"&&window.location;if(!n)throw new Error("fixUrls requires window.location");if(!i||typeof i!="string")return i;var r=n.protocol+"//"+n.host,a=r+n.pathname.replace(/\/[^\/]*$/,"/");return i.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(l,c){var u,h=c.trim().replace(/^"(.*)"$/,function(f,k){return k}).replace(/^'(.*)'$/,function(f,k){return k});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(h)?l:(u=h.indexOf("//")===0?h:h.indexOf("/")===0?r+h:a+h.replace(/^\.\//,""),"url("+JSON.stringify(u)+")")})}},function(t,o,i){var n,r,a,l,c,u,h,f,k;t.exports=(n="cdx-notifies",r="cdx-notify",a="cdx-notify__cross",l="cdx-notify__button--confirm",c="cdx-notify__button--cancel",u="cdx-notify__input",h="cdx-notify__button",f="cdx-notify__btns-wrapper",{alert:k=__name(function(p){var v=document.createElement("DIV"),A=document.createElement("DIV"),N=p.message,_=p.style;return v.classList.add(r),_&&v.classList.add(r+"--"+_),v.innerHTML=N,A.classList.add(a),A.addEventListener("click",v.remove.bind(v)),v.appendChild(A),v},"k"),confirm:function(p){var v=k(p),A=document.createElement("div"),N=document.createElement("button"),_=document.createElement("button"),y=v.querySelector("."+a),x=p.cancelHandler,w=p.okHandler;return A.classList.add(f),N.innerHTML=p.okText||"Confirm",_.innerHTML=p.cancelText||"Cancel",N.classList.add(h),_.classList.add(h),N.classList.add(l),_.classList.add(c),x&&typeof x=="function"&&(_.addEventListener("click",x),y.addEventListener("click",x)),w&&typeof w=="function"&&N.addEventListener("click",w),N.addEventListener("click",v.remove.bind(v)),_.addEventListener("click",v.remove.bind(v)),A.appendChild(N),A.appendChild(_),v.appendChild(A),v},prompt:function(p){var v=k(p),A=document.createElement("div"),N=document.createElement("button"),_=document.createElement("input"),y=v.querySelector("."+a),x=p.cancelHandler,w=p.okHandler;return A.classList.add(f),N.innerHTML=p.okText||"Ok",N.classList.add(h),N.classList.add(l),_.classList.add(u),p.placeholder&&_.setAttribute("placeholder",p.placeholder),p.default&&(_.value=p.default),p.inputType&&(_.type=p.inputType),x&&typeof x=="function"&&y.addEventListener("click",x),w&&typeof w=="function"&&N.addEventListener("click",function(){w(_.value)}),N.addEventListener("click",v.remove.bind(v)),A.appendChild(_),A.appendChild(N),v.appendChild(A),v},getWrapper:function(){var p=document.createElement("DIV");return p.classList.add(n),p}})}])})})(so);const ro=xe(Le),_ao=class _ao{show(e){ro.show(e)}};__name(_ao,"ao");let ao=_ao;const _lo=class _lo extends C{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.notifier=new ao}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}};__name(_lo,"lo");let lo=_lo;const _co=class _co extends C{get methods(){const e=__name(()=>this.isEnabled,"e");return{toggle:t=>this.toggle(t),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}};__name(_co,"co");let co=_co;var Oe={},ho={get exports(){return Oe},set exports(s){Oe=s}};(function(s,e){(function(t,o){s.exports=o()})(Ot,function(){function t(h){var f=h.tags,k=Object.keys(f),p=k.map(function(v){return typeof f[v]}).every(function(v){return v==="object"||v==="boolean"||v==="function"});if(!p)throw new Error("The configuration was invalid");this.config=h}__name(t,"t");var o=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function i(h){return o.indexOf(h.nodeName)!==-1}__name(i,"i");var n=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function r(h){return n.indexOf(h.nodeName)!==-1}__name(r,"r"),t.prototype.clean=function(h){const f=document.implementation.createHTMLDocument(),k=f.createElement("div");return k.innerHTML=h,this._sanitize(f,k),k.innerHTML},t.prototype._sanitize=function(h,f){var k=a(h,f),p=k.firstChild();if(p)do{if(p.nodeType===Node.TEXT_NODE)if(p.data.trim()===""&&(p.previousElementSibling&&i(p.previousElementSibling)||p.nextElementSibling&&i(p.nextElementSibling))){f.removeChild(p),this._sanitize(h,f);break}else continue;if(p.nodeType===Node.COMMENT_NODE){f.removeChild(p),this._sanitize(h,f);break}var v=r(p),A;v&&(A=Array.prototype.some.call(p.childNodes,i));var N=!!f.parentNode,_=i(f)&&i(p)&&N,y=p.nodeName.toLowerCase(),x=l(this.config,y,p),w=v&&A;if(w||c(p,x)||!this.config.keepNestedBlockElements&&_){if(!(p.nodeName==="SCRIPT"||p.nodeName==="STYLE"))for(;p.childNodes.length>0;)f.insertBefore(p.childNodes[0],p);f.removeChild(p),this._sanitize(h,f);break}for(var I=0;I<p.attributes.length;I+=1){var R=p.attributes[I];u(R,x,p)&&(p.removeAttribute(R.name),I=I-1)}this._sanitize(h,p)}while(p=k.nextSibling())};function a(h,f){return h.createTreeWalker(f,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}__name(a,"a");function l(h,f,k){return typeof h.tags[f]=="function"?h.tags[f](k):h.tags[f]}__name(l,"l");function c(h,f){return typeof f>"u"?!0:typeof f=="boolean"?!f:!1}__name(c,"c");function u(h,f,k){var p=h.name.toLowerCase();return f===!0?!1:typeof f[p]=="function"?!f[p](h.value,k):typeof f[p]>"u"||f[p]===!1?!0:typeof f[p]=="string"?f[p]!==h.value:!1}return __name(u,"u"),t})})(ho);const uo=Oe;function ut(s,e){return s.map(t=>{const o=D(e)?e(t.tool):e;return V(o)||(t.data=Fe(t.data,o)),t})}__name(ut,"ut");function Z(s,e={}){const t={tags:e};return new uo(t).clean(s)}__name(Z,"Z");function Fe(s,e){return Array.isArray(s)?po(s,e):z(s)?fo(s,e):J(s)?go(s,e):s}__name(Fe,"Fe");function po(s,e){return s.map(t=>Fe(t,e))}__name(po,"po");function fo(s,e){const t={};for(const o in s){if(!Object.prototype.hasOwnProperty.call(s,o))continue;const i=s[o],n=bo(e[o])?e[o]:e;t[o]=Fe(i,n)}return t}__name(fo,"fo");function go(s,e){return z(e)?Z(s,e):e===!1?Z(s,{}):s}__name(go,"go");function bo(s){return z(s)||Rt(s)||D(s)}__name(bo,"bo");const _mo=class _mo extends C{get methods(){return{clean:(e,t)=>this.clean(e,t)}}clean(e,t){return Z(e,t)}};__name(_mo,"mo");let mo=_mo;const _ko=class _ko extends C{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(K(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}};__name(_ko,"ko");let ko=_ko;const _vo=class _vo extends C{get methods(){return{findParentTag:(e,t)=>this.findParentTag(e,t),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,t){return new m().findParentTag(e,t)}expandToTag(e){new m().expandToTag(e)}};__name(_vo,"vo");let vo=_vo;const _xo=class _xo extends C{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}};__name(_xo,"xo");let xo=_xo;const _wo=class _wo extends C{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){K("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){K("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}};__name(_wo,"wo");let wo=_wo;var Ae={},yo={get exports(){return Ae},set exports(s){Ae=s}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(s,e){(function(t,o){s.exports=o()})(window,function(){return function(t){var o={};function i(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return __name(i,"i"),i.m=t,i.c=o,i.d=function(n,r,a){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:a})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var l in n)i.d(a,l,(function(c){return n[c]}).bind(null,l));return a},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=0)}([function(t,o,i){t.exports=i(1)},function(t,o,i){i.r(o),i.d(o,"default",function(){return n});const _n=class _n{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(a,l,c){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const u=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},c);if(u.hidingDelay&&(this.hidingDelay=u.hidingDelay),this.nodes.content.innerHTML="",typeof l=="string")this.nodes.content.appendChild(document.createTextNode(l));else{if(!(l instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof l+" given.");this.nodes.content.appendChild(l)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),u.placement){case"top":this.placeTop(a,u);break;case"left":this.placeLeft(a,u);break;case"right":this.placeRight(a,u);break;case"bottom":default:this.placeBottom(a,u)}u&&u.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},u.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(a=!1){if(this.hidingDelay&&!a)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(a,l,c){a.addEventListener("mouseenter",()=>{this.show(a,l,c)}),a.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const a="codex-tooltips-style";if(document.getElementById(a))return;const l=i(2),c=this.make("style",null,{textContent:l.toString(),id:a});this.prepend(document.head,c)}placeBottom(a,l){const c=a.getBoundingClientRect(),u=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,h=c.bottom+window.pageYOffset+this.offsetTop+l.marginTop;this.applyPlacement("bottom",u,h)}placeTop(a,l){const c=a.getBoundingClientRect(),u=c.left+a.clientWidth/2-this.nodes.wrapper.offsetWidth/2,h=c.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",u,h)}placeLeft(a,l){const c=a.getBoundingClientRect(),u=c.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-l.marginLeft,h=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",u,h)}placeRight(a,l){const c=a.getBoundingClientRect(),u=c.right+this.offsetRight+l.marginRight,h=c.top+window.pageYOffset+a.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",u,h)}applyPlacement(a,l,c){this.nodes.wrapper.classList.add(this.CSS.placement[a]),this.nodes.wrapper.style.left=l+"px",this.nodes.wrapper.style.top=c+"px"}make(a,l=null,c={}){const u=document.createElement(a);Array.isArray(l)?u.classList.add(...l):l&&u.classList.add(l);for(const h in c)c.hasOwnProperty(h)&&(u[h]=c[h]);return u}append(a,l){Array.isArray(l)?l.forEach(c=>a.appendChild(c)):a.appendChild(l)}prepend(a,l){Array.isArray(l)?(l=l.reverse()).forEach(c=>a.prepend(c)):a.prepend(l)}};__name(_n,"n");let n=_n},function(t,o){t.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(yo);const Eo=xe(Ae),_He=class _He{constructor(){this.lib=new Eo}destroy(){this.lib.destroy()}show(e,t,o){this.lib.show(e,t,o)}hide(e=!1){this.lib.hide(e)}onHover(e,t,o){this.lib.onHover(e,t,o)}};__name(_He,"He");let He=_He;const _Bo=class _Bo extends C{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.tooltip=new He}destroy(){this.tooltip.destroy()}get methods(){return{show:(e,t,o)=>this.show(e,t,o),hide:()=>this.hide(),onHover:(e,t,o)=>this.onHover(e,t,o)}}show(e,t,o){this.tooltip.show(e,t,o)}hide(){this.tooltip.hide()}onHover(e,t,o){this.tooltip.onHover(e,t,o)}};__name(_Bo,"Bo");let Bo=_Bo;const _To=class _To extends C{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}};__name(_To,"To");let To=_To;function pt(s,e){const t={};return Object.entries(s).forEach(([o,i])=>{if(z(i)){const n=e?`${e}.${o}`:o;Object.values(i).every(a=>J(a))?t[o]=n:t[o]=pt(i,n);return}t[o]=i}),t}__name(pt,"pt");const X=pt(at);function Co(s,e){const t={};return Object.keys(s).forEach(o=>{const i=e[o];i!==void 0?t[i]=s[o]:t[o]=s[o]}),t}__name(Co,"Co");const So='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',ft='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',Io='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',Mo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Lo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',Oo='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',Qe='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',Ao='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',_o='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',No='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Ro='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',Do='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>',_P=class _P{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(_P.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(_P.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(_P.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(_P.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(_P.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(_P.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){const t=d.make("div",_P.CSS.container);return e.name&&(t.dataset.itemName=e.name),this.nodes.icon=d.make("div",_P.CSS.icon,{innerHTML:e.icon||Lo}),t.appendChild(this.nodes.icon),t.appendChild(d.make("div",_P.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&t.appendChild(d.make("div",_P.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&t.classList.add(_P.CSS.active),e.isDisabled&&t.classList.add(_P.CSS.disabled),t}enableConfirmationMode(e){const t={...this.params,...e,confirmation:e.confirmation},o=this.make(t);this.nodes.root.innerHTML=o.innerHTML,this.nodes.root.classList.add(_P.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(_P.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(_P.CSS.noHover),this.nodes.root.classList.add(_P.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(e.confirmation===void 0)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(_P.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(_P.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}};__name(_P,"P");let P=_P;var _a2;const he=(_a2=class{constructor(s,e){this.cursor=-1,this.items=[],this.items=s||[],this.focusedCssClass=e}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(s){s<this.items.length&&s>=-1&&(this.dropCursor(),this.cursor=s,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(s){this.items=s}next(){this.cursor=this.leafNodesAndReturnIndex(he.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(he.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(s){if(this.items.length===0)return this.cursor;let e=this.cursor;return e===-1?e=s===he.directions.RIGHT?-1:0:this.items[e].classList.remove(this.focusedCssClass),s===he.directions.RIGHT?e=(e+1)%this.items.length:e=(this.items.length+e-1)%this.items.length,d.canSetCaret(this.items[e])&&re(()=>m.setCursor(this.items[e]),50)(),this.items[e].classList.add(this.focusedCssClass),e}},__name(_a2,"he"),_a2);let ne=he;ne.directions={RIGHT:"right",LEFT:"left"};const _G=class _G{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=t=>{if(this.isEventReadyForHandling(t))switch(_G.usedKeys.includes(t.keyCode)&&t.preventDefault(),t.keyCode){case B.TAB:this.handleTabPress(t);break;case B.LEFT:case B.UP:this.flipLeft();break;case B.RIGHT:case B.DOWN:this.flipRight();break;case B.ENTER:this.handleEnterPress(t);break}},this.iterator=new ne(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||_G.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[B.TAB,B.LEFT,B.RIGHT,B.ENTER,B.UP,B.DOWN]}activate(e,t){this.activated=!0,e&&this.iterator.setItems(e),t!==void 0&&this.iterator.setCursor(t),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(t=>t!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?ne.directions.LEFT:ne.directions.RIGHT){case ne.directions.RIGHT:this.flipRight();break;case ne.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),D(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}};__name(_G,"G");let G=_G;const _pe=class _pe{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:e,onSearch:t,placeholder:o}){this.listeners=new De,this.items=e,this.onSearch=t,this.render(o)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=d.make("div",_pe.CSS.wrapper);const t=d.make("div",_pe.CSS.icon,{innerHTML:No});this.input=d.make("input",_pe.CSS.input,{placeholder:e}),this.wrapper.appendChild(t),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var i;const t=((i=e.title)==null?void 0:i.toLowerCase())||"",o=this.searchQuery.toLowerCase();return t.includes(o)}};__name(_pe,"pe");let pe=_pe;var _a3;const ue=(_a3=class{lock(){Ge?this.lockHard():document.body.classList.add(ue.CSS.scrollLocked)}unlock(){Ge?this.unlockHard():document.body.classList.remove(ue.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(ue.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(ue.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}},__name(_a3,"ue"),_a3);let gt=ue;gt.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var Po=Object.defineProperty,Fo=Object.getOwnPropertyDescriptor,Ho=__name((s,e,t,o)=>{for(var i=o>1?void 0:o?Fo(e,t):e,n=s.length-1,r;n>=0;n--)(r=s[n])&&(i=(o?r(e,t,i):r(i))||i);return o&&i&&Po(e,t,i),i},"Ho"),ge=(s=>(s.Close="close",s))(ge||{}),_a4;const j=(_a4=class extends we{constructor(s){super(),this.scopeElement=document.body,this.listeners=new De,this.scrollLocker=new gt,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(t=>t.isFocused).onFocus()},this.items=s.items.map(e=>new P(e)),s.scopeElement!==void 0&&(this.scopeElement=s.scopeElement),s.messages&&(this.messages={...this.messages,...s.messages}),s.customContentFlippableItems&&(this.customContentFlippableItems=s.customContentFlippableItems),this.make(),s.customContent&&this.addCustomContent(s.customContent),s.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(j.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(j.CSS.overlayHidden),this.nodes.popover.classList.add(j.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&setTimeout(()=>{this.search.focus()},100),te()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(j.CSS.popoverOpened),this.nodes.popover.classList.remove(j.CSS.popoverOpenTop),this.nodes.overlay.classList.add(j.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(s=>s.reset()),this.search!==void 0&&this.search.clear(),te()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),te()&&this.scrollLocker.unlock()}make(){this.nodes.popover=d.make("div",[j.CSS.popover]),this.nodes.nothingFoundMessage=d.make("div",[j.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=d.make("div",[j.CSS.items]),this.items.forEach(s=>{this.nodes.items.appendChild(s.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",s=>{const e=this.getTargetItem(s);e!==void 0&&this.handleItemClick(e)}),this.nodes.wrapper=d.make("div"),this.nodes.overlay=d.make("div",[j.CSS.overlay,j.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new pe({items:this.items,placeholder:this.messages.search,onSearch:(e,t)=>{this.items.forEach(i=>{const n=!t.includes(i);i.toggleHidden(n)}),this.toggleNothingFoundMessage(t.length===0),this.toggleCustomContent(e!=="");const o=e===""?this.flippableElements:t.map(i=>i.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(o))}});const s=this.search.getElement();s.classList.add(j.CSS.search),this.nodes.popover.insertBefore(s,this.nodes.popover.firstChild)}addCustomContent(s){this.nodes.customContent=s,this.nodes.customContent.classList.add(j.CSS.customContent),this.nodes.popover.insertBefore(s,this.nodes.popover.firstChild)}getTargetItem(s){return this.items.find(e=>s.composedPath().includes(e.getElement()))}handleItemClick(s){s.isDisabled||(this.items.filter(e=>e!==s).forEach(e=>e.reset()),s.handleClick(),this.toggleItemActivenessIfNeeded(s),s.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new G({items:this.flippableElements,focusedItemClass:P.CSS.focused,allowedKeys:[B.TAB,B.UP,B.DOWN,B.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const s=this.items.map(t=>t.getElement());return(this.customContentFlippableItems||[]).concat(s)}get height(){let s=0;if(this.nodes.popover===null)return s;const e=this.nodes.popover.cloneNode(!0);return e.style.visibility="hidden",e.style.position="absolute",e.style.top="-1000px",e.classList.add(j.CSS.popoverOpened),document.body.appendChild(e),s=e.offsetHeight,e.remove(),s}get shouldOpenBottom(){const s=this.nodes.popover.getBoundingClientRect(),e=this.scopeElement.getBoundingClientRect(),t=this.height,o=s.top+t,i=s.top-t,n=Math.min(window.innerHeight,e.bottom);return i<e.top||o<=n}toggleNothingFoundMessage(s){this.nodes.nothingFoundMessage.classList.toggle(j.CSS.nothingFoundMessageDisplayed,s)}toggleCustomContent(s){var e;(e=this.nodes.customContent)==null||e.classList.toggle(j.CSS.customContentHidden,s)}toggleItemActivenessIfNeeded(s){if(s.toggle===!0&&s.toggleActive(),typeof s.toggle=="string"){const e=this.items.filter(t=>t.toggle===s.toggle);if(e.length===1){s.toggleActive();return}e.forEach(t=>{t.toggleActive(t===s)})}}},__name(_a4,"j"),_a4);let je=j;Ho([ce],je.prototype,"height",1);const _jo=class _jo extends C{constructor(){super(...arguments),this.opened=!1,this.selection=new m,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return(e=this.popover)==null?void 0:e.flipper}make(){this.nodes.wrapper=d.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(e=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),e.selected=!0,this.Editor.BlockSelection.clearCache();const[t,o]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new je({searchable:!0,items:t.map(i=>this.resolveTuneAliases(i)),customContent:o,customContentFlippableItems:this.getControls(o),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:$.ui(X.ui.popover,"Nothing found"),search:$.ui(X.ui.popover,"Filter")}}),this.popover.on(ge.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened=!1,m.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&(this.Editor.BlockManager.currentBlock.selected=!1),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(ge.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null)}getControls(e){const{StylesAPI:t}=this.Editor,o=e.querySelectorAll(`.${t.classes.settingsButton}, ${d.allInputsSelector}`);return Array.from(o)}resolveTuneAliases(e){const t=Co(e,{label:"title"});return e.confirmation&&(t.confirmation=this.resolveTuneAliases(e.confirmation)),t}};__name(_jo,"jo");let jo=_jo;const _Y=class _Y extends C{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=d.make("div",[_Y.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=d.make("div",_Y.CSS.conversionToolbarTools);const e=d.make("div",_Y.CSS.conversionToolbarLabel,{textContent:$.ui(X.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),d.append(this.nodes.wrapper,e),d.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),D(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(_Y.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(e=>e.button).filter(e=>!e.classList.contains(_Y.CSS.conversionToolHidden))),this.flipper.focusFirst(),D(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(_Y.CSS.conversionToolbarShowed),D(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(e,t){const{BlockManager:o,BlockSelection:i,InlineToolbar:n,Caret:r}=this.Editor;o.convert(this.Editor.BlockManager.currentBlock,e,t),i.clearSelection(),this.close(),n.close(),window.requestAnimationFrame(()=>{r.setToBlock(this.Editor.BlockManager.currentBlock,r.positions.END)})}addTools(){const e=this.Editor.Tools.blockTools;Array.from(e.entries()).forEach(([t,o])=>{var n;const i=o.conversionConfig;!i||!i.import||(n=o.toolbox)==null||n.forEach(r=>this.addToolIfValid(t,r))})}addToolIfValid(e,t){V(t)||!t.icon||this.addTool(e,t)}addTool(e,t){var r;const o=d.make("div",[_Y.CSS.conversionTool]),i=d.make("div",[_Y.CSS.conversionToolIcon]);o.dataset.tool=e,i.innerHTML=t.icon,d.append(o,i),d.append(o,d.text($.t(X.toolNames,t.title||ae(e))));const n=(r=this.Editor.Tools.blockTools.get(e))==null?void 0:r.shortcut;if(n){const a=d.make("span",_Y.CSS.conversionToolSecondaryLabel,{innerText:Re(n)});d.append(o,a)}d.append(this.nodes.tools,o),this.tools.push({name:e,button:o,toolboxItem:t}),this.listeners.on(o,"click",async()=>{await this.replaceWithBlock(e,t.data)})}async filterTools(){const{currentBlock:e}=this.Editor.BlockManager,t=await e.getActiveToolboxEntry();function o(i,n){return i.icon===n.icon&&i.title===n.title}__name(o,"o"),this.tools.forEach(i=>{let n=!1;if(t){const r=o(t,i.toolboxItem);n=i.button.dataset.tool===e.name&&r}i.button.hidden=n,i.button.classList.toggle(_Y.CSS.conversionToolHidden,n)})}enableFlipper(){this.flipper=new G({focusedItemClass:_Y.CSS.conversionToolFocused})}};__name(_Y,"Y");let Y=_Y;var _e={},zo={get exports(){return _e},set exports(s){_e=s}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(s,e){(function(t,o){s.exports=o()})(window,function(){return function(t){var o={};function i(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return __name(i,"i"),i.m=t,i.c=o,i.d=function(n,r,a){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:a})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var l in n)i.d(a,l,(function(c){return n[c]}).bind(null,l));return a},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=0)}([function(t,o,i){function n(l,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}__name(n,"n");function r(l,c,u){return c&&n(l.prototype,c),u&&n(l,u),l}__name(r,"r"),i.r(o);var a=function(){function l(c){var u=this;(function(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")})(this,l),this.commands={},this.keys={},this.name=c.name,this.parseShortcutName(c.name),this.element=c.on,this.callback=c.callback,this.executeShortcut=function(h){u.execute(h)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return __name(l,"l"),r(l,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),r(l,[{key:"parseShortcutName",value:function(c){c=c.split("+");for(var u=0;u<c.length;u++){c[u]=c[u].toUpperCase();var h=!1;for(var f in l.supportedCommands)if(l.supportedCommands[f].includes(c[u])){h=this.commands[f]=!0;break}h||(this.keys[c[u]]=!0)}for(var k in l.supportedCommands)this.commands[k]||(this.commands[k]=!1)}},{key:"execute",value:function(c){var u,h={CMD:c.ctrlKey||c.metaKey,SHIFT:c.shiftKey,ALT:c.altKey},f=!0;for(u in this.commands)this.commands[u]!==h[u]&&(f=!1);var k,p=!0;for(k in this.keys)p=p&&c.keyCode===l.keyCodes[k];f&&p&&this.callback(c)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),l}();o.default=a}]).default})})(zo);const Uo=xe(_e),_$o=class _$o{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const o=new Uo({name:e.name,on:e.on,callback:e.handler}),i=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...i,o])}remove(e,t){const o=this.findShortcut(e,t);if(!o)return;o.remove();const i=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,i.filter(n=>n!==o))}findShortcut(e,t){return(this.registeredShortcuts.get(e)||[]).find(({name:i})=>i===t)}};__name(_$o,"$o");let $o=_$o;const le=new $o;var Wo=Object.defineProperty,Yo=Object.getOwnPropertyDescriptor,bt=__name((s,e,t,o)=>{for(var i=o>1?void 0:o?Yo(e,t):e,n=s.length-1,r;n>=0;n--)(r=s[n])&&(i=(o?r(e,t,i):r(i))||i);return o&&i&&Wo(e,t,i),i},"bt"),me=(s=>(s.Opened="toolbox-opened",s.Closed="toolbox-closed",s.BlockAdded="toolbox-block-added",s))(me||{}),_a5;const mt=(_a5=class extends we{constructor({api:s,tools:e,i18nLabels:t}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=s,this.tools=e,this.i18nLabels=t}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new je({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(ge.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(mt.CSS.toolbox),this.nodes.toolbox}hasFocus(){var s;return(s=this.popover)==null?void 0:s.hasFocus()}destroy(){var s;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(s=this.popover)==null||s.off(ge.Close,this.onPopoverClose)}toolButtonActivated(s,e){this.insertNewBlock(s,e)}open(){var s;this.isEmpty||((s=this.popover)==null||s.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var s;(s=this.popover)==null||s.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const s=[];return this.tools.forEach(e=>{e.toolbox&&s.push(e)}),s}get toolboxItemsToBeDisplayed(){const s=__name((e,t)=>({icon:e.icon,title:$.t(X.toolNames,e.title||ae(t.name)),name:t.name,onActivate:()=>{this.toolButtonActivated(t.name,e.data)},secondaryLabel:t.shortcut?Re(t.shortcut):""}),"s");return this.toolsToBeDisplayed.reduce((e,t)=>(Array.isArray(t.toolbox)?t.toolbox.forEach(o=>{e.push(s(o,t))}):t.toolbox!==void 0&&e.push(s(t.toolbox,t)),e),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(s=>{const e=s.shortcut;e&&this.enableShortcutForTool(s.name,e)})}enableShortcutForTool(s,e){le.add({name:e,on:this.api.ui.nodes.redactor,handler:t=>{t.preventDefault();const o=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(o);if(i)try{this.api.blocks.convert(i.id,s),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(o,"end")});return}catch{}this.insertNewBlock(s)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(s=>{const e=s.shortcut;e&&le.remove(this.api.ui.nodes.redactor,e)})}async insertNewBlock(s,e){const t=this.api.blocks.getCurrentBlockIndex(),o=this.api.blocks.getBlockByIndex(t);if(!o)return;const i=o.isEmpty?t:t+1;let n;if(e){const a=await this.api.blocks.composeBlockData(s);n=Object.assign(a,e)}const r=this.api.blocks.insert(s,n,void 0,i,void 0,o.isEmpty);r.call(q.APPEND_CALLBACK),this.api.caret.setToBlock(i),this.emit("toolbox-block-added",{block:r}),this.api.toolbar.close()}},__name(_a5,"mt"),_a5);let ze=mt;bt([ce],ze.prototype,"toolsToBeDisplayed",1);bt([ce],ze.prototype,"toolboxItemsToBeDisplayed",1);const kt="block hovered",_Ko=class _Ko extends C{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.toolboxInstance=null,this.tooltip=new He}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var t;(t=this.toolboxInstance)==null||t.close()},open:()=>{if(this.toolboxInstance===null){L("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){L("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var t;return(t=this.toolboxInstance)==null?void 0:t.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){L("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const t=e.holder,{isMobile:o}=this.Editor.UI,i=e.pluginsContent,n=window.getComputedStyle(i),r=parseInt(n.paddingTop,10),a=t.offsetHeight;let l;o?l=t.offsetTop+a:l=t.offsetTop+r,this.nodes.wrapper.style.top=`${Math.floor(l)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e;this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(e=this.toolboxInstance)==null||e.close(),this.Editor.BlockSettings.close())}open(e=!0){re(()=>{this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()},50)()}make(){this.nodes.wrapper=d.make("div",this.CSS.toolbar),["content","actions"].forEach(t=>{this.nodes[t]=d.make("div",this.CSS[t])}),d.append(this.nodes.wrapper,this.nodes.content),d.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=d.make("div",this.CSS.plusButton,{innerHTML:_o}),d.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{this.tooltip.hide(!0),this.plusButtonClicked()},!1);const e=d.make("div");e.appendChild(document.createTextNode($.ui(X.ui.toolbar.toolbox,"Add"))),e.appendChild(d.make("div",this.CSS.plusButtonShortcut,{textContent:"⇥ Tab"})),this.tooltip.onHover(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=d.make("span",this.CSS.settingsToggler,{innerHTML:Ao}),d.append(this.nodes.actions,this.nodes.settingsToggler),this.tooltip.onHover(this.nodes.settingsToggler,$.ui(X.ui.blockTunes.toggler,"Click to tune"),{hidingDelay:400}),d.append(this.nodes.actions,this.makeToolbox()),d.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),d.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new ze({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:$.ui(X.ui.popover,"Filter"),nothingFound:$.ui(X.ui.popover,"Nothing found")}}),this.toolboxInstance.on(me.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(me.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(me.BlockAdded,({block:e})=>{const{BlockManager:t,Caret:o}=this.Editor,i=t.getBlockById(e.id);i.inputs.length===0&&(i===t.lastBlock?(t.insertAtEnd(),o.setToBlock(t.lastBlock)):o.setToBlock(t.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var t;e.stopPropagation(),this.settingsTogglerClicked(),(t=this.toolboxInstance)!=null&&t.opened&&this.toolboxInstance.close(),this.tooltip.hide(!0)},!0),te()||this.eventsDispatcher.on(kt,e=>{var t;this.Editor.BlockSettings.opened||(t=this.toolboxInstance)!=null&&t.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy(),this.tooltip.destroy()}};__name(_Ko,"Ko");let Ko=_Ko;var ye=(s=>(s[s.Block=0]="Block",s[s.Inline=1]="Inline",s[s.Tune=2]="Tune",s))(ye||{}),ke=(s=>(s.Shortcut="shortcut",s.Toolbox="toolbox",s.EnabledInlineTools="inlineToolbar",s.EnabledBlockTunes="tunes",s.Config="config",s))(ke||{}),vt=(s=>(s.Shortcut="shortcut",s.SanitizeConfig="sanitize",s))(vt||{}),se=(s=>(s.IsEnabledLineBreaks="enableLineBreaks",s.Toolbox="toolbox",s.ConversionConfig="conversionConfig",s.IsReadOnlySupported="isReadOnlySupported",s.PasteConfig="pasteConfig",s))(se||{}),Ue=(s=>(s.IsInline="isInline",s.Title="title",s))(Ue||{}),xt=(s=>(s.IsTune="isTune",s))(xt||{});const _$e=class _$e{constructor({name:e,constructable:t,config:o,api:i,isDefault:n,isInternal:r=!1,defaultPlaceholder:a}){this.api=i,this.name=e,this.constructable=t,this.config=o,this.isDefault=n,this.isInternal=r,this.defaultPlaceholder=a}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(D(this.constructable.reset))return this.constructable.reset()}prepare(){if(D(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}};__name(_$e,"$e");let $e=_$e;const _Xo=class _Xo extends C{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=te()?20:6,this.buttonsList=null,this.width=0,this.flipper=null,this.tooltip=new He}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}tryToShow(e=!1,t=!0){if(!this.allowedToShow()){e&&this.close();return}this.move(),this.open(t),this.Editor.Toolbar.close()}move(){const e=m.rect,t=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),o={x:e.x-t.left,y:e.y+e.height-t.top+this.toolbarVerticalMargin};e.width&&(o.x+=Math.floor(e.width/2));const i=o.x-this.width/2,n=o.x+this.width/2;this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented,i<this.Editor.UI.contentRect.left),this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented,n>this.Editor.UI.contentRect.right),this.nodes.wrapper.style.left=Math.floor(o.x)+"px",this.nodes.wrapper.style.top=Math.floor(o.y)+"px"}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([e,t])=>{const o=this.getToolShortcut(e);o&&le.remove(this.Editor.UI.nodes.redactor,o),D(t.clear)&&t.clear()}),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}open(e=!0){if(this.opened)return;this.addToolsFiltered(),this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0,e&&this.Editor.ConversionToolbar.hasTools()?this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0;let t=Array.from(this.buttonsList);t.unshift(this.nodes.conversionToggler),t=t.filter(o=>!o.hidden),this.flipper.activate(t)}containsNode(e){return this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes(),this.tooltip.destroy()}make(){this.nodes.wrapper=d.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=d.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=d.make("div",this.CSS.buttonsWrapper),this.nodes.actions=d.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",e=>{e.target.closest(`.${this.CSS.actionsWrapper}`)||e.preventDefault()}),d.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),d.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),d.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}allowedToShow(){const e=["IMG","INPUT"],t=m.get(),o=m.text;if(!t||!t.anchorNode||t.isCollapsed||o.length<1)return!1;const i=d.isElement(t.anchorNode)?t.anchorNode:t.anchorNode.parentElement;if(t&&e.includes(i.tagName)||i.closest('[contenteditable="true"]')===null)return!1;const r=this.Editor.BlockManager.getBlock(t.anchorNode);return r?r.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=d.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=d.make("div",this.CSS.conversionTogglerContent);const e=d.make("div",this.CSS.conversionTogglerArrow,{innerHTML:ft});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(t=>{!t&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),te()===!1&&this.tooltip.onHover(this.nodes.conversionToggler,$.ui(X.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:e}=this.Editor,{currentBlock:t}=e,o=t.name,i=t.tool.conversionConfig,n=i&&i.export;this.nodes.conversionToggler.hidden=!n,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!n);const r=await t.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=r.icon||r.title||ae(o)}prepareConversionToolbar(){const e=this.Editor.ConversionToolbar.make();d.append(this.nodes.wrapper,e)}addToolsFiltered(){const e=m.get(),t=this.Editor.BlockManager.getBlock(e.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(t.tool.inlineTools.values()).forEach(o=>{this.addTool(o)}),this.recalculateWidth()}addTool(e){const t=e.create(),o=t.render();if(!o){L("Render method must return an instance of Node","warn",e.name);return}if(o.dataset.tool=e.name,this.nodes.buttons.appendChild(o),this.toolsInstances.set(e.name,t),D(t.renderActions)){const a=t.renderActions();this.nodes.actions.appendChild(a)}this.listeners.on(o,"click",a=>{this.toolClicked(t),a.preventDefault()});const i=this.getToolShortcut(e.name);if(i)try{this.enableShortcuts(t,i)}catch{}const n=d.make("div"),r=$.t(X.toolNames,e.title||ae(e.name));n.appendChild(d.text(r)),i&&n.appendChild(d.make("div",this.CSS.inlineToolbarShortcut,{textContent:Re(i)})),te()===!1&&this.tooltip.onHover(o,n,{placement:"top",hidingDelay:100}),t.checkState(m.get())}getToolShortcut(e){const{Tools:t}=this.Editor,o=t.inlineTools.get(e),i=t.internal.inlineTools;return Array.from(i.keys()).includes(e)?this.inlineTools[e][vt.Shortcut]:o.shortcut}enableShortcuts(e,t){le.add({name:t,handler:o=>{const{currentBlock:i}=this.Editor.BlockManager;i&&i.tool.enabledInlineTools&&(o.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){const t=m.range;e.surround(t),this.checkToolsState(),e.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(e=>{e.checkState(m.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([t,o])=>{e[t]=o.create()}),e}enableFlipper(){this.flipper=new G({focusedItemClass:this.CSS.focusedButton,allowedKeys:[B.ENTER,B.TAB]})}};__name(_Xo,"Xo");let Xo=_Xo;const _Vo=class _Vo extends C{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case B.BACKSPACE:this.backspace(e);break;case B.DELETE:this.delete(e);break;case B.ENTER:this.enter(e);break;case B.DOWN:case B.RIGHT:this.arrowRightAndDown(e);break;case B.UP:case B.LEFT:this.arrowLeftAndUp(e);break;case B.TAB:this.tabPressed(e);break}}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&nt(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||(this.Editor.BlockManager.clearFocused(),this.Editor.BlockSelection.clearSelection(e)))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}tabPressed(e){this.Editor.BlockSelection.clearSelection(e);const{BlockManager:t,InlineToolbar:o,ConversionToolbar:i}=this.Editor,n=t.currentBlock;if(!n)return;const r=n.isEmpty,a=n.tool.isDefault&&r,l=!r&&i.opened,c=!r&&!m.isCollapsed&&o.opened;a?this.activateToolbox():!l&&!c&&this.activateBlockSettings()}dragOver(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!0}dragLeave(e){const t=this.Editor.BlockManager.getBlockByChildNode(e.target);t.dropTarget=!1}handleCommandC(e){const{BlockSelection:t}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:t,BlockManager:o,Caret:i}=this.Editor;t.anyBlockSelected&&t.copySelectedBlocks(e).then(()=>{const n=o.removeSelectedBlocks(),r=o.insertDefaultBlockAtIndex(n,!0);i.setToBlock(r,i.positions.START),t.clearSelection(e)})}enter(e){const{BlockManager:t,UI:o}=this.Editor;if(t.currentBlock.tool.isLineBreaksEnabled||o.someToolbarOpened&&o.someFlipperButtonFocused||e.shiftKey)return;let n=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?n=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):n=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(n),this.Editor.Toolbar.moveAndOpen(n),e.preventDefault()}backspace(e){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:i,previousBlock:n}=t;if(!(!m.isCollapsed||!o.isAtStart)){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.firstInput){o.navigatePrevious();return}if(n!==null){if(n.isEmpty){t.removeBlock(n);return}if(i.isEmpty){t.removeBlock(i);const l=t.currentBlock;o.setToBlock(l,o.positions.END);return}Je(i,n)?this.mergeBlocks(n,i):o.setToBlock(n,o.positions.END)}}}delete(e){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:i,nextBlock:n}=t;if(!(!m.isCollapsed||!o.isAtEnd)){if(e.preventDefault(),this.Editor.Toolbar.close(),i.currentInput!==i.lastInput){o.navigateNext();return}if(n!==null){if(n.isEmpty){t.removeBlock(n);return}if(i.isEmpty){t.removeBlock(i),o.setToBlock(n,o.positions.START);return}Je(i,n)?this.mergeBlocks(i,n):o.setToBlock(n,o.positions.START)}}}mergeBlocks(e,t){const{BlockManager:o,Caret:i,Toolbar:n}=this.Editor;i.createShadow(e.pluginsContent),o.mergeBlocks(e,t).then(()=>{window.requestAnimationFrame(()=>{i.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),n.close()})})}arrowRightAndDown(e){const t=G.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===B.TAB);if(this.Editor.UI.someToolbarOpened&&t)return;this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();const o=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===B.DOWN&&o){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}(e.keyCode===B.DOWN||e.keyCode===B.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious())?e.preventDefault():re(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(G.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===B.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.BlockManager.clearFocused(),this.Editor.Toolbar.close();const t=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===B.UP&&t){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}(e.keyCode===B.UP||e.keyCode===B.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext())?e.preventDefault():re(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const t=e.keyCode===B.ENTER&&this.Editor.Toolbar.toolbox.opened,o=e.keyCode===B.ENTER&&this.Editor.BlockSettings.opened,i=e.keyCode===B.ENTER&&this.Editor.InlineToolbar.opened,n=e.keyCode===B.ENTER&&this.Editor.ConversionToolbar.opened,r=e.keyCode===B.TAB;return!(e.shiftKey||r||t||o||i||n)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||(this.Editor.BlockManager.currentBlock.focused=!0,this.Editor.Toolbar.moveAndOpen()),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}};__name(_Vo,"Vo");let Vo=_Vo;const _Te=class _Te{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return st(this.workingArea.children)}static set(e,t,o){return isNaN(Number(t))?(Reflect.set(e,t,o),!0):(e.insert(+t,o),!0)}static get(e,t){return isNaN(Number(t))?Reflect.get(e,t):e.get(+t)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,t){const o=this.blocks[t];d.swap(this.blocks[e].holder,o.holder),this.blocks[t]=this.blocks[e],this.blocks[e]=o}move(e,t){const o=this.blocks.splice(t,1)[0],i=e-1,n=Math.max(0,i),r=this.blocks[n];e>0?this.insertToDOM(o,"afterend",r):this.insertToDOM(o,"beforebegin",r),this.blocks.splice(e,0,o);const a=this.composeBlockEvent("move",{fromIndex:t,toIndex:e});o.call(q.MOVED,a)}insert(e,t,o=!1){if(!this.length){this.push(t);return}e>this.length&&(e=this.length),o&&(this.blocks[e].holder.remove(),this.blocks[e].call(q.REMOVED));const i=o?1:0;if(this.blocks.splice(e,i,t),e>0){const n=this.blocks[e-1];this.insertToDOM(t,"afterend",n)}else{const n=this.blocks[e+1];n?this.insertToDOM(t,"beforebegin",n):this.insertToDOM(t)}}replace(e,t){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(t.holder),this.blocks[e]=t}insertMany(e,t){const o=new DocumentFragment;for(const i of e)o.appendChild(i.holder);if(this.length>0){if(t>0){const i=Math.min(t-1,this.length-1);this.blocks[i].holder.after(o)}else t===0&&this.workingArea.prepend(o);this.blocks.splice(t,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(o);e.forEach(i=>i.call(q.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(q.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(q.REMOVED)),this.blocks.length=0}insertAfter(e,t){const o=this.blocks.indexOf(e);this.insert(o+1,t)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,t,o){t?o.holder.insertAdjacentElement(t,e.holder):this.workingArea.appendChild(e.holder),e.call(q.RENDERED)}composeBlockEvent(e,t){return new CustomEvent(e,{detail:t})}};__name(_Te,"Te");let Te=_Te;const et="block-removed",tt="block-added",qo="block-moved",ot="block-changed",_Zo=class _Zo{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((t,o)=>{this.completed=this.completed.then(e).then(t).catch(o)})}};__name(_Zo,"Zo");let Zo=_Zo;const _Go=class _Go extends C{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(t=>!!t.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(t=>!!t.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new Te(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:Te.set,get:Te.get}),this.listeners.on(document,"copy",t=>this.Editor.BlockEvents.handleCommandC(t))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:t={},id:o=void 0,tunes:i={}}){const n=this.Editor.ReadOnly.isEnabled,r=this.Editor.Tools.blockTools.get(e),a=new F({id:o,data:t,tool:r,api:this.Editor.API,readOnly:n,tunesData:i},this.eventsDispatcher);return n||window.requestIdleCallback(()=>{this.bindBlockEvents(a)},{timeout:2e3}),a}insert({id:e=void 0,tool:t=this.config.defaultBlock,data:o={},index:i,needToFocus:n=!0,replace:r=!1,tunes:a={}}={}){let l=i;l===void 0&&(l=this.currentBlockIndex+(r?0:1));const c=this.composeBlock({id:e,tool:t,data:o,tunes:a});return r&&this.blockDidMutated(et,this.getBlockByIndex(l),{index:l}),this._blocks.insert(l,c,r),this.blockDidMutated(tt,c,{index:l}),n?this.currentBlockIndex=l:l<=this.currentBlockIndex&&this.currentBlockIndex++,c}insertMany(e,t=0){this._blocks.insertMany(e,t)}async update(e,t){const o=await e.data,i=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},o,t),tunes:e.tunes}),n=this.getBlockIndex(e);return this._blocks.replace(n,i),this.blockDidMutated(ot,i,{index:n}),i}replace(e,t,o){const i=this.getBlockIndex(e);this.insert({tool:t,data:o,index:i,replace:!0})}paste(e,t,o=!1){const i=this.insert({tool:e,replace:o});try{i.call(q.ON_PASTE,t)}catch(n){L(`${e}: onPaste callback call is failed`,"error",n)}return i}insertDefaultBlockAtIndex(e,t=!1){const o=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=o,this.blockDidMutated(tt,o,{index:e}),t?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,o}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,t){const o=await t.data;V(o)||await e.mergeWith(o),this.removeBlock(t),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e,t=!0){return new Promise(o=>{const i=this._blocks.indexOf(e);if(!this.validateIndex(i))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(i),this.blockDidMutated(et,e,{index:i}),this.currentBlockIndex>=i&&this.currentBlockIndex--,this.blocks.length?i===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,t&&this.insert()),o()})}removeSelectedBlocks(){let e;for(let t=this.blocks.length-1;t>=0;t--)this.blocks[t].selected&&(this.removeBlock(this.blocks[t]),e=t);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),t=d.make("div");t.appendChild(e);const o={text:d.isEmpty(t)?"":t.innerHTML};return this.insert({data:o})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(t=>t.id===e)}getBlock(e){d.isElement(e)||(e=e.parentNode);const t=this._blocks.nodes,o=e.closest(`.${F.CSS.wrapper}`),i=t.indexOf(o);if(i>=0)return this._blocks[i]}highlightCurrentNode(){this.clearFocused(),this.currentBlock.focused=!0}clearFocused(){this.blocks.forEach(e=>{e.focused=!1})}setCurrentBlockByChildNode(e){d.isElement(e)||(e=e.parentNode);const t=e.closest(`.${F.CSS.wrapper}`);if(!t)return;const o=t.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(o!=null&&o.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(t),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){d.isElement(e)||(e=e.parentNode);const t=e.closest(`.${F.CSS.wrapper}`);return this.blocks.find(o=>o.holder===t)}swap(e,t){this._blocks.swap(e,t),this.currentBlockIndex=t}move(e,t=this.currentBlockIndex){if(isNaN(e)||isNaN(t)){L("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(t)){L("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,t),this.currentBlockIndex=e,this.blockDidMutated(qo,this.currentBlock,{fromIndex:t,toIndex:e})}async convert(e,t,o){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const n=this.Editor.Tools.blockTools.get(t);if(!n)throw new Error(`Could not convert Block. Tool «${t}» not found.`);const r=await e.exportDataAsString(),a=Z(r,n.sanitizeConfig);let l=Jt(a,n.conversionConfig);o&&(l=Object.assign(l,o)),this.replace(e,n.name,l)}dropPointer(){this.currentBlockIndex=-1,this.clearFocused()}async clear(e=!1){const t=new Zo;this.blocks.forEach(o=>{t.add(async()=>{await this.removeBlock(o,!1)})}),await t.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:t}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",o=>{t.keydown(o)}),this.readOnlyMutableListeners.on(e.holder,"keyup",o=>{t.keyup(o)}),this.readOnlyMutableListeners.on(e.holder,"dragover",o=>{t.dragOver(o)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",o=>{t.dragLeave(o)}),e.on("didMutated",o=>this.blockDidMutated(ot,o,{index:this.getBlockIndex(o)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,t,o){const i=new CustomEvent(e,{detail:{target:new ee(t),...o}});return this.eventsDispatcher.emit(ct,{event:i}),t}};__name(_Go,"Go");let Go=_Go;const _Jo=class _Jo extends C{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(t=>t.selected===!0)}set allBlocksSelected(e){const{BlockManager:t}=this.Editor;t.blocks.forEach(o=>{o.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(t=>t.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new m,le.add({name:"CMD+A",handler:e=>{const{BlockManager:t,ReadOnly:o}=this.Editor;if(o.isEnabled){e.preventDefault(),this.selectAllBlocks();return}t.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){m.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:t}=this.Editor;let o;isNaN(e)?o=t.currentBlock:o=t.getBlockByIndex(e),o.selected=!1,this.clearCache()}clearSelection(e,t=!1){const{BlockManager:o,Caret:i,RectangleSelection:n}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const r=e&&e instanceof KeyboardEvent,a=r&&nt(e.keyCode);if(this.anyBlockSelected&&r&&a&&!m.isSelectionExists){const l=o.removeSelectedBlocks();o.insertDefaultBlockAtIndex(l,!0),i.setToBlock(o.currentBlock),re(()=>{const c=e.key;i.insertContentAtCaretPosition(c.length>1?"":c)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||n.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}t&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const t=d.make("div");this.selectedBlocks.forEach(n=>{const r=Z(n.holder.innerHTML,this.sanitizerConfig),a=d.make("p");a.innerHTML=r,t.appendChild(a)});const o=Array.from(t.childNodes).map(n=>n.textContent).join(`

`),i=t.innerHTML;return e.clipboardData.setData("text/plain",o),e.clipboardData.setData("text/html",i),Promise.all(this.selectedBlocks.map(n=>n.save())).then(n=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(n))}catch{}})}selectBlockByIndex(e){const{BlockManager:t}=this.Editor;t.clearFocused();let o;isNaN(e)?o=t.currentBlock:o=t.getBlockByIndex(e),this.selection.save(),m.get().removeAllRanges(),o.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}clearCache(){this.anyBlockSelectedCache=null}destroy(){le.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),d.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const o=this.Editor.BlockManager.getBlock(e.target).inputs;if(o.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(o.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlockByIndex(),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),m.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}};__name(_Jo,"Jo");let Jo=_Jo;const _ve=class _ve extends C{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const e=m.get(),t=d.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput);let o=e.focusNode;if(d.isNativeInput(t))return t.selectionEnd===0;if(!e.anchorNode)return!1;let i=o.textContent.search(/\S/);i===-1&&(i=0);let n=e.focusOffset;return o.nodeType!==Node.TEXT_NODE&&o.childNodes.length&&(o.childNodes[n]?(o=o.childNodes[n],n=0):(o=o.childNodes[n-1],n=o.textContent.length)),(d.isLineBreakTag(t)||d.isEmpty(t))&&this.getHigherLevelSiblings(o,"left").every(l=>{const c=d.isLineBreakTag(l),u=l.children.length===1&&d.isLineBreakTag(l.children[0]),h=c||u;return d.isEmpty(l)&&!h})&&n===i?!0:t===null||o===t&&n<=i}get isAtEnd(){const e=m.get();let t=e.focusNode;const o=d.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput,!0);if(d.isNativeInput(o))return o.selectionEnd===o.value.length;if(!e.focusNode)return!1;let i=e.focusOffset;if(t.nodeType!==Node.TEXT_NODE&&t.childNodes.length&&(t.childNodes[i-1]?(t=t.childNodes[i-1],i=t.textContent.length):(t=t.childNodes[0],i=0)),d.isLineBreakTag(o)||d.isEmpty(o)){const r=this.getHigherLevelSiblings(t,"right");if(r.every((l,c)=>c===r.length-1&&d.isLineBreakTag(l)||d.isEmpty(l)&&!d.isLineBreakTag(l))&&i===t.textContent.length)return!0}const n=o.textContent.replace(/\s+$/,"");return t===o&&i>=n.length}setToBlock(e,t=this.positions.DEFAULT,o=0){const{BlockManager:i}=this.Editor;let n;switch(t){case this.positions.START:n=e.firstInput;break;case this.positions.END:n=e.lastInput;break;default:n=e.currentInput}if(!n)return;const r=d.getDeepestNode(n,t===this.positions.END),a=d.getContentLength(r);switch(!0){case t===this.positions.START:o=0;break;case t===this.positions.END:case o>a:o=a;break}re(()=>{this.set(r,o)},20)(),i.setCurrentBlockByChildNode(e.holder),i.currentBlock.currentInput=n}setToInput(e,t=this.positions.DEFAULT,o=0){const{currentBlock:i}=this.Editor.BlockManager,n=d.getDeepestNode(e);switch(t){case this.positions.START:this.set(n,0);break;case this.positions.END:this.set(n,d.getContentLength(n));break;default:o&&this.set(n,o)}i.currentInput=e}set(e,t=0){const{top:o,bottom:i}=m.setCursor(e,t),{innerHeight:n}=window;o<0&&window.scrollBy(0,o),i>n&&window.scrollBy(0,i-n)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const t=this.Editor.BlockManager.insertAtEnd();this.setToBlock(t)}}extractFragmentFromCaretPosition(){const e=m.get();if(e.rangeCount){const t=e.getRangeAt(0),o=this.Editor.BlockManager.currentBlock.currentInput;if(t.deleteContents(),o)if(d.isNativeInput(o)){const i=o,n=document.createDocumentFragment(),r=i.value.substring(0,i.selectionStart),a=i.value.substring(i.selectionStart);return n.textContent=a,i.value=r,n}else{const i=t.cloneRange();return i.selectNodeContents(o),i.setStart(t.endContainer,t.endOffset),i.extractContents()}}}navigateNext(){const{BlockManager:e}=this.Editor,{currentBlock:t,nextContentfulBlock:o}=e,{nextInput:i}=t,n=this.isAtEnd;let r=o;if(!r&&!i){if(t.tool.isDefault||!n)return!1;r=e.insertAtEnd()}return n?(i?this.setToInput(i,this.positions.START):this.setToBlock(r,this.positions.START),!0):!1}navigatePrevious(){const{currentBlock:e,previousContentfulBlock:t}=this.Editor.BlockManager;if(!e)return!1;const{previousInput:o}=e;return!t&&!o?!1:this.isAtStart?(o?this.setToInput(o,this.positions.END):this.setToBlock(t,this.positions.END),!0):!1}createShadow(e){const t=document.createElement("span");t.classList.add(_ve.CSS.shadowCaret),e.insertAdjacentElement("beforeend",t)}restoreCaret(e){const t=e.querySelector(`.${_ve.CSS.shadowCaret}`);if(!t)return;new m().expandToTag(t);const i=document.createRange();i.selectNode(t),i.extractContents()}insertContentAtCaretPosition(e){const t=document.createDocumentFragment(),o=document.createElement("div"),i=m.get(),n=m.range;o.innerHTML=e,Array.from(o.childNodes).forEach(c=>t.appendChild(c)),t.childNodes.length===0&&t.appendChild(new Text);const r=t.lastChild;n.deleteContents(),n.insertNode(t);const a=document.createRange(),l=r.nodeType===Node.TEXT_NODE?r:r.firstChild;l!==null&&l.textContent!==null&&a.setStart(l,l.textContent.length),i.removeAllRanges(),i.addRange(a)}getHigherLevelSiblings(e,t){let o=e;const i=[];for(;o.parentNode&&o.parentNode.contentEditable!=="true";)o=o.parentNode;const n=t==="left"?"previousSibling":"nextSibling";for(;o[n];)o=o[n],i.push(o);return i}};__name(_ve,"ve");let ve=_ve;const _Qo=class _Qo extends C{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:t,BlockSelection:o}=this.Editor,i=t.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,n=t.getBlockByChildNode(e.target);if(!(!i||!n)&&n!==i){if(i===this.firstSelectedBlock){m.get().removeAllRanges(),i.selected=!0,n.selected=!0,o.clearCache();return}if(n===this.firstSelectedBlock){i.selected=!1,n.selected=!1,o.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(i,n),this.lastSelectedBlock=n}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==_t.LEFT)return;const{BlockManager:t}=this.Editor;this.firstSelectedBlock=t.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:t,BlockSelection:o}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=t.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,o.clearCache(),m.get().removeAllRanges());const i=t.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),n=t.blocks[i];n&&(this.lastSelectedBlock.selected!==n.selected?(n.selected=!0,o.clearCache()):(this.lastSelectedBlock.selected=!1,o.clearCache()),this.lastSelectedBlock=n,this.Editor.InlineToolbar.close(),n.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:t,BlockSelection:o,Caret:i}=this.Editor,n=t.blocks.indexOf(this.firstSelectedBlock),r=t.blocks.indexOf(this.lastSelectedBlock);if(o.anyBlockSelected&&n>-1&&r>-1)if(e&&e instanceof KeyboardEvent)switch(e.keyCode){case B.DOWN:case B.RIGHT:i.setToBlock(t.blocks[Math.max(n,r)],i.positions.END);break;case B.UP:case B.LEFT:i.setToBlock(t.blocks[Math.min(n,r)],i.positions.START);break;default:i.setToBlock(t.blocks[Math.max(n,r)],i.positions.END)}else i.setToBlock(t.blocks[Math.max(n,r)],i.positions.END);this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:t}=this.Editor;m.isCollapsed||this.Editor.BlockSelection.clearSelection(e),t.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,t){const{BlockManager:o,BlockSelection:i}=this.Editor,n=o.blocks.indexOf(e),r=o.blocks.indexOf(t),a=e.selected!==t.selected;for(let l=Math.min(n,r);l<=Math.max(n,r);l++){const c=o.blocks[l];c!==this.firstSelectedBlock&&c!==(a?e:t)&&(o.blocks[l].selected=!o.blocks[l].selected,i.clearCache())}}};__name(_Qo,"Qo");let Qo=_Qo;const _ei=class _ei extends C{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async t=>{await this.processDrop(t)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",t=>{this.processDragOver(t)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:t,Caret:o,Paste:i}=this.Editor;e.preventDefault(),t.blocks.forEach(r=>{r.dropTarget=!1}),m.isAtEditor&&!m.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const n=t.setCurrentBlockByChildNode(e.target);if(n)this.Editor.Caret.setToBlock(n,o.positions.END);else{const r=t.setCurrentBlockByChildNode(t.lastBlock.holder);this.Editor.Caret.setToBlock(r,o.positions.END)}await i.processDataTransfer(e.dataTransfer,!0)}processDragStart(){m.isAtEditor&&!m.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}};__name(_ei,"ei");let ei=_ei;const _ti=class _ti extends C{constructor({config:e,eventsDispatcher:t}){super({config:e,eventsDispatcher:t}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(o=>{this.redactorChanged(o)}),this.eventsDispatcher.on(ct,o=>{this.particularBlockChanged(o.event)}),this.eventsDispatcher.on(dt,()=>{this.disable()}),this.eventsDispatcher.on(ht,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!D(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let t;this.batchingOnChangeQueue.size===1?t=this.batchingOnChangeQueue.values().next().value:t=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,t),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(Me,{mutations:e})}};__name(_ti,"ti");let ti=_ti;var _a6;const wt=(_a6=class extends C{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=s=>{try{const e=s.create({},{},!1);if(s.pasteConfig===!1){this.exceptionList.push(s.name);return}if(!D(e.onPaste))return;this.getTagsConfig(s),this.getFilesConfig(s),this.getPatternsConfig(s)}catch(e){L(`Paste handling for «${s.name}» Tool hasn't been set up because of the error`,"warn",e)}},this.handlePasteEvent=async s=>{const{BlockManager:e,Toolbar:t}=this.Editor,o=e.setCurrentBlockByChildNode(s.target);!o||this.isNativeBehaviour(s.target)&&!s.clipboardData.types.includes("Files")||o&&this.exceptionList.includes(o.name)||(s.preventDefault(),this.processDataTransfer(s.clipboardData),e.clearFocused(),t.close())}}async prepare(){this.processTools()}toggleReadOnly(s){s?this.unsetCallback():this.setCallback()}async processDataTransfer(s,e=!1){const{Tools:t}=this.Editor,o=s.types;if((o.includes?o.includes("Files"):o.contains("Files"))&&!V(this.toolsFiles)){await this.processFiles(s.files);return}const n=s.getData(this.MIME_TYPE),r=s.getData("text/plain");let a=s.getData("text/html");if(n)try{this.insertEditorJSData(JSON.parse(n));return}catch{}e&&r.trim()&&a.trim()&&(a="<p>"+(a.trim()?a:r)+"</p>");const l=Object.keys(this.toolsTags).reduce((h,f)=>(h[f.toLowerCase()]=this.toolsTags[f].sanitizationConfig??{},h),{}),c=Object.assign({},l,t.getAllInlineToolsSanitizeConfig(),{br:{}}),u=Z(a,c);!u.trim()||u.trim()===r||!d.isHTMLString(u)?await this.processText(r):await this.processText(u,!0)}async processText(s,e=!1){const{Caret:t,BlockManager:o}=this.Editor,i=e?this.processHTML(s):this.processPlain(s);if(!i.length)return;if(i.length===1){i[0].isBlock?this.processSingleBlock(i.pop()):this.processInlinePaste(i.pop());return}const r=o.currentBlock&&o.currentBlock.tool.isDefault&&o.currentBlock.isEmpty;i.map(async(a,l)=>this.insertBlock(a,l===0&&r)),o.currentBlock&&t.setToBlock(o.currentBlock,t.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const s=this.Editor.Tools.blockTools;Array.from(s.values()).forEach(this.processTool)}collectTagNames(s){return J(s)?[s]:z(s)?Object.keys(s):[]}getTagsConfig(s){if(s.pasteConfig===!1)return;const e=s.pasteConfig.tags||[],t=[];e.forEach(o=>{const i=this.collectTagNames(o);t.push(...i),i.forEach(n=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,n)){L(`Paste handler for «${s.name}» Tool on «${n}» tag is skipped because it is already used by «${this.toolsTags[n].tool.name}» Tool.`,"warn");return}const r=z(o)?o[n]:null;this.toolsTags[n.toUpperCase()]={tool:s,sanitizationConfig:r}})}),this.tagsByTool[s.name]=t.map(o=>o.toUpperCase())}getFilesConfig(s){if(s.pasteConfig===!1)return;const{files:e={}}=s.pasteConfig;let{extensions:t,mimeTypes:o}=e;!t&&!o||(t&&!Array.isArray(t)&&(L(`«extensions» property of the onDrop config for «${s.name}» Tool should be an array`),t=[]),o&&!Array.isArray(o)&&(L(`«mimeTypes» property of the onDrop config for «${s.name}» Tool should be an array`),o=[]),o&&(o=o.filter(i=>Ft(i)?!0:(L(`MIME type value «${i}» for the «${s.name}» Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[s.name]={extensions:t||[],mimeTypes:o||[]})}getPatternsConfig(s){s.pasteConfig===!1||!s.pasteConfig.patterns||V(s.pasteConfig.patterns)||Object.entries(s.pasteConfig.patterns).forEach(([e,t])=>{t instanceof RegExp||L(`Pattern ${t} for «${s.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:e,pattern:t,tool:s})})}isNativeBehaviour(s){return d.isNativeInput(s)}async processFiles(s){const{BlockManager:e}=this.Editor;let t;t=await Promise.all(Array.from(s).map(n=>this.processFile(n))),t=t.filter(n=>!!n);const i=e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty;t.forEach((n,r)=>{e.paste(n.type,n.event,r===0&&i)})}async processFile(s){const e=Pt(s),t=Object.entries(this.toolsFiles).find(([n,{mimeTypes:r,extensions:a}])=>{const[l,c]=s.type.split("/"),u=a.find(f=>f.toLowerCase()===e.toLowerCase()),h=r.find(f=>{const[k,p]=f.split("/");return k===l&&(p===c||p==="*")});return!!u||!!h});if(!t)return;const[o]=t;return{event:this.composePasteEvent("file",{file:s}),type:o}}processHTML(s){const{Tools:e}=this.Editor,t=d.make("DIV");return t.innerHTML=s,this.getNodes(t).map(i=>{let n,r=e.defaultTool,a=!1;switch(i.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:n=d.make("div"),n.appendChild(i);break;case Node.ELEMENT_NODE:n=i,a=!0,this.toolsTags[n.tagName]&&(r=this.toolsTags[n.tagName].tool);break}const{tags:l}=r.pasteConfig||{tags:[]},c=l.reduce((f,k)=>(this.collectTagNames(k).forEach(v=>{const A=z(k)?k[v]:null;f[v.toLowerCase()]=A||{}}),f),{}),u=Object.assign({},c,r.baseSanitizeConfig);if(n.tagName.toLowerCase()==="table"){const f=Z(n.outerHTML,u);n=d.make("div",void 0,{innerHTML:f}).firstChild}else n.innerHTML=Z(n.innerHTML,u);const h=this.composePasteEvent("tag",{data:n});return{content:n,isBlock:a,tool:r.name,event:h}}).filter(i=>{const n=d.isEmpty(i.content),r=d.isSingleTag(i.content);return!n||r})}processPlain(s){const{defaultBlock:e}=this.config;if(!s)return[];const t=e;return s.split(/\r?\n/).filter(o=>o.trim()).map(o=>{const i=d.make("div");i.textContent=o;const n=this.composePasteEvent("tag",{data:i});return{content:i,tool:t,isBlock:!1,event:n}})}async processSingleBlock(s){const{Caret:e,BlockManager:t}=this.Editor,{currentBlock:o}=t;if(!o||s.tool!==o.name||!d.containsOnlyInlineElements(s.content.innerHTML)){this.insertBlock(s,(o==null?void 0:o.tool.isDefault)&&o.isEmpty);return}e.insertContentAtCaretPosition(s.content.innerHTML)}async processInlinePaste(s){const{BlockManager:e,Caret:t}=this.Editor,{content:o}=s;if(e.currentBlock&&e.currentBlock.tool.isDefault&&o.textContent.length<wt.PATTERN_PROCESSING_MAX_LENGTH){const n=await this.processPattern(o.textContent);if(n){const r=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty,a=e.paste(n.tool,n.event,r);t.setToBlock(a,t.positions.END);return}}if(e.currentBlock&&e.currentBlock.currentInput){const n=e.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,Z(o.innerHTML,n))}else this.insertBlock(s)}async processPattern(s){const e=this.toolsPatterns.find(o=>{const i=o.pattern.exec(s);return i?s===i.shift():!1});return e?{event:this.composePasteEvent("pattern",{key:e.key,data:s}),tool:e.tool.name}:void 0}insertBlock(s,e=!1){const{BlockManager:t,Caret:o}=this.Editor,{currentBlock:i}=t;let n;if(e&&i&&i.isEmpty){n=t.paste(s.tool,s.event,!0),o.setToBlock(n,o.positions.END);return}n=t.paste(s.tool,s.event),o.setToBlock(n,o.positions.END)}insertEditorJSData(s){const{BlockManager:e,Caret:t,Tools:o}=this.Editor;ut(s,n=>o.blockTools.get(n).sanitizeConfig).forEach(({tool:n,data:r},a)=>{let l=!1;a===0&&(l=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty);const c=e.insert({tool:n,data:r,replace:l});t.setToBlock(c,t.positions.END)})}processElementNode(s,e,t){const o=Object.keys(this.toolsTags),i=s,{tool:n}=this.toolsTags[i.tagName]||{},r=this.tagsByTool[n==null?void 0:n.name]||[],a=o.includes(i.tagName),l=d.blockElements.includes(i.tagName.toLowerCase()),c=Array.from(i.children).some(({tagName:h})=>o.includes(h)&&!r.includes(h)),u=Array.from(i.children).some(({tagName:h})=>d.blockElements.includes(h.toLowerCase()));if(!l&&!a&&!c)return t.appendChild(i),[...e,t];if(a&&!c||l&&!u&&!c)return[...e,t,i]}getNodes(s){const e=Array.from(s.childNodes);let t;const o=__name((i,n)=>{if(d.isEmpty(n)&&!d.isSingleTag(n))return i;const r=i[i.length-1];let a=new DocumentFragment;switch(r&&d.isFragment(r)&&(a=i.pop()),n.nodeType){case Node.ELEMENT_NODE:if(t=this.processElementNode(n,i,a),t)return t;break;case Node.TEXT_NODE:return a.appendChild(n),[...i,a];default:return[...i,a]}return[...i,...Array.from(n.childNodes).reduce(o,[])]},"o");return e.reduce(o,[])}composePasteEvent(s,e){return new CustomEvent(s,{detail:e})}},__name(_a6,"wt"),_a6);let yt=wt;yt.PATTERN_PROCESSING_MAX_LENGTH=450;const _oi=class _oi extends C{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:t}=e,o=[];Array.from(t.entries()).forEach(([i,n])=>{n.isReadOnlySupported||o.push(i)}),this.toolsDontSupportReadOnly=o,this.config.readOnly&&o.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(e=!this.readOnlyEnabled){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const t=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const i in this.Editor)this.Editor[i].toggleReadOnly&&this.Editor[i].toggleReadOnly(e);if(t===e)return this.readOnlyEnabled;const o=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(o.blocks),this.readOnlyEnabled}throwCriticalError(){throw new lt(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}};__name(_oi,"oi");let oi=_oi;const _fe=class _fe extends C{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,t){const o=document.elementFromPoint(e-window.pageXOffset,t-window.pageYOffset);o.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const n=[`.${F.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],r=o.closest("."+this.Editor.UI.CSS.editorWrapper),a=n.some(l=>!!o.closest(l));!r||a||(this.mousedown=!0,this.startX=e,this.startY=t)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",t=>{this.processMouseDown(t)},!1),this.listeners.on(document.body,"mousemove",Ce(t=>{this.processMouseMove(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Ce(t=>{this.processScroll(t)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(d.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,t=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),o=d.make("div",_fe.CSS.overlay,{}),i=d.make("div",_fe.CSS.overlayContainer,{}),n=d.make("div",_fe.CSS.rect,{});return i.appendChild(n),o.appendChild(i),t.appendChild(o),this.overlayRectangle=n,{container:t,overlay:o}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const t=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-t,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:t,leftPos:o,index:i}=this.genInfoForMouseSelection(),n=this.startX>t&&this.mouseX>t,r=this.startX<o&&this.mouseX<o;this.rectCrossesBlocks=!(n||r),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),i!==void 0&&(this.trySelectNextBlock(i),this.inverseSelection(),m.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const t=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!t)for(const o of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(o);if(!this.rectCrossesBlocks&&t)for(const o of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(o)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const t=document.body.offsetWidth/2,o=this.mouseY-window.pageYOffset,i=document.elementFromPoint(t,o),n=this.Editor.BlockManager.getBlockByChildNode(i);let r;n!==void 0&&(r=this.Editor.BlockManager.blocks.findIndex(h=>h.holder===n.holder));const a=this.Editor.BlockManager.lastBlock.holder.querySelector("."+F.CSS.content),l=Number.parseInt(window.getComputedStyle(a).width,10)/2,c=t-l,u=t+l;return{index:r,leftPos:c,rightPos:u}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const t=this.stackOfSelected[this.stackOfSelected.length-1]===e,o=this.stackOfSelected.length,i=1,n=-1,r=0;if(t)return;const a=this.stackOfSelected[o-1]-this.stackOfSelected[o-2]>0;let l=r;o>1&&(l=a?i:n);const c=e>this.stackOfSelected[o-1]&&l===i,u=e<this.stackOfSelected[o-1]&&l===n,f=!(c||u||l===r);if(!f&&(e>this.stackOfSelected[o-1]||this.stackOfSelected[o-1]===void 0)){let v=this.stackOfSelected[o-1]+1||e;for(v;v<=e;v++)this.addBlockInSelection(v);return}if(!f&&e<this.stackOfSelected[o-1]){for(let v=this.stackOfSelected[o-1]-1;v>=e;v--)this.addBlockInSelection(v);return}if(!f)return;let k=o-1,p;for(e>this.stackOfSelected[o-1]?p=__name(()=>e>this.stackOfSelected[k],"p"):p=__name(()=>e<this.stackOfSelected[k],"p");p();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[k]),this.stackOfSelected.pop(),k--}};__name(_fe,"fe");let fe=_fe;const _ii=class _ii extends C{async render(e){return new Promise(t=>{const{Tools:o,BlockManager:i}=this.Editor,n=e.map(({type:r,data:a,tunes:l,id:c})=>{o.available.has(r)===!1&&(K(`Tool «${r}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),a=this.composeStubDataForTool(r,a,c),r=o.stubTool);let u;try{u=i.composeBlock({id:c,tool:r,data:a,tunes:l})}catch(h){L(`Block «${r}» skipped because of plugins error`,"error",{data:a,error:h}),a=this.composeStubDataForTool(r,a,c),r=o.stubTool,u=i.composeBlock({id:c,tool:r,data:a,tunes:l})}return u});i.insertMany(n),window.requestIdleCallback(()=>{t()},{timeout:2e3})})}composeStubDataForTool(e,t,o){const{Tools:i}=this.Editor;let n=e;if(i.unavailable.has(e)){const r=i.unavailable.get(e).toolbox;r!==void 0&&r[0].title!==void 0&&(n=r[0].title)}return{savedData:{id:o,type:e,data:t},title:n}}};__name(_ii,"ii");let ii=_ii;const _ni=class _ni extends C{async save(){const{BlockManager:e,Tools:t}=this.Editor,o=e.blocks,i=[];try{o.forEach(a=>{i.push(this.getSavedData(a))});const n=await Promise.all(i),r=await ut(n,a=>t.blockTools.get(a).sanitizeConfig);return this.makeOutput(r)}catch(n){K("Saving failed due to the Error %o","error",n)}}async getSavedData(e){const t=await e.save(),o=t&&await e.validate(t.data);return{...t,isValid:o}}makeOutput(e){const t=[];return e.forEach(({id:o,tool:i,data:n,tunes:r,isValid:a})=>{if(!a){L(`Block «${i}» skipped because saved data is invalid`);return}if(i===this.Editor.Tools.stubTool){t.push(n);return}const l={id:o,type:i,data:n,...!V(r)&&{tunes:r}};t.push(l)}),{time:+new Date,blocks:t,version:"2.28.0"}}};__name(_ni,"ni");let ni=_ni;var Ne={},si={get exports(){return Ne},set exports(s){Ne=s}};(function(s,e){(function(t,o){s.exports=o()})(window,function(){return function(t){var o={};function i(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return __name(i,"i"),i.m=t,i.c=o,i.d=function(n,r,a){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:a})},i.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var l in n)i.d(a,l,(function(c){return n[c]}).bind(null,l));return a},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="/",i(i.s=4)}([function(t,o,i){var n=i(1),r=i(2);typeof(r=r.__esModule?r.default:r)=="string"&&(r=[[t.i,r,""]]);var a={insert:"head",singleton:!1};n(r,a),t.exports=r.locals||{}},function(t,o,i){var n,r=__name(function(){return n===void 0&&(n=!!(window&&document&&document.all&&!window.atob)),n},"r"),a=function(){var y={};return function(x){if(y[x]===void 0){var w=document.querySelector(x);if(window.HTMLIFrameElement&&w instanceof window.HTMLIFrameElement)try{w=w.contentDocument.head}catch{w=null}y[x]=w}return y[x]}}(),l=[];function c(y){for(var x=-1,w=0;w<l.length;w++)if(l[w].identifier===y){x=w;break}return x}__name(c,"c");function u(y,x){for(var w={},I=[],R=0;R<y.length;R++){var b=y[R],g=x.base?b[0]+x.base:b[0],E=w[g]||0,T="".concat(g," ").concat(E);w[g]=E+1;var O=c(T),S={css:b[1],media:b[2],sourceMap:b[3]};O!==-1?(l[O].references++,l[O].updater(S)):l.push({identifier:T,updater:_(S,x),references:1}),I.push(T)}return I}__name(u,"u");function h(y){var x=document.createElement("style"),w=y.attributes||{};if(w.nonce===void 0){var I=i.nc;I&&(w.nonce=I)}if(Object.keys(w).forEach(function(b){x.setAttribute(b,w[b])}),typeof y.insert=="function")y.insert(x);else{var R=a(y.insert||"head");if(!R)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");R.appendChild(x)}return x}__name(h,"h");var f,k=(f=[],function(y,x){return f[y]=x,f.filter(Boolean).join(`
`)});function p(y,x,w,I){var R=w?"":I.media?"@media ".concat(I.media," {").concat(I.css,"}"):I.css;if(y.styleSheet)y.styleSheet.cssText=k(x,R);else{var b=document.createTextNode(R),g=y.childNodes;g[x]&&y.removeChild(g[x]),g.length?y.insertBefore(b,g[x]):y.appendChild(b)}}__name(p,"p");function v(y,x,w){var I=w.css,R=w.media,b=w.sourceMap;if(R?y.setAttribute("media",R):y.removeAttribute("media"),b&&btoa&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(b))))," */")),y.styleSheet)y.styleSheet.cssText=I;else{for(;y.firstChild;)y.removeChild(y.firstChild);y.appendChild(document.createTextNode(I))}}__name(v,"v");var A=null,N=0;function _(y,x){var w,I,R;if(x.singleton){var b=N++;w=A||(A=h(x)),I=p.bind(null,w,b,!1),R=p.bind(null,w,b,!0)}else w=h(x),I=v.bind(null,w,x),R=__name(function(){(function(g){if(g.parentNode===null)return!1;g.parentNode.removeChild(g)})(w)},"R");return I(y),function(g){if(g){if(g.css===y.css&&g.media===y.media&&g.sourceMap===y.sourceMap)return;I(y=g)}else R()}}__name(_,"_"),t.exports=function(y,x){(x=x||{}).singleton||typeof x.singleton=="boolean"||(x.singleton=r());var w=u(y=y||[],x);return function(I){if(I=I||[],Object.prototype.toString.call(I)==="[object Array]"){for(var R=0;R<w.length;R++){var b=c(w[R]);l[b].references--}for(var g=u(I,x),E=0;E<w.length;E++){var T=c(w[E]);l[T].references===0&&(l[T].updater(),l.splice(T,1))}w=g}}}},function(t,o,i){(o=i(3)(!1)).push([t.i,`.ce-paragraph {
    line-height: 1.6em;
    outline: none;
}

.ce-paragraph[data-placeholder]:empty::before{
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

/** Show placeholder at the first paragraph if Editor is empty */
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {
  opacity: 1;
}

.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,
.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {
  opacity: 0;
}

.ce-paragraph p:first-of-type{
    margin-top: 0;
}

.ce-paragraph p:last-of-type{
    margin-bottom: 0;
}
`,""]),t.exports=o},function(t,o,i){t.exports=function(n){var r=[];return r.toString=function(){return this.map(function(a){var l=function(c,u){var h=c[1]||"",f=c[3];if(!f)return h;if(u&&typeof btoa=="function"){var k=(v=f,A=btoa(unescape(encodeURIComponent(JSON.stringify(v)))),N="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(A),"/*# ".concat(N," */")),p=f.sources.map(function(_){return"/*# sourceURL=".concat(f.sourceRoot||"").concat(_," */")});return[h].concat(p).concat([k]).join(`
`)}var v,A,N;return[h].join(`
`)}(a,n);return a[2]?"@media ".concat(a[2]," {").concat(l,"}"):l}).join("")},r.i=function(a,l,c){typeof a=="string"&&(a=[[null,a,""]]);var u={};if(c)for(var h=0;h<this.length;h++){var f=this[h][0];f!=null&&(u[f]=!0)}for(var k=0;k<a.length;k++){var p=[].concat(a[k]);c&&u[p[0]]||(l&&(p[2]?p[2]="".concat(l," and ").concat(p[2]):p[2]=l),r.push(p))}},r}},function(t,o,i){i.r(o),i.d(o,"default",function(){return a}),i(0);function n(l,c){for(var u=0;u<c.length;u++){var h=c[u];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(l,h.key,h)}}__name(n,"n");function r(l,c,u){return c&&n(l.prototype,c),u&&n(l,u),l}__name(r,"r");/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */var a=function(){function l(c){var u=c.data,h=c.config,f=c.api,k=c.readOnly;(function(p,v){if(!(p instanceof v))throw new TypeError("Cannot call a class as a function")})(this,l),this.api=f,this.readOnly=k,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=h.placeholder?h.placeholder:l.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=h.preserveBlank!==void 0&&h.preserveBlank,this.data=u}return __name(l,"l"),r(l,null,[{key:"DEFAULT_PLACEHOLDER",get:function(){return""}}]),r(l,[{key:"onKeyUp",value:function(c){c.code!=="Backspace"&&c.code!=="Delete"||this._element.textContent===""&&(this._element.innerHTML="")}},{key:"drawView",value:function(){var c=document.createElement("DIV");return c.classList.add(this._CSS.wrapper,this._CSS.block),c.contentEditable=!1,c.dataset.placeholder=this.api.i18n.t(this._placeholder),this.readOnly||(c.contentEditable=!0,c.addEventListener("keyup",this.onKeyUp)),c}},{key:"render",value:function(){return this._element===null&&(this._element=this.drawView()),this.hydrate(),this._element}},{key:"merge",value:function(c){var u={text:this.data.text+c.text};this.data=u}},{key:"validate",value:function(c){return!(c.text.trim()===""&&!this._preserveBlank)}},{key:"save",value:function(c){return{text:c.innerHTML}}},{key:"onPaste",value:function(c){var u={text:c.detail.data.innerHTML};this.data=u}},{key:"hydrate",value:function(){var c=this;window.requestAnimationFrame(function(){c._element.innerHTML=c._data.text||""})}},{key:"data",get:function(){if(this._element!==null){var c=this._element.innerHTML;this._data.text=c}return this._data},set:function(c){this._data=c||{},this._element!==null&&this.hydrate()}}],[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{text:{br:!0}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["P"]}}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>',title:"Text"}}}]),l}()}]).default})})(si);const ri=xe(Ne),_We=class _We{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=So,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}};__name(_We,"We");let We=_We;We.isInline=!0;We.title="Bold";const _Ye=class _Ye{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Oo,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}};__name(_Ye,"Ye");let Ye=_Ye;Ye.isInline=!0;Ye.title="Italic";const _Ke=class _Ke{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new m}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Qe,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const t=this.selection.findParentTag("A");if(t){this.selection.expandToTag(t),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=Ro,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const t=e.getAttribute("href");this.nodes.input.value=t!=="null"?t:"",this.selection.save()}else this.nodes.button.innerHTML=Qe,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const t=new m;t.save(),this.selection.restore(),this.selection.removeFakeBackground(),t.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let t=this.nodes.input.value||"";if(!t.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(t)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),L("Incorrect Link pasted","warn",t);return}t=this.prepareLink(t),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(t),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const t=/^\/[^/\s]/.test(e),o=e.substring(0,1)==="#",i=/^\/\/[^/\s]/.test(e);return!t&&!o&&!i&&(e="http://"+e),e}insertLink(e){const t=this.selection.findParentTag("A");t&&this.selection.expandToTag(t),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}};__name(_Ke,"Ke");let Ke=_Ke;Ke.isInline=!0;Ke.title="Link";const _Et=class _Et{constructor({data:e,api:t}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=t,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=d.make("div",this.CSS.wrapper),t=Do,o=d.make("div",this.CSS.info),i=d.make("div",this.CSS.title,{textContent:this.title}),n=d.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=t,o.appendChild(i),o.appendChild(n),e.appendChild(o),e}};__name(_Et,"Et");let Et=_Et;Et.isReadOnlySupported=!0;const _ai=class _ai extends $e{constructor(){super(...arguments),this.type=ye.Inline}get title(){return this.constructable[Ue.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}};__name(_ai,"ai");let ai=_ai;const _li=class _li extends $e{constructor(){super(...arguments),this.type=ye.Tune}create(e,t){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:t,data:e})}};__name(_li,"li");let li=_li;const _U=class _U extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isBlock());return new _U(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInline());return new _U(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,t])=>t.isTune());return new _U(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,t])=>t.isInternal);return new _U(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,t])=>!t.isInternal);return new _U(e)}};__name(_U,"U");let U=_U;var ci=Object.defineProperty,di=Object.getOwnPropertyDescriptor,Bt=__name((s,e,t,o)=>{for(var i=o>1?void 0:o?di(e,t):e,n=s.length-1,r;n>=0;n--)(r=s[n])&&(i=(o?r(e,t,i):r(i))||i);return o&&i&&ci(e,t,i),i},"Bt");const _Xe=class _Xe extends $e{constructor(){super(...arguments),this.type=ye.Block,this.inlineTools=new U,this.tunes=new U}create(e,t,o){return new this.constructable({data:e,block:t,readOnly:o,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[se.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[se.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[se.Toolbox],t=this.config[ke.Toolbox];if(!V(e)&&t!==!1)return t?Array.isArray(e)?Array.isArray(t)?t.map((o,i)=>{const n=e[i];return n?{...n,...o}:o}):[t]:Array.isArray(t)?t:[{...e,...t}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[se.ConversionConfig]}get enabledInlineTools(){return this.config[ke.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[ke.EnabledBlockTunes]}get pasteConfig(){return this.constructable[se.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,t=this.baseSanitizeConfig;if(V(e))return t;const o={};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const n=e[i];z(n)?o[i]=Object.assign({},t,n):o[i]=n}return o}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),Array.from(this.tunes.values()).forEach(t=>Object.assign(e,t.sanitizeConfig)),e}};__name(_Xe,"Xe");let Xe=_Xe;Bt([ce],Xe.prototype,"sanitizeConfig",1);Bt([ce],Xe.prototype,"baseSanitizeConfig",1);const _hi=class _hi{constructor(e,t,o){this.api=o,this.config=e,this.editorConfig=t}get(e){const{class:t,isInternal:o=!1,...i}=this.config[e],n=this.getConstructor(t);return new n({name:e,constructable:t,config:i,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:o})}getConstructor(e){switch(!0){case e[Ue.IsInline]:return ai;case e[xt.IsTune]:return li;default:return Xe}}};__name(_hi,"hi");let hi=_hi;const _Tt=class _Tt{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:ft,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e+1);if(!t)throw new Error("Unable to move Block down since it is already the last");const o=t.holder,i=o.getBoundingClientRect();let n=Math.abs(window.innerHeight-o.offsetHeight);i.top<window.innerHeight&&(n=window.scrollY+o.offsetHeight),window.scrollTo(0,n),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}};__name(_Tt,"Tt");let Tt=_Tt;Tt.isTune=!0;const _Ct=class _Ct{constructor({api:e}){this.api=e}render(){return{icon:Mo,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}};__name(_Ct,"Ct");let Ct=_Ct;Ct.isTune=!0;const _St=class _St{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:Io,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),t=this.api.blocks.getBlockByIndex(e),o=this.api.blocks.getBlockByIndex(e-1);if(e===0||!t||!o)throw new Error("Unable to move Block up since it is already the first");const i=t.holder,n=o.holder,r=i.getBoundingClientRect(),a=n.getBoundingClientRect();let l;a.top>0?l=Math.abs(r.top)-Math.abs(a.top):l=Math.abs(r.top)+a.height,window.scrollBy(0,-1*l),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}};__name(_St,"St");let St=_St;St.isTune=!0;var ui=Object.defineProperty,pi=Object.getOwnPropertyDescriptor,fi=__name((s,e,t,o)=>{for(var i=o>1?void 0:o?pi(e,t):e,n=s.length-1,r;n>=0;n--)(r=s[n])&&(i=(o?r(e,t,i):r(i))||i);return o&&i&&ui(e,t,i),i},"fi");const _It=class _It extends C{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new U,this.toolsUnavailable=new U}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=Se({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new hi(e,this.config,this.Editor.API);const t=this.getListOfPrepareFunctions(e);if(t.length===0)return Promise.resolve();await Dt(t,o=>{this.toolPrepareMethodSuccess(o)},o=>{this.toolPrepareMethodFallback(o)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(t=>{Object.assign(e,t.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{D(e.reset)&&await e.reset()})}get internalTools(){return{bold:{class:We,isInternal:!0},italic:{class:Ye,isInternal:!0},link:{class:Ke,isInternal:!0},paragraph:{class:ri,inlineToolbar:!0,isInternal:!0},stub:{class:Et,isInternal:!0},moveUp:{class:St,isInternal:!0},delete:{class:Ct,isInternal:!0},moveDown:{class:Tt,isInternal:!0}}}toolPrepareMethodSuccess(e){const t=this.factory.get(e.toolName);if(t.isInline()){const i=["render","surround","checkState"].filter(n=>!t.create()[n]);if(i.length){L(`Incorrect Inline Tool: ${t.name}. Some of required methods is not implemented %o`,"warn",i),this.toolsUnavailable.set(t.name,t);return}}this.toolsAvailable.set(t.name,t)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const t=[];return Object.entries(e).forEach(([o,i])=>{t.push({function:D(i.class.prepare)?i.class.prepare:()=>{},data:{toolName:o,config:i.config}})}),t}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new U(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(t=>[t,this.inlineTools.get(t)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new U(e.enabledInlineTools.map(t=>[t,this.inlineTools.get(t)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const t=new U(e.enabledBlockTunes.map(o=>[o,this.blockTunes.get(o)]));e.tunes=new U([...t,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const t=new U(this.config.tunes.map(o=>[o,this.blockTunes.get(o)]));e.tunes=new U([...t,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const t=this.config.tools[e];if(!D(t)&&!D(t.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const t in this.config.tools)z(this.config.tools[t])?e[t]=this.config.tools[t]:e[t]={class:this.config.tools[t]};return e}};__name(_It,"It");let It=_It;fi([ce],It.prototype,"getAllInlineToolsSanitizeConfig",1);const gi=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;-webkit-transform:translateX(-50%) translateY(8px) scale(.94);transform:translate(-50%) translateY(8px) scale(.94);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translate(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.94);transform:translate(-23px) translateY(8px) scale(.94)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translate(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.94);transform:translate(-100%) translateY(8px) scale(.94);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translate(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width: 651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`,_bi=class _bi extends C{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=Ht(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${F.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:t,InlineToolbar:o,ConversionToolbar:i}=this.Editor;return t.opened||o.opened||i.opened||e.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,t])=>t.flipper instanceof G).some(([e,t])=>t.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:t,InlineToolbar:o,ConversionToolbar:i}=this.Editor;t.close(),o.close(),i.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<rt}make(){this.nodes.holder=d.getHolder(this.config.holder),this.nodes.wrapper=d.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=d.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(d.get(e))return;const t=d.make("style",null,{id:e,textContent:gi.toString()});d.prepend(document.head,t)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",e=>{this.redactorClicked(e)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",e=>{this.documentTouched(e)},!0),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",e=>{this.documentTouched(e)},!0),this.readOnlyMutableListeners.on(document,"keydown",e=>{this.documentKeydown(e)},!0),this.readOnlyMutableListeners.on(document,"mousedown",e=>{this.documentClicked(e)},!0),this.readOnlyMutableListeners.on(document,"selectionchange",()=>{this.selectionChanged()},!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Ce(t=>{const o=t.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||o&&e!==o&&(e=o,this.eventsDispatcher.emit(kt,{block:this.Editor.BlockManager.getBlockByChildNode(o)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case B.ENTER:this.enterPressed(e);break;case B.BACKSPACE:case B.DELETE:this.backspacePressed(e);break;case B.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:t}=this.Editor.BlockManager,o=e.target.closest(`.${this.CSS.editorWrapper}`),i=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(t!==void 0&&o===null){this.Editor.BlockEvents.keydown(e);return}o||t&&i||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:t,BlockSelection:o,Caret:i}=this.Editor;if(o.anyBlockSelected&&!m.isSelectionExists){const n=t.removeSelectedBlocks();i.setToBlock(t.insertDefaultBlockAtIndex(n,!0),i.positions.START),o.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:t,BlockSelection:o}=this.Editor,i=t.currentBlockIndex>=0;if(o.anyBlockSelected&&!m.isSelectionExists){o.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&i&&e.target.tagName==="BODY"){const n=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(n),this.Editor.BlockManager.highlightCurrentNode(),this.Editor.Toolbar.moveAndOpen(n)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){if(!e.isTrusted)return;const t=e.target;this.nodes.holder.contains(t)||m.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const i=this.Editor.BlockSettings.nodes.wrapper.contains(t),n=this.Editor.Toolbar.nodes.settingsToggler.contains(t),r=i||n;if(this.Editor.BlockSettings.opened&&!r){this.Editor.BlockSettings.close();const a=this.Editor.BlockManager.getBlockByChildNode(t);this.Editor.Toolbar.moveAndOpen(a)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let t=e.target;if(t===this.nodes.redactor){const o=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,i=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;t=document.elementFromPoint(o,i)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(t),this.Editor.BlockManager.highlightCurrentNode()}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){const{BlockSelection:t}=this.Editor;if(!m.isCollapsed)return;const o=__name(()=>{e.stopImmediatePropagation(),e.stopPropagation()},"o"),i=e.target,n=e.metaKey||e.ctrlKey;if(d.isAnchor(i)&&n){o();const u=i.getAttribute("href"),h=zt(u);$t(h);return}const r=this.Editor.BlockManager.getBlockByIndex(-1),a=d.offset(r.holder).bottom,l=e.pageY;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!t.anyBlockSelected&&a<l){o();const{BlockManager:u,Caret:h,Toolbar:f}=this.Editor;(!u.lastBlock.tool.isDefault||!u.lastBlock.isEmpty)&&u.insertAtEnd(),h.setToTheLastBlock(),f.moveAndOpen(u.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:t}=this.Editor,o=m.anchorElement;if(e.isCrossBlockSelectionStarted&&t.anyBlockSelected&&m.get().removeAllRanges(),!o){m.range||this.Editor.InlineToolbar.close();return}const i=o.closest(`.${F.CSS.content}`)===null;if(i&&(this.Editor.InlineToolbar.containsNode(o)||this.Editor.InlineToolbar.close(),o.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(o);const n=i!==!0;this.Editor.InlineToolbar.tryToShow(!0,n)}};__name(_bi,"bi");let bi=_bi;const mi={BlocksAPI:Qt,CaretAPI:eo,EventsAPI:to,I18nAPI:Pe,API:oo,InlineToolbarAPI:io,ListenersAPI:no,NotifierAPI:lo,ReadOnlyAPI:co,SanitizerAPI:mo,SaverAPI:ko,SelectionAPI:vo,StylesAPI:xo,ToolbarAPI:wo,TooltipAPI:Bo,UiAPI:To,BlockSettings:jo,ConversionToolbar:Y,Toolbar:Ko,InlineToolbar:Xo,BlockEvents:Vo,BlockManager:Go,BlockSelection:Jo,Caret:ve,CrossBlockSelection:Qo,DragNDrop:ei,ModificationsObserver:ti,Paste:yt,ReadOnly:oi,RectangleSelection:fe,Renderer:ii,Saver:ni,Tools:It,UI:bi},_ki=class _ki{constructor(e){this.moduleInstances={},this.eventsDispatcher=new we;let t,o;this.isReady=new Promise((i,n)=>{t=i,o=n}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:i,Caret:n,UI:r,ModificationsObserver:a}=this.moduleInstances;r.checkEmptiness(),a.enable(),this.configuration.autofocus&&(n.setToBlock(i.blocks[0],n.positions.START),i.highlightCurrentNode()),t()}).catch(i=>{L(`Editor.js is not ready because of ${i}`,"error"),o(i)})}set configuration(e){var o,i;z(e)?this.config={...e}:this.config={holder:e},Ie(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=it.VERBOSE),Nt(this.config.logLevel),Ie(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const t={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(V(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[t]}),this.config.readOnly=this.config.readOnly||!1,(o=this.config.i18n)!=null&&o.messages&&$.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((i=this.config.i18n)==null?void 0:i.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:t}=this.config;if(e&&t)throw Error("«holderId» and «holder» param can't assign at the same time.");if(J(t)&&!d.get(t))throw Error(`element with ID «${t}» is missing. Pass correct holder's ID.`);if(t&&z(t)&&!d.isElement(t))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((t,o)=>t.then(async()=>{try{await this.moduleInstances[o].prepare()}catch(i){if(i instanceof lt)throw new Error(i.message);L(`Module ${o} was skipped because of %o`,"warn",i)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(mi).forEach(([e,t])=>{try{this.moduleInstances[e]=new t({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(o){L("[constructModules]",`Module ${e} skipped because`,"error",o)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const t={};for(const o in this.moduleInstances)o!==e&&(t[o]=this.moduleInstances[o]);return t}};__name(_ki,"ki");let ki=_ki;/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */const _vi=class _vi{static get version(){return"2.28.0"}constructor(e){let t=__name(()=>{},"t");z(e)&&D(e.onReady)&&(t=e.onReady);const o=new ki(e);this.isReady=o.isReady.then(()=>{this.exportAPI(o),t()})}exportAPI(e){const t=["configuration"],o=__name(()=>{Object.values(e.moduleInstances).forEach(n=>{D(n.destroy)&&n.destroy(),n.listeners.removeAll()}),e=null;for(const n in this)Object.prototype.hasOwnProperty.call(this,n)&&delete this[n];Object.setPrototypeOf(this,null)},"o");t.forEach(n=>{this[n]=e[n]}),this.destroy=o,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([n,r])=>{Object.entries(r).forEach(([a,l])=>{this[l]=e.moduleInstances.API.methods[n][a]})})}};__name(_vi,"vi");let vi=_vi;var lib={};/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const IdentifierIssuer$2=IdentifierIssuer_1,MessageDigest$2=MessageDigestBrowser,Permuter=Permuter_1,NQuads$2=NQuads_1;var _a7,URDNA2015_1=(_a7=class{constructor({createMessageDigest=__name(()=>new MessageDigest$2("sha256"),"createMessageDigest"),canonicalIdMap=new Map,maxDeepIterations=1/0}={}){this.name="URDNA2015",this.blankNodeInfo=new Map,this.canonicalIssuer=new IdentifierIssuer$2("_:c14n",canonicalIdMap),this.createMessageDigest=createMessageDigest,this.maxDeepIterations=maxDeepIterations,this.quads=null,this.deepIterations=null}async main(dataset){this.deepIterations=new Map,this.quads=dataset;for(const quad of dataset)this._addBlankNodeQuadInfo({quad,component:quad.subject}),this._addBlankNodeQuadInfo({quad,component:quad.object}),this._addBlankNodeQuadInfo({quad,component:quad.graph});const hashToBlankNodes=new Map,nonNormalized=[...this.blankNodeInfo.keys()];let i=0;for(const id of nonNormalized)++i%100===0&&await this._yield(),await this._hashAndTrackBlankNode({id,hashToBlankNodes});const hashes=[...hashToBlankNodes.keys()].sort(),nonUnique=[];for(const hash of hashes){const idList=hashToBlankNodes.get(hash);if(idList.length>1){nonUnique.push(idList);continue}const id=idList[0];this.canonicalIssuer.getId(id)}for(const idList of nonUnique){const hashPathList=[];for(const id of idList){if(this.canonicalIssuer.hasId(id))continue;const issuer=new IdentifierIssuer$2("_:b");issuer.getId(id);const result=await this.hashNDegreeQuads(id,issuer);hashPathList.push(result)}hashPathList.sort(_stringHashCompare);for(const result of hashPathList){const oldIds=result.issuer.getOldIds();for(const id of oldIds)this.canonicalIssuer.getId(id)}}const normalized=[];for(const quad of this.quads){const nQuad=NQuads$2.serializeQuadComponents(this._componentWithCanonicalId(quad.subject),quad.predicate,this._componentWithCanonicalId(quad.object),this._componentWithCanonicalId(quad.graph));normalized.push(nQuad)}return normalized.sort(),normalized.join("")}async hashFirstDegreeQuads(id){const nquads=[],info=this.blankNodeInfo.get(id),quads=info.quads;for(const quad of quads){const copy={subject:null,predicate:quad.predicate,object:null,graph:null};copy.subject=this.modifyFirstDegreeComponent(id,quad.subject,"subject"),copy.object=this.modifyFirstDegreeComponent(id,quad.object,"object"),copy.graph=this.modifyFirstDegreeComponent(id,quad.graph,"graph"),nquads.push(NQuads$2.serializeQuad(copy))}nquads.sort();const md=this.createMessageDigest();for(const nquad of nquads)md.update(nquad);return info.hash=await md.digest(),info.hash}async hashRelatedBlankNode(related,quad,issuer,position){let id;this.canonicalIssuer.hasId(related)?id=this.canonicalIssuer.getId(related):issuer.hasId(related)?id=issuer.getId(related):id=this.blankNodeInfo.get(related).hash;const md=this.createMessageDigest();return md.update(position),position!=="g"&&md.update(this.getRelatedPredicate(quad)),md.update(id),md.digest()}async hashNDegreeQuads(id,issuer){const deepIterations=this.deepIterations.get(id)||0;if(deepIterations>this.maxDeepIterations)throw new Error(`Maximum deep iterations (${this.maxDeepIterations}) exceeded.`);this.deepIterations.set(id,deepIterations+1);const md=this.createMessageDigest(),hashToRelated=await this.createHashToRelated(id,issuer),hashes=[...hashToRelated.keys()].sort();for(const hash of hashes){md.update(hash);let chosenPath="",chosenIssuer;const permuter=new Permuter(hashToRelated.get(hash));let i=0;for(;permuter.hasNext();){const permutation=permuter.next();++i%3===0&&await this._yield();let issuerCopy=issuer.clone(),path="";const recursionList=[];let nextPermutation=!1;for(const related of permutation)if(this.canonicalIssuer.hasId(related)?path+=this.canonicalIssuer.getId(related):(issuerCopy.hasId(related)||recursionList.push(related),path+=issuerCopy.getId(related)),chosenPath.length!==0&&path>chosenPath){nextPermutation=!0;break}if(!nextPermutation){for(const related of recursionList){const result=await this.hashNDegreeQuads(related,issuerCopy);if(path+=issuerCopy.getId(related),path+=`<${result.hash}>`,issuerCopy=result.issuer,chosenPath.length!==0&&path>chosenPath){nextPermutation=!0;break}}nextPermutation||(chosenPath.length===0||path<chosenPath)&&(chosenPath=path,chosenIssuer=issuerCopy)}}md.update(chosenPath),issuer=chosenIssuer}return{hash:await md.digest(),issuer}}modifyFirstDegreeComponent(id,component){return component.termType!=="BlankNode"?component:{termType:"BlankNode",value:component.value===id?"_:a":"_:z"}}getRelatedPredicate(quad){return`<${quad.predicate.value}>`}async createHashToRelated(id,issuer){const hashToRelated=new Map,quads=this.blankNodeInfo.get(id).quads;let i=0;for(const quad of quads)++i%100===0&&await this._yield(),await Promise.all([this._addRelatedBlankNodeHash({quad,component:quad.subject,position:"s",id,issuer,hashToRelated}),this._addRelatedBlankNodeHash({quad,component:quad.object,position:"o",id,issuer,hashToRelated}),this._addRelatedBlankNodeHash({quad,component:quad.graph,position:"g",id,issuer,hashToRelated})]);return hashToRelated}async _hashAndTrackBlankNode({id,hashToBlankNodes}){const hash=await this.hashFirstDegreeQuads(id),idList=hashToBlankNodes.get(hash);idList?idList.push(id):hashToBlankNodes.set(hash,[id])}_addBlankNodeQuadInfo({quad,component}){if(component.termType!=="BlankNode")return;const id=component.value,info=this.blankNodeInfo.get(id);info?info.quads.add(quad):this.blankNodeInfo.set(id,{quads:new Set([quad]),hash:null})}async _addRelatedBlankNodeHash({quad,component,position,id,issuer,hashToRelated}){if(!(component.termType==="BlankNode"&&component.value!==id))return;const related=component.value,hash=await this.hashRelatedBlankNode(related,quad,issuer,position),entries=hashToRelated.get(hash);entries?entries.push(related):hashToRelated.set(hash,[related])}_componentWithCanonicalId(component){return component.termType==="BlankNode"&&!component.value.startsWith(this.canonicalIssuer.prefix)?{termType:"BlankNode",value:this.canonicalIssuer.getId(component.value)}:component}async _yield(){return new Promise(resolve=>setImmediate(resolve))}},__name(_a7,"URDNA2015"),_a7);function _stringHashCompare(a,b){return a.hash<b.hash?-1:a.hash>b.hash?1:0}__name(_stringHashCompare,"_stringHashCompare");/*!
 * Copyright (c) 2016-2022 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest$1=MessageDigestBrowser,URDNA2015=URDNA2015_1;var _a8,URGNA2012=(_a8=class extends URDNA2015{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest$1("sha1")}modifyFirstDegreeComponent(id,component,key){return component.termType!=="BlankNode"?component:key==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:component.value===id?"_:a":"_:z"}}getRelatedPredicate(quad){return quad.predicate.value}async createHashToRelated(id,issuer){const hashToRelated=new Map,quads=this.blankNodeInfo.get(id).quads;let i=0;for(const quad of quads){let position,related;if(quad.subject.termType==="BlankNode"&&quad.subject.value!==id)related=quad.subject.value,position="p";else if(quad.object.termType==="BlankNode"&&quad.object.value!==id)related=quad.object.value,position="r";else continue;++i%100===0&&await this._yield();const hash=await this.hashRelatedBlankNode(related,quad,issuer,position),entries=hashToRelated.get(hash);entries?entries.push(related):hashToRelated.set(hash,[related])}return hashToRelated}},__name(_a8,"URDNA2012"),_a8);/*!
 * Copyright (c) 2016-2021 Digital Bazaar, Inc. All rights reserved.
 */const MessageDigest=MessageDigestBrowser,URDNA2015Sync=URDNA2015Sync_1;var _a9,URGNA2012Sync=(_a9=class extends URDNA2015Sync{constructor(){super(),this.name="URGNA2012",this.createMessageDigest=()=>new MessageDigest("sha1")}modifyFirstDegreeComponent(id,component,key){return component.termType!=="BlankNode"?component:key==="graph"?{termType:"BlankNode",value:"_:g"}:{termType:"BlankNode",value:component.value===id?"_:a":"_:z"}}getRelatedPredicate(quad){return quad.predicate.value}createHashToRelated(id,issuer){const hashToRelated=new Map,quads=this.blankNodeInfo.get(id).quads;for(const quad of quads){let position,related;if(quad.subject.termType==="BlankNode"&&quad.subject.value!==id)related=quad.subject.value,position="p";else if(quad.object.termType==="BlankNode"&&quad.object.value!==id)related=quad.object.value,position="r";else continue;const hash=this.hashRelatedBlankNode(related,quad,issuer,position),entries=hashToRelated.get(hash);entries?entries.push(related):hashToRelated.set(hash,[related])}return hashToRelated}},__name(_a9,"URDNA2012Sync"),_a9);(function(exports){const URDNA20152=URDNA2015_1,URGNA2012$1=URGNA2012,URDNA2015Sync2=URDNA2015Sync_1,URGNA2012Sync$1=URGNA2012Sync;let rdfCanonizeNative;try{rdfCanonizeNative=require$$4}catch{}function _inputToDataset(input){return Array.isArray(input)?input:exports.NQuads.legacyDatasetToQuads(input)}__name(_inputToDataset,"_inputToDataset"),exports.NQuads=NQuads_1,exports.IdentifierIssuer=IdentifierIssuer_1,exports._rdfCanonizeNative=function(api2){return api2&&(rdfCanonizeNative=api2),rdfCanonizeNative},exports.canonize=async function(input,options){const dataset=_inputToDataset(input);if(options.useNative){if(!rdfCanonizeNative)throw new Error("rdf-canonize-native not available");if(options.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return new Promise((resolve,reject)=>rdfCanonizeNative.canonize(dataset,options,(err,canonical)=>err?reject(err):resolve(canonical)))}if(options.algorithm==="URDNA2015")return new URDNA20152(options).main(dataset);if(options.algorithm==="URGNA2012"){if(options.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new URGNA2012$1(options).main(dataset)}throw"algorithm"in options?new Error("Invalid RDF Dataset Canonicalization algorithm: "+options.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")},exports._canonizeSync=function(input,options){const dataset=_inputToDataset(input);if(options.useNative){if(!rdfCanonizeNative)throw new Error("rdf-canonize-native not available");if(options.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "useNative".');return rdfCanonizeNative.canonizeSync(dataset,options)}if(options.algorithm==="URDNA2015")return new URDNA2015Sync2(options).main(dataset);if(options.algorithm==="URGNA2012"){if(options.createMessageDigest)throw new Error('"createMessageDigest" cannot be used with "URGNA2012".');return new URGNA2012Sync$1(options).main(dataset)}throw"algorithm"in options?new Error("Invalid RDF Dataset Canonicalization algorithm: "+options.algorithm):new Error("No RDF Dataset Canonicalization algorithm specified.")}})(lib);var rdfCanonize=lib;const api$d={};var types$7=api$d;api$d.isArray=Array.isArray;api$d.isBoolean=v=>typeof v=="boolean"||Object.prototype.toString.call(v)==="[object Boolean]";api$d.isDouble=v=>api$d.isNumber(v)&&(String(v).indexOf(".")!==-1||Math.abs(v)>=1e21);api$d.isEmptyObject=v=>api$d.isObject(v)&&Object.keys(v).length===0;api$d.isNumber=v=>typeof v=="number"||Object.prototype.toString.call(v)==="[object Number]";api$d.isNumeric=v=>!isNaN(parseFloat(v))&&isFinite(v);api$d.isObject=v=>Object.prototype.toString.call(v)==="[object Object]";api$d.isString=v=>typeof v=="string"||Object.prototype.toString.call(v)==="[object String]";api$d.isUndefined=v=>typeof v>"u";const types$6=types$7,api$c={};var graphTypes$5=api$c;api$c.isSubject=v=>types$6.isObject(v)&&!("@value"in v||"@set"in v||"@list"in v)?Object.keys(v).length>1||!("@id"in v):!1;api$c.isSubjectReference=v=>types$6.isObject(v)&&Object.keys(v).length===1&&"@id"in v;api$c.isValue=v=>types$6.isObject(v)&&"@value"in v;api$c.isList=v=>types$6.isObject(v)&&"@list"in v;api$c.isGraph=v=>types$6.isObject(v)&&"@graph"in v&&Object.keys(v).filter(key=>key!=="@id"&&key!=="@index").length===1;api$c.isSimpleGraph=v=>api$c.isGraph(v)&&!("@id"in v);api$c.isBlankNode=v=>{if(types$6.isObject(v)){if("@id"in v){const id=v["@id"];return!types$6.isString(id)||id.indexOf("_:")===0}return Object.keys(v).length===0||!("@value"in v||"@set"in v||"@list"in v)}return!1};var _a10,JsonLdError_1=(_a10=class extends Error{constructor(message="An unspecified JSON-LD error occurred.",name="jsonld.Error",details={}){super(message),this.name=name,this.message=message,this.details=details}},__name(_a10,"JsonLdError"),_a10);const graphTypes$4=graphTypes$5,types$5=types$7,IdentifierIssuer$1=rdfCanonize.IdentifierIssuer,JsonLdError$a=JsonLdError_1,REGEX_BCP47$3=/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/,REGEX_LINK_HEADERS=/(?:<[^>]*?>|"[^"]*?"|[^,])+/g,REGEX_LINK_HEADER$1=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,REGEX_LINK_HEADER_PARAMS=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g,REGEX_KEYWORD$3=/^@[a-zA-Z]+$/,DEFAULTS={headers:{accept:"application/ld+json, application/json"}},api$b={};var util$5=api$b;api$b.IdentifierIssuer=IdentifierIssuer$1;api$b.REGEX_BCP47=REGEX_BCP47$3;api$b.REGEX_KEYWORD=REGEX_KEYWORD$3;api$b.clone=function(value){if(value&&typeof value=="object"){let rval;if(types$5.isArray(value)){rval=[];for(let i=0;i<value.length;++i)rval[i]=api$b.clone(value[i])}else if(value instanceof Map){rval=new Map;for(const[k,v]of value)rval.set(k,api$b.clone(v))}else if(value instanceof Set){rval=new Set;for(const v of value)rval.add(api$b.clone(v))}else if(types$5.isObject(value)){rval={};for(const key in value)rval[key]=api$b.clone(value[key])}else rval=value.toString();return rval}return value};api$b.asArray=function(value){return Array.isArray(value)?value:[value]};api$b.buildHeaders=(headers={})=>{if(Object.keys(headers).some(h=>h.toLowerCase()==="accept"))throw new RangeError('Accept header may not be specified; only "'+DEFAULTS.headers.accept+'" is supported.');return Object.assign({Accept:DEFAULTS.headers.accept},headers)};api$b.parseLinkHeader=header=>{const rval={},entries=header.match(REGEX_LINK_HEADERS);for(let i=0;i<entries.length;++i){let match=entries[i].match(REGEX_LINK_HEADER$1);if(!match)continue;const result={target:match[1]},params=match[2];for(;match=REGEX_LINK_HEADER_PARAMS.exec(params);)result[match[1]]=match[2]===void 0?match[3]:match[2];const rel=result.rel||"";Array.isArray(rval[rel])?rval[rel].push(result):rval.hasOwnProperty(rel)?rval[rel]=[rval[rel],result]:rval[rel]=result}return rval};api$b.validateTypeValue=(v,isFrame)=>{if(!types$5.isString(v)&&!(types$5.isArray(v)&&v.every(vv=>types$5.isString(vv)))){if(isFrame&&types$5.isObject(v))switch(Object.keys(v).length){case 0:return;case 1:if("@default"in v&&api$b.asArray(v["@default"]).every(vv=>types$5.isString(vv)))return}throw new JsonLdError$a('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, an empty object, or a default object.',"jsonld.SyntaxError",{code:"invalid type value",value:v})}};api$b.hasProperty=(subject,property)=>{if(subject.hasOwnProperty(property)){const value=subject[property];return!types$5.isArray(value)||value.length>0}return!1};api$b.hasValue=(subject,property,value)=>{if(api$b.hasProperty(subject,property)){let val=subject[property];const isList=graphTypes$4.isList(val);if(types$5.isArray(val)||isList){isList&&(val=val["@list"]);for(let i=0;i<val.length;++i)if(api$b.compareValues(value,val[i]))return!0}else if(!types$5.isArray(value))return api$b.compareValues(value,val)}return!1};api$b.addValue=(subject,property,value,options)=>{if(options=options||{},"propertyIsArray"in options||(options.propertyIsArray=!1),"valueIsArray"in options||(options.valueIsArray=!1),"allowDuplicate"in options||(options.allowDuplicate=!0),"prependValue"in options||(options.prependValue=!1),options.valueIsArray)subject[property]=value;else if(types$5.isArray(value)){value.length===0&&options.propertyIsArray&&!subject.hasOwnProperty(property)&&(subject[property]=[]),options.prependValue&&(value=value.concat(subject[property]),subject[property]=[]);for(let i=0;i<value.length;++i)api$b.addValue(subject,property,value[i],options)}else if(subject.hasOwnProperty(property)){const hasValue=!options.allowDuplicate&&api$b.hasValue(subject,property,value);!types$5.isArray(subject[property])&&(!hasValue||options.propertyIsArray)&&(subject[property]=[subject[property]]),hasValue||(options.prependValue?subject[property].unshift(value):subject[property].push(value))}else subject[property]=options.propertyIsArray?[value]:value};api$b.getValues=(subject,property)=>[].concat(subject[property]||[]);api$b.removeProperty=(subject,property)=>{delete subject[property]};api$b.removeValue=(subject,property,value,options)=>{options=options||{},"propertyIsArray"in options||(options.propertyIsArray=!1);const values=api$b.getValues(subject,property).filter(e=>!api$b.compareValues(e,value));values.length===0?api$b.removeProperty(subject,property):values.length===1&&!options.propertyIsArray?subject[property]=values[0]:subject[property]=values};api$b.relabelBlankNodes=(input,options)=>{options=options||{};const issuer=options.issuer||new IdentifierIssuer$1("_:b");return _labelBlankNodes(issuer,input)};api$b.compareValues=(v1,v2)=>v1===v2||graphTypes$4.isValue(v1)&&graphTypes$4.isValue(v2)&&v1["@value"]===v2["@value"]&&v1["@type"]===v2["@type"]&&v1["@language"]===v2["@language"]&&v1["@index"]===v2["@index"]?!0:types$5.isObject(v1)&&"@id"in v1&&types$5.isObject(v2)&&"@id"in v2?v1["@id"]===v2["@id"]:!1;api$b.compareShortestLeast=(a,b)=>a.length<b.length?-1:b.length<a.length?1:a===b?0:a<b?-1:1;function _labelBlankNodes(issuer,element){if(types$5.isArray(element))for(let i=0;i<element.length;++i)element[i]=_labelBlankNodes(issuer,element[i]);else if(graphTypes$4.isList(element))element["@list"]=_labelBlankNodes(issuer,element["@list"]);else if(types$5.isObject(element)){graphTypes$4.isBlankNode(element)&&(element["@id"]=issuer.getId(element["@id"]));const keys=Object.keys(element).sort();for(let ki2=0;ki2<keys.length;++ki2){const key=keys[ki2];key!=="@id"&&(element[key]=_labelBlankNodes(issuer,element[key]))}}return element}__name(_labelBlankNodes,"_labelBlankNodes");const RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",XSD="http://www.w3.org/2001/XMLSchema#";var constants={LINK_HEADER_REL:"http://www.w3.org/ns/json-ld#context",LINK_HEADER_CONTEXT:"http://www.w3.org/ns/json-ld#context",RDF,RDF_LIST:RDF+"List",RDF_FIRST:RDF+"first",RDF_REST:RDF+"rest",RDF_NIL:RDF+"nil",RDF_TYPE:RDF+"type",RDF_PLAIN_LITERAL:RDF+"PlainLiteral",RDF_XML_LITERAL:RDF+"XMLLiteral",RDF_JSON_LITERAL:RDF+"JSON",RDF_OBJECT:RDF+"object",RDF_LANGSTRING:RDF+"langString",XSD,XSD_BOOLEAN:XSD+"boolean",XSD_DOUBLE:XSD+"double",XSD_INTEGER:XSD+"integer",XSD_STRING:XSD+"string"},RequestQueue_1,hasRequiredRequestQueue;function requireRequestQueue(){var _a13;return hasRequiredRequestQueue||(hasRequiredRequestQueue=1,RequestQueue_1=(_a13=class{constructor(){this._requests={}}wrapLoader(loader){const self2=this;return self2._loader=loader,function(){return self2.add.apply(self2,arguments)}}async add(url2){let promise=this._requests[url2];if(promise)return Promise.resolve(promise);promise=this._requests[url2]=this._loader(url2);try{return await promise}finally{delete this._requests[url2]}}},__name(_a13,"RequestQueue"),_a13)),RequestQueue_1}__name(requireRequestQueue,"requireRequestQueue");const types$4=types$7,api$a={};var url$1=api$a;api$a.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}};api$a.parse=(str,parser)=>{const parsed={},o=api$a.parsers[parser||"full"],m2=o.regex.exec(str);let i=o.keys.length;for(;i--;)parsed[o.keys[i]]=m2[i]===void 0?null:m2[i];return(parsed.scheme==="https"&&parsed.port==="443"||parsed.scheme==="http"&&parsed.port==="80")&&(parsed.href=parsed.href.replace(":"+parsed.port,""),parsed.authority=parsed.authority.replace(":"+parsed.port,""),parsed.port=null),parsed.normalizedPath=api$a.removeDotSegments(parsed.path),parsed};api$a.prependBase=(base,iri)=>{if(base===null||api$a.isAbsolute(iri))return iri;(!base||types$4.isString(base))&&(base=api$a.parse(base||""));const rel=api$a.parse(iri),transform={protocol:base.protocol||""};if(rel.authority!==null)transform.authority=rel.authority,transform.path=rel.path,transform.query=rel.query;else if(transform.authority=base.authority,rel.path==="")transform.path=base.path,rel.query!==null?transform.query=rel.query:transform.query=base.query;else{if(rel.path.indexOf("/")===0)transform.path=rel.path;else{let path=base.path;path=path.substr(0,path.lastIndexOf("/")+1),(path.length>0||base.authority)&&path.substr(-1)!=="/"&&(path+="/"),path+=rel.path,transform.path=path}transform.query=rel.query}rel.path!==""&&(transform.path=api$a.removeDotSegments(transform.path));let rval=transform.protocol;return transform.authority!==null&&(rval+="//"+transform.authority),rval+=transform.path,transform.query!==null&&(rval+="?"+transform.query),rel.fragment!==null&&(rval+="#"+rel.fragment),rval===""&&(rval="./"),rval};api$a.removeBase=(base,iri)=>{if(base===null)return iri;(!base||types$4.isString(base))&&(base=api$a.parse(base||""));let root="";if(base.href!==""?root+=(base.protocol||"")+"//"+(base.authority||""):iri.indexOf("//")&&(root+="//"),iri.indexOf(root)!==0)return iri;const rel=api$a.parse(iri.substr(root.length)),baseSegments=base.normalizedPath.split("/"),iriSegments=rel.normalizedPath.split("/"),last=rel.fragment||rel.query?0:1;for(;baseSegments.length>0&&iriSegments.length>last&&baseSegments[0]===iriSegments[0];)baseSegments.shift(),iriSegments.shift();let rval="";if(baseSegments.length>0){baseSegments.pop();for(let i=0;i<baseSegments.length;++i)rval+="../"}return rval+=iriSegments.join("/"),rel.query!==null&&(rval+="?"+rel.query),rel.fragment!==null&&(rval+="#"+rel.fragment),rval===""&&(rval="./"),rval};api$a.removeDotSegments=path=>{if(path.length===0)return"";const input=path.split("/"),output=[];for(;input.length>0;){const next=input.shift(),done=input.length===0;if(next==="."){done&&output.push("");continue}if(next===".."){output.pop(),done&&output.push("");continue}output.push(next)}return path[0]==="/"&&output.length>0&&output[0]!==""&&output.unshift(""),output.length===1&&output[0]===""?"/":output.join("/")};const isAbsoluteRegex=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^\s]*$/;api$a.isAbsolute=v=>types$4.isString(v)&&isAbsoluteRegex.test(v);api$a.isRelative=v=>types$4.isString(v);const{parseLinkHeader,buildHeaders}=util$5,{LINK_HEADER_CONTEXT}=constants,JsonLdError$9=JsonLdError_1,RequestQueue=requireRequestQueue(),{prependBase:prependBase$2}=url$1,REGEX_LINK_HEADER=/(^|(\r\n))link:/i;var xhr=__name(({secure,headers={},xhr:xhr2}={headers:{}})=>{return headers=buildHeaders(headers),new RequestQueue().wrapLoader(loader);async function loader(url2){if(url2.indexOf("http:")!==0&&url2.indexOf("https:")!==0)throw new JsonLdError$9('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:url2});if(secure&&url2.indexOf("https")!==0)throw new JsonLdError$9(`URL could not be dereferenced; secure mode is enabled and the URL's scheme is not "https".`,"jsonld.InvalidUrl",{code:"loading document failed",url:url2});let req;try{req=await _get(xhr2,url2,headers)}catch(e){throw new JsonLdError$9("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:url2,cause:e})}if(req.status>=400)throw new JsonLdError$9("URL could not be dereferenced: "+req.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:url2,httpStatusCode:req.status});let doc={contextUrl:null,documentUrl:url2,document:req.response},alternate=null;const contentType=req.getResponseHeader("Content-Type");let linkHeader;if(REGEX_LINK_HEADER.test(req.getAllResponseHeaders())&&(linkHeader=req.getResponseHeader("Link")),linkHeader&&contentType!=="application/ld+json"){const linkHeaders=parseLinkHeader(linkHeader),linkedContext=linkHeaders[LINK_HEADER_CONTEXT];if(Array.isArray(linkedContext))throw new JsonLdError$9("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:url2});linkedContext&&(doc.contextUrl=linkedContext.target),alternate=linkHeaders.alternate,alternate&&alternate.type=="application/ld+json"&&!(contentType||"").match(/^application\/(\w*\+)?json$/)&&(doc=await loader(prependBase$2(url2,alternate.target)))}return doc}__name(loader,"loader")},"xhr");function _get(xhr2,url2,headers){xhr2=xhr2||XMLHttpRequest;const req=new xhr2;return new Promise((resolve,reject)=>{req.onload=()=>resolve(req),req.onerror=err=>reject(err),req.open("GET",url2,!0);for(const k in headers)req.setRequestHeader(k,headers[k]);req.send()})}__name(_get,"_get");const xhrLoader=xhr,api$9={};var platformBrowser=api$9;api$9.setupDocumentLoaders=function(jsonld2){typeof XMLHttpRequest<"u"&&(jsonld2.documentLoaders.xhr=xhrLoader,jsonld2.useDocumentLoader("xhr"))};api$9.setupGlobals=function(jsonld2){typeof globalThis.JsonLdProcessor>"u"&&Object.defineProperty(globalThis,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:jsonld2.JsonLdProcessor})};const Yallist=yallist,MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=__name(()=>1,"naiveLength"),_LRUCache=class _LRUCache{constructor(options){if(typeof options=="number"&&(options={max:options}),options||(options={}),options.max&&(typeof options.max!="number"||options.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=options.max||1/0;const lc=options.length||naiveLength;if(this[LENGTH_CALCULATOR]=typeof lc!="function"?naiveLength:lc,this[ALLOW_STALE]=options.stale||!1,options.maxAge&&typeof options.maxAge!="number")throw new TypeError("maxAge must be a number");this[MAX_AGE]=options.maxAge||0,this[DISPOSE]=options.dispose,this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=options.updateAgeOnGet||!1,this.reset()}set max(mL){if(typeof mL!="number"||mL<0)throw new TypeError("max must be a non-negative number");this[MAX]=mL||1/0,trim(this)}get max(){return this[MAX]}set allowStale(allowStale){this[ALLOW_STALE]=!!allowStale}get allowStale(){return this[ALLOW_STALE]}set maxAge(mA){if(typeof mA!="number")throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=mA,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(lC){typeof lC!="function"&&(lC=naiveLength),lC!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=lC,this[LENGTH]=0,this[LRU_LIST].forEach(hit=>{hit.length=this[LENGTH_CALCULATOR](hit.value,hit.key),this[LENGTH]+=hit.length})),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].tail;walker!==null;){const prev=walker.prev;forEachStep(this,fn,walker,thisp),walker=prev}}forEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].head;walker!==null;){const next=walker.next;forEachStep(this,fn,walker,thisp),walker=next}}keys(){return this[LRU_LIST].toArray().map(k=>k.key)}values(){return this[LRU_LIST].toArray().map(k=>k.value)}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach(hit=>this[DISPOSE](hit.key,hit.value)),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map(hit=>isStale(this,hit)?!1:{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)}).toArray().filter(h=>h)}dumpLru(){return this[LRU_LIST]}set(key,value,maxAge){if(maxAge=maxAge||this[MAX_AGE],maxAge&&typeof maxAge!="number")throw new TypeError("maxAge must be a number");const now=maxAge?Date.now():0,len=this[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len>this[MAX])return del(this,this[CACHE].get(key)),!1;const item=this[CACHE].get(key).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](key,item.value)),item.now=now,item.maxAge=maxAge,item.value=value,this[LENGTH]+=len-item.length,item.length=len,this.get(key),trim(this),!0}const hit=new Entry(key,value,len,now,maxAge);return hit.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](key,value),!1):(this[LENGTH]+=hit.length,this[LRU_LIST].unshift(hit),this[CACHE].set(key,this[LRU_LIST].head),trim(this),!0)}has(key){if(!this[CACHE].has(key))return!1;const hit=this[CACHE].get(key).value;return!isStale(this,hit)}get(key){return get(this,key,!0)}peek(key){return get(this,key,!1)}pop(){const node=this[LRU_LIST].tail;return node?(del(this,node),node.value):null}del(key){del(this,this[CACHE].get(key))}load(arr){this.reset();const now=Date.now();for(let l=arr.length-1;l>=0;l--){const hit=arr[l],expiresAt=hit.e||0;if(expiresAt===0)this.set(hit.k,hit.v);else{const maxAge=expiresAt-now;maxAge>0&&this.set(hit.k,hit.v,maxAge)}}}prune(){this[CACHE].forEach((value,key)=>get(this,key,!1))}};__name(_LRUCache,"LRUCache");let LRUCache=_LRUCache;const get=__name((self2,key,doUse)=>{const node=self2[CACHE].get(key);if(node){const hit=node.value;if(isStale(self2,hit)){if(del(self2,node),!self2[ALLOW_STALE])return}else doUse&&(self2[UPDATE_AGE_ON_GET]&&(node.value.now=Date.now()),self2[LRU_LIST].unshiftNode(node));return hit.value}},"get"),isStale=__name((self2,hit)=>{if(!hit||!hit.maxAge&&!self2[MAX_AGE])return!1;const diff=Date.now()-hit.now;return hit.maxAge?diff>hit.maxAge:self2[MAX_AGE]&&diff>self2[MAX_AGE]},"isStale"),trim=__name(self2=>{if(self2[LENGTH]>self2[MAX])for(let walker=self2[LRU_LIST].tail;self2[LENGTH]>self2[MAX]&&walker!==null;){const prev=walker.prev;del(self2,walker),walker=prev}},"trim"),del=__name((self2,node)=>{if(node){const hit=node.value;self2[DISPOSE]&&self2[DISPOSE](hit.key,hit.value),self2[LENGTH]-=hit.length,self2[CACHE].delete(hit.key),self2[LRU_LIST].removeNode(node)}},"del"),_Entry=class _Entry{constructor(key,value,length,now,maxAge){this.key=key,this.value=value,this.length=length,this.now=now,this.maxAge=maxAge||0}};__name(_Entry,"Entry");let Entry=_Entry;const forEachStep=__name((self2,fn,node,thisp)=>{let hit=node.value;isStale(self2,hit)&&(del(self2,node),self2[ALLOW_STALE]||(hit=void 0)),hit&&fn.call(thisp,hit.value,hit.key,self2)},"forEachStep");var lruCache=LRUCache;const LRU$1=lruCache,MAX_ACTIVE_CONTEXTS=10;var _a11,ResolvedContext_1=(_a11=class{constructor({document:document2}){this.document=document2,this.cache=new LRU$1({max:MAX_ACTIVE_CONTEXTS})}getProcessed(activeCtx){return this.cache.get(activeCtx)}setProcessed(activeCtx,processedCtx){this.cache.set(activeCtx,processedCtx)}},__name(_a11,"ResolvedContext"),_a11);const{isArray:_isArray$5,isObject:_isObject$4,isString:_isString$4}=types$7,{asArray:_asArray$4}=util$5,{prependBase:prependBase$1}=url$1,JsonLdError$8=JsonLdError_1,ResolvedContext=ResolvedContext_1,MAX_CONTEXT_URLS=10;var _a12,ContextResolver_1=(_a12=class{constructor({sharedCache}){this.perOpCache=new Map,this.sharedCache=sharedCache}async resolve({activeCtx,context:context2,documentLoader,base,cycles=new Set}){context2&&_isObject$4(context2)&&context2["@context"]&&(context2=context2["@context"]),context2=_asArray$4(context2);const allResolved=[];for(const ctx of context2){if(_isString$4(ctx)){let resolved2=this._get(ctx);resolved2||(resolved2=await this._resolveRemoteContext({activeCtx,url:ctx,documentLoader,base,cycles})),_isArray$5(resolved2)?allResolved.push(...resolved2):allResolved.push(resolved2);continue}if(ctx===null){allResolved.push(new ResolvedContext({document:null}));continue}_isObject$4(ctx)||_throwInvalidLocalContext(context2);const key=JSON.stringify(ctx);let resolved=this._get(key);resolved||(resolved=new ResolvedContext({document:ctx}),this._cacheResolvedContext({key,resolved,tag:"static"})),allResolved.push(resolved)}return allResolved}_get(key){let resolved=this.perOpCache.get(key);if(!resolved){const tagMap=this.sharedCache.get(key);tagMap&&(resolved=tagMap.get("static"),resolved&&this.perOpCache.set(key,resolved))}return resolved}_cacheResolvedContext({key,resolved,tag}){if(this.perOpCache.set(key,resolved),tag!==void 0){let tagMap=this.sharedCache.get(key);tagMap||(tagMap=new Map,this.sharedCache.set(key,tagMap)),tagMap.set(tag,resolved)}return resolved}async _resolveRemoteContext({activeCtx,url:url2,documentLoader,base,cycles}){url2=prependBase$1(base,url2);const{context:context2,remoteDoc}=await this._fetchContext({activeCtx,url:url2,documentLoader,cycles});base=remoteDoc.documentUrl||url2,_resolveContextUrls({context:context2,base});const resolved=await this.resolve({activeCtx,context:context2,documentLoader,base,cycles});return this._cacheResolvedContext({key:url2,resolved,tag:remoteDoc.tag}),resolved}async _fetchContext({activeCtx,url:url2,documentLoader,cycles}){if(cycles.size>MAX_CONTEXT_URLS)throw new JsonLdError$8("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:activeCtx.processingMode==="json-ld-1.0"?"loading remote context failed":"context overflow",max:MAX_CONTEXT_URLS});if(cycles.has(url2))throw new JsonLdError$8("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:activeCtx.processingMode==="json-ld-1.0"?"recursive context inclusion":"context overflow",url:url2});cycles.add(url2);let context2,remoteDoc;try{remoteDoc=await documentLoader(url2),context2=remoteDoc.document||null,_isString$4(context2)&&(context2=JSON.parse(context2))}catch(e){throw new JsonLdError$8("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:url2,cause:e})}if(!_isObject$4(context2))throw new JsonLdError$8("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:url2});return"@context"in context2?context2={"@context":context2["@context"]}:context2={"@context":{}},remoteDoc.contextUrl&&(_isArray$5(context2["@context"])||(context2["@context"]=[context2["@context"]]),context2["@context"].push(remoteDoc.contextUrl)),{context:context2,remoteDoc}}},__name(_a12,"ContextResolver"),_a12);function _throwInvalidLocalContext(ctx){throw new JsonLdError$8("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ctx})}__name(_throwInvalidLocalContext,"_throwInvalidLocalContext");function _resolveContextUrls({context:context2,base}){if(!context2)return;const ctx=context2["@context"];if(_isString$4(ctx)){context2["@context"]=prependBase$1(base,ctx);return}if(_isArray$5(ctx)){for(let i=0;i<ctx.length;++i){const element=ctx[i];if(_isString$4(element)){ctx[i]=prependBase$1(base,element);continue}_isObject$4(element)&&_resolveContextUrls({context:{"@context":element},base})}return}if(_isObject$4(ctx))for(const term in ctx)_resolveContextUrls({context:ctx[term],base})}__name(_resolveContextUrls,"_resolveContextUrls");var NQuads$1=rdfCanonize.NQuads;const JsonLdError$7=JsonLdError_1,{isArray:_isArray$4}=types$7,{asArray:_asArray$3}=util$5,api$8={};var events=api$8;api$8.defaultEventHandler=null;api$8.setupEventHandler=({options={}})=>{const eventHandler=[].concat(options.safe?api$8.safeEventHandler:[],options.eventHandler?_asArray$3(options.eventHandler):[],api$8.defaultEventHandler?api$8.defaultEventHandler:[]);return eventHandler.length===0?null:eventHandler};api$8.handleEvent=({event,options})=>{_handle({event,handlers:options.eventHandler})};function _handle({event,handlers}){let doNext=!0;for(let i=0;doNext&&i<handlers.length;++i){doNext=!1;const handler=handlers[i];if(_isArray$4(handler))doNext=_handle({event,handlers:handler});else if(typeof handler=="function")handler({event,next:()=>{doNext=!0}});else if(typeof handler=="object")event.code in handler?handler[event.code]({event,next:()=>{doNext=!0}}):doNext=!0;else throw new JsonLdError$7("Invalid event handler.","jsonld.InvalidEventHandler",{event})}return doNext}__name(_handle,"_handle");const _notSafeEventCodes=new Set(["empty object","free-floating scalar","invalid @language value","invalid property","null @id value","null @value value","object with only @id","object with only @language","object with only @list","object with only @value","relative @id reference","relative @type reference","relative @vocab reference","reserved @id value","reserved @reverse value","reserved term","blank node predicate","relative graph reference","relative object reference","relative predicate reference","relative subject reference"]);api$8.safeEventHandler=__name(function({event,next}){if(event.level==="warning"&&_notSafeEventCodes.has(event.code))throw new JsonLdError$7("Safe mode validation error.","jsonld.ValidationError",{event});next()},"safeEventHandler");api$8.logEventHandler=__name(function({event,next}){console.log(`EVENT: ${event.message}`,{event}),next()},"logEventHandler");api$8.logWarningEventHandler=__name(function({event,next}){event.level==="warning"&&console.warn(`WARNING: ${event.message}`,{event}),next()},"logWarningEventHandler");api$8.unhandledEventHandler=__name(function({event}){throw new JsonLdError$7("No handler for event.","jsonld.UnhandledEvent",{event})},"unhandledEventHandler");api$8.setDefaultEventHandler=function({eventHandler}={}){api$8.defaultEventHandler=eventHandler?_asArray$3(eventHandler):null};const util$4=util$5,JsonLdError$6=JsonLdError_1,{isArray:_isArray$3,isObject:_isObject$3,isString:_isString$3,isUndefined:_isUndefined$2}=types$7,{isAbsolute:_isAbsoluteIri$2,isRelative:_isRelativeIri,prependBase}=url$1,{handleEvent:_handleEvent$3}=events,{REGEX_BCP47:REGEX_BCP47$2,REGEX_KEYWORD:REGEX_KEYWORD$2,asArray:_asArray$2,compareShortestLeast:_compareShortestLeast$1}=util$5,INITIAL_CONTEXT_CACHE=new Map,INITIAL_CONTEXT_CACHE_MAX_SIZE=1e4,api$7={};var context=api$7;api$7.process=async({activeCtx,localCtx,options,propagate=!0,overrideProtected=!1,cycles=new Set})=>{if(_isObject$3(localCtx)&&"@context"in localCtx&&_isArray$3(localCtx["@context"])&&(localCtx=localCtx["@context"]),_asArray$2(localCtx).length===0)return activeCtx;const events2=[],eventCaptureHandler=[({event,next})=>{events2.push(event),next()}];options.eventHandler&&eventCaptureHandler.push(options.eventHandler);const originalOptions=options;options={...options,eventHandler:eventCaptureHandler};const resolved=await options.contextResolver.resolve({activeCtx,context:localCtx,documentLoader:options.documentLoader,base:options.base});_isObject$3(resolved[0].document)&&typeof resolved[0].document["@propagate"]=="boolean"&&(propagate=resolved[0].document["@propagate"]);let rval=activeCtx;!propagate&&!rval.previousContext&&(rval=rval.clone(),rval.previousContext=activeCtx);for(const resolvedContext of resolved){let{document:ctx}=resolvedContext;if(activeCtx=rval,ctx===null){if(!overrideProtected&&Object.keys(activeCtx.protected).length!==0)throw new JsonLdError$6("Tried to nullify a context with protected terms outside of a term definition.","jsonld.SyntaxError",{code:"invalid context nullification"});rval=activeCtx=api$7.getInitialContext(options).clone();continue}const processed=resolvedContext.getProcessed(activeCtx);if(processed){if(originalOptions.eventHandler)for(const event of processed.events)_handleEvent$3({event,options:originalOptions});rval=activeCtx=processed.context;continue}if(_isObject$3(ctx)&&"@context"in ctx&&(ctx=ctx["@context"]),!_isObject$3(ctx))throw new JsonLdError$6("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:ctx});rval=rval.clone();const defined=new Map;if("@version"in ctx){if(ctx["@version"]!==1.1)throw new JsonLdError$6("Unsupported JSON-LD version: "+ctx["@version"],"jsonld.UnsupportedVersion",{code:"invalid @version value",context:ctx});if(activeCtx.processingMode&&activeCtx.processingMode==="json-ld-1.0")throw new JsonLdError$6("@version: "+ctx["@version"]+" not compatible with "+activeCtx.processingMode,"jsonld.ProcessingModeConflict",{code:"processing mode conflict",context:ctx});rval.processingMode="json-ld-1.1",rval["@version"]=ctx["@version"],defined.set("@version",!0)}if(rval.processingMode=rval.processingMode||activeCtx.processingMode,"@base"in ctx){let base=ctx["@base"];if(!(base===null||_isAbsoluteIri$2(base)))if(_isRelativeIri(base))base=prependBase(rval["@base"],base);else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI, a relative IRI, or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:ctx});rval["@base"]=base,defined.set("@base",!0)}if("@vocab"in ctx){const value=ctx["@vocab"];if(value===null)delete rval["@vocab"];else if(_isString$3(value)){if(!_isAbsoluteIri$2(value)&&api$7.processingMode(rval,1))throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ctx});{const vocab=_expandIri$3(rval,value,{vocab:!0,base:!0},void 0,void 0,options);_isAbsoluteIri$2(vocab)||options.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"relative @vocab reference",level:"warning",message:"Relative @vocab reference found.",details:{vocab}},options}),rval["@vocab"]=vocab}}else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:ctx});defined.set("@vocab",!0)}if("@language"in ctx){const value=ctx["@language"];if(value===null)delete rval["@language"];else if(_isString$3(value))value.match(REGEX_BCP47$2)||options.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:value}},options}),rval["@language"]=value.toLowerCase();else throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:ctx});defined.set("@language",!0)}if("@direction"in ctx){const value=ctx["@direction"];if(activeCtx.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @direction not compatible with "+activeCtx.processingMode,"jsonld.SyntaxError",{code:"invalid context member",context:ctx});if(value===null)delete rval["@direction"];else{if(value!=="ltr"&&value!=="rtl")throw new JsonLdError$6('Invalid JSON-LD syntax; the value of "@direction" in a @context must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:ctx});rval["@direction"]=value}defined.set("@direction",!0)}if("@propagate"in ctx){const value=ctx["@propagate"];if(activeCtx.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @propagate not compatible with "+activeCtx.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ctx});if(typeof value!="boolean")throw new JsonLdError$6("Invalid JSON-LD syntax; @propagate value must be a boolean.","jsonld.SyntaxError",{code:"invalid @propagate value",context:localCtx});defined.set("@propagate",!0)}if("@import"in ctx){const value=ctx["@import"];if(activeCtx.processingMode==="json-ld-1.0")throw new JsonLdError$6("Invalid JSON-LD syntax; @import not compatible with "+activeCtx.processingMode,"jsonld.SyntaxError",{code:"invalid context entry",context:ctx});if(!_isString$3(value))throw new JsonLdError$6("Invalid JSON-LD syntax; @import must be a string.","jsonld.SyntaxError",{code:"invalid @import value",context:localCtx});const resolvedImport=await options.contextResolver.resolve({activeCtx,context:value,documentLoader:options.documentLoader,base:options.base});if(resolvedImport.length!==1)throw new JsonLdError$6("Invalid JSON-LD syntax; @import must reference a single context.","jsonld.SyntaxError",{code:"invalid remote context",context:localCtx});const processedImport=resolvedImport[0].getProcessed(activeCtx);if(processedImport)ctx=processedImport;else{const importCtx=resolvedImport[0].document;if("@import"in importCtx)throw new JsonLdError$6("Invalid JSON-LD syntax: imported context must not include @import.","jsonld.SyntaxError",{code:"invalid context entry",context:localCtx});for(const key in importCtx)ctx.hasOwnProperty(key)||(ctx[key]=importCtx[key]);resolvedImport[0].setProcessed(activeCtx,ctx)}defined.set("@import",!0)}defined.set("@protected",ctx["@protected"]||!1);for(const key in ctx)if(api$7.createTermDefinition({activeCtx:rval,localCtx:ctx,term:key,defined,options,overrideProtected}),_isObject$3(ctx[key])&&"@context"in ctx[key]){const keyCtx=ctx[key]["@context"];let process=!0;if(_isString$3(keyCtx)){const url2=prependBase(options.base,keyCtx);cycles.has(url2)?process=!1:cycles.add(url2)}if(process)try{await api$7.process({activeCtx:rval.clone(),localCtx:ctx[key]["@context"],overrideProtected:!0,options,cycles})}catch{throw new JsonLdError$6("Invalid JSON-LD syntax; invalid scoped context.","jsonld.SyntaxError",{code:"invalid scoped context",context:ctx[key]["@context"],term:key})}}resolvedContext.setProcessed(activeCtx,{context:rval,events:events2})}return rval};api$7.createTermDefinition=({activeCtx,localCtx,term,defined,options,overrideProtected=!1})=>{if(defined.has(term)){if(defined.get(term))return;throw new JsonLdError$6("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:localCtx,term})}defined.set(term,!1);let value;if(localCtx.hasOwnProperty(term)&&(value=localCtx[term]),term==="@type"&&_isObject$3(value)&&(value["@container"]||"@set")==="@set"&&api$7.processingMode(activeCtx,1.1)){const validKeys2=["@container","@id","@protected"],keys=Object.keys(value);if(keys.length===0||keys.some(k=>!validKeys2.includes(k)))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:localCtx,term})}else{if(api$7.isKeyword(term))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:localCtx,term});if(term.match(REGEX_KEYWORD$2)){options.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved term",level:"warning",message:'Terms beginning with "@" are reserved for future use and dropped.',details:{term}},options});return}else if(term==="")throw new JsonLdError$6("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:localCtx})}const previousMapping=activeCtx.mappings.get(term);activeCtx.mappings.has(term)&&activeCtx.mappings.delete(term);let simpleTerm=!1;if((_isString$3(value)||value===null)&&(simpleTerm=!0,value={"@id":value}),!_isObject$3(value))throw new JsonLdError$6("Invalid JSON-LD syntax; @context term values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:localCtx});const mapping={};activeCtx.mappings.set(term,mapping),mapping.reverse=!1;const validKeys=["@container","@id","@language","@reverse","@type"];api$7.processingMode(activeCtx,1.1)&&validKeys.push("@context","@direction","@index","@nest","@prefix","@protected");for(const kw in value)if(!validKeys.includes(kw))throw new JsonLdError$6("Invalid JSON-LD syntax; a term definition must not contain "+kw,"jsonld.SyntaxError",{code:"invalid term definition",context:localCtx});const colon=term.indexOf(":");if(mapping._termHasColon=colon>0,"@reverse"in value){if("@id"in value)throw new JsonLdError$6("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:localCtx});if("@nest"in value)throw new JsonLdError$6("Invalid JSON-LD syntax; a @reverse term definition must not contain @nest.","jsonld.SyntaxError",{code:"invalid reverse property",context:localCtx});const reverse=value["@reverse"];if(!_isString$3(reverse))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx});if(reverse.match(REGEX_KEYWORD$2)){options.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @reverse value",level:"warning",message:'@reverse values beginning with "@" are reserved for future use and dropped.',details:{reverse}},options}),previousMapping?activeCtx.mappings.set(term,previousMapping):activeCtx.mappings.delete(term);return}const id2=_expandIri$3(activeCtx,reverse,{vocab:!0,base:!1},localCtx,defined,options);if(!_isAbsoluteIri$2(id2))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx});mapping["@id"]=id2,mapping.reverse=!0}else if("@id"in value){let id2=value["@id"];if(id2&&!_isString$3(id2))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx});if(id2===null)mapping["@id"]=null;else if(!api$7.isKeyword(id2)&&id2.match(REGEX_KEYWORD$2)){options.eventHandler&&_handleEvent$3({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:'@id values beginning with "@" are reserved for future use and dropped.',details:{id:id2}},options}),previousMapping?activeCtx.mappings.set(term,previousMapping):activeCtx.mappings.delete(term);return}else if(id2!==term){if(id2=_expandIri$3(activeCtx,id2,{vocab:!0,base:!1},localCtx,defined,options),!_isAbsoluteIri$2(id2)&&!api$7.isKeyword(id2))throw new JsonLdError$6("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx});if(term.match(/(?::[^:])|\//)){const termDefined=new Map(defined).set(term,!0);if(_expandIri$3(activeCtx,term,{vocab:!0,base:!1},localCtx,termDefined,options)!==id2)throw new JsonLdError$6("Invalid JSON-LD syntax; term in form of IRI must expand to definition.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx})}mapping["@id"]=id2,mapping._prefix=simpleTerm&&!mapping._termHasColon&&id2.match(/[:\/\?#\[\]@]$/)}}if(!("@id"in mapping))if(mapping._termHasColon){const prefix=term.substr(0,colon);if(localCtx.hasOwnProperty(prefix)&&api$7.createTermDefinition({activeCtx,localCtx,term:prefix,defined,options}),activeCtx.mappings.has(prefix)){const suffix=term.substr(colon+1);mapping["@id"]=activeCtx.mappings.get(prefix)["@id"]+suffix}else mapping["@id"]=term}else if(term==="@type")mapping["@id"]=term;else{if(!("@vocab"in activeCtx))throw new JsonLdError$6("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:localCtx,term});mapping["@id"]=activeCtx["@vocab"]+term}if((value["@protected"]===!0||defined.get("@protected")===!0&&value["@protected"]!==!1)&&(activeCtx.protected[term]=!0,mapping.protected=!0),defined.set(term,!0),"@type"in value){let type=value["@type"];if(!_isString$3(type))throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx});if(type==="@json"||type==="@none"){if(api$7.processingMode(activeCtx,1))throw new JsonLdError$6(`Invalid JSON-LD syntax; an @context @type value must not be "${type}" in JSON-LD 1.0 mode.`,"jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx})}else if(type!=="@id"&&type!=="@vocab"){if(type=_expandIri$3(activeCtx,type,{vocab:!0,base:!1},localCtx,defined,options),!_isAbsoluteIri$2(type))throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx});if(type.indexOf("_:")===0)throw new JsonLdError$6("Invalid JSON-LD syntax; an @context @type value must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx})}mapping["@type"]=type}if("@container"in value){const container=_isString$3(value["@container"])?[value["@container"]]:value["@container"]||[],validContainers=["@list","@set","@index","@language"];let isValid=!0;const hasSet=container.includes("@set");if(api$7.processingMode(activeCtx,1.1)){if(validContainers.push("@graph","@id","@type"),container.includes("@list")){if(container.length!==1)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container with @list must have no other values","jsonld.SyntaxError",{code:"invalid container mapping",context:localCtx})}else if(container.includes("@graph")){if(container.some(key=>key!=="@graph"&&key!=="@id"&&key!=="@index"&&key!=="@set"))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container with @graph must have no other values other than @id, @index, and @set","jsonld.SyntaxError",{code:"invalid container mapping",context:localCtx})}else isValid&=container.length<=(hasSet?2:1);if(container.includes("@type")&&(mapping["@type"]=mapping["@type"]||"@id",!["@id","@vocab"].includes(mapping["@type"])))throw new JsonLdError$6("Invalid JSON-LD syntax; container: @type requires @type to be @id or @vocab.","jsonld.SyntaxError",{code:"invalid type mapping",context:localCtx})}else isValid&=!_isArray$3(value["@container"]),isValid&=container.length<=1;if(isValid&=container.every(c=>validContainers.includes(c)),isValid&=!(hasSet&&container.includes("@list")),!isValid)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container value must be one of the following: "+validContainers.join(", "),"jsonld.SyntaxError",{code:"invalid container mapping",context:localCtx});if(mapping.reverse&&!container.every(c=>["@index","@set"].includes(c)))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:localCtx});mapping["@container"]=container}if("@index"in value){if(!("@container"in value)||!mapping["@container"].includes("@index"))throw new JsonLdError$6(`Invalid JSON-LD syntax; @index without @index in @container: "${value["@index"]}" on term "${term}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:localCtx});if(!_isString$3(value["@index"])||value["@index"].indexOf("@")===0)throw new JsonLdError$6(`Invalid JSON-LD syntax; @index must expand to an IRI: "${value["@index"]}" on term "${term}".`,"jsonld.SyntaxError",{code:"invalid term definition",context:localCtx});mapping["@index"]=value["@index"]}if("@context"in value&&(mapping["@context"]=value["@context"]),"@language"in value&&!("@type"in value)){let language=value["@language"];if(language!==null&&!_isString$3(language))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:localCtx});language!==null&&(language=language.toLowerCase()),mapping["@language"]=language}if("@prefix"in value){if(term.match(/:|\//))throw new JsonLdError$6("Invalid JSON-LD syntax; @context @prefix used on a compact IRI term","jsonld.SyntaxError",{code:"invalid term definition",context:localCtx});if(api$7.isKeyword(mapping["@id"]))throw new JsonLdError$6("Invalid JSON-LD syntax; keywords may not be used as prefixes","jsonld.SyntaxError",{code:"invalid term definition",context:localCtx});if(typeof value["@prefix"]=="boolean")mapping._prefix=value["@prefix"]===!0;else throw new JsonLdError$6("Invalid JSON-LD syntax; @context value for @prefix must be boolean","jsonld.SyntaxError",{code:"invalid @prefix value",context:localCtx})}if("@direction"in value){const direction=value["@direction"];if(direction!==null&&direction!=="ltr"&&direction!=="rtl")throw new JsonLdError$6('Invalid JSON-LD syntax; @direction value must be null, "ltr", or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",context:localCtx});mapping["@direction"]=direction}if("@nest"in value){const nest2=value["@nest"];if(!_isString$3(nest2)||nest2!=="@nest"&&nest2.indexOf("@")===0)throw new JsonLdError$6("Invalid JSON-LD syntax; @context @nest value must be a string which is not a keyword other than @nest.","jsonld.SyntaxError",{code:"invalid @nest value",context:localCtx});mapping["@nest"]=nest2}// disallow aliasing @context and @preserve
const id=mapping["@id"];if(id==="@context"||id==="@preserve")throw new JsonLdError$6("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:localCtx});if(previousMapping&&previousMapping.protected&&!overrideProtected&&(activeCtx.protected[term]=!0,mapping.protected=!0,!_deepCompare(previousMapping,mapping)))throw new JsonLdError$6("Invalid JSON-LD syntax; tried to redefine a protected term.","jsonld.SyntaxError",{code:"protected term redefinition",context:localCtx,term})};api$7.expandIri=(activeCtx,value,relativeTo,options)=>_expandIri$3(activeCtx,value,relativeTo,void 0,void 0,options);function _expandIri$3(activeCtx,value,relativeTo,localCtx,defined,options){if(value===null||!_isString$3(value)||api$7.isKeyword(value))return value;if(value.match(REGEX_KEYWORD$2))return null;if(localCtx&&localCtx.hasOwnProperty(value)&&defined.get(value)!==!0&&api$7.createTermDefinition({activeCtx,localCtx,term:value,defined,options}),relativeTo=relativeTo||{},relativeTo.vocab){const mapping=activeCtx.mappings.get(value);if(mapping===null)return null;if(_isObject$3(mapping)&&"@id"in mapping)return mapping["@id"]}const colon=value.indexOf(":");if(colon>0){const prefix=value.substr(0,colon),suffix=value.substr(colon+1);if(prefix==="_"||suffix.indexOf("//")===0)return value;localCtx&&localCtx.hasOwnProperty(prefix)&&api$7.createTermDefinition({activeCtx,localCtx,term:prefix,defined,options});const mapping=activeCtx.mappings.get(prefix);if(mapping&&mapping._prefix)return mapping["@id"]+suffix;if(_isAbsoluteIri$2(value))return value}if(relativeTo.vocab&&"@vocab"in activeCtx)value=activeCtx["@vocab"]+value;else if(relativeTo.base){let prependedResult,base;"@base"in activeCtx?activeCtx["@base"]?(base=prependBase(options.base,activeCtx["@base"]),prependedResult=prependBase(base,value)):(base=activeCtx["@base"],prependedResult=value):(base=options.base,prependedResult=prependBase(options.base,value)),value=prependedResult}return value}__name(_expandIri$3,"_expandIri$3");api$7.getInitialContext=options=>{const key=JSON.stringify({processingMode:options.processingMode}),cached=INITIAL_CONTEXT_CACHE.get(key);if(cached)return cached;const initialContext={processingMode:options.processingMode,mappings:new Map,inverse:null,getInverse:_createInverseContext,clone:_cloneActiveContext,revertToPreviousContext:_revertToPreviousContext,protected:{}};return INITIAL_CONTEXT_CACHE.size===INITIAL_CONTEXT_CACHE_MAX_SIZE&&INITIAL_CONTEXT_CACHE.clear(),INITIAL_CONTEXT_CACHE.set(key,initialContext),initialContext;function _createInverseContext(){const activeCtx=this;if(activeCtx.inverse)return activeCtx.inverse;const inverse=activeCtx.inverse={},fastCurieMap=activeCtx.fastCurieMap={},irisToTerms={},defaultLanguage=(activeCtx["@language"]||"@none").toLowerCase(),defaultDirection=activeCtx["@direction"],mappings=activeCtx.mappings,terms=[...mappings.keys()].sort(_compareShortestLeast$1);for(const term of terms){const mapping=mappings.get(term);if(mapping===null)continue;let container=mapping["@container"]||"@none";if(container=[].concat(container).sort().join(""),mapping["@id"]===null)continue;const ids=_asArray$2(mapping["@id"]);for(const iri of ids){let entry=inverse[iri];const isKeyword2=api$7.isKeyword(iri);if(entry)!isKeyword2&&!mapping._termHasColon&&irisToTerms[iri].push(term);else if(inverse[iri]=entry={},!isKeyword2&&!mapping._termHasColon){irisToTerms[iri]=[term];const fastCurieEntry={iri,terms:irisToTerms[iri]};iri[0]in fastCurieMap?fastCurieMap[iri[0]].push(fastCurieEntry):fastCurieMap[iri[0]]=[fastCurieEntry]}if(entry[container]||(entry[container]={"@language":{},"@type":{},"@any":{}}),entry=entry[container],_addPreferredTerm(term,entry["@any"],"@none"),mapping.reverse)_addPreferredTerm(term,entry["@type"],"@reverse");else if(mapping["@type"]==="@none")_addPreferredTerm(term,entry["@any"],"@none"),_addPreferredTerm(term,entry["@language"],"@none"),_addPreferredTerm(term,entry["@type"],"@none");else if("@type"in mapping)_addPreferredTerm(term,entry["@type"],mapping["@type"]);else if("@language"in mapping&&"@direction"in mapping){const language=mapping["@language"],direction=mapping["@direction"];language&&direction?_addPreferredTerm(term,entry["@language"],`${language}_${direction}`.toLowerCase()):language?_addPreferredTerm(term,entry["@language"],language.toLowerCase()):direction?_addPreferredTerm(term,entry["@language"],`_${direction}`):_addPreferredTerm(term,entry["@language"],"@null")}else"@language"in mapping?_addPreferredTerm(term,entry["@language"],(mapping["@language"]||"@null").toLowerCase()):"@direction"in mapping?mapping["@direction"]?_addPreferredTerm(term,entry["@language"],`_${mapping["@direction"]}`):_addPreferredTerm(term,entry["@language"],"@none"):defaultDirection?(_addPreferredTerm(term,entry["@language"],`_${defaultDirection}`),_addPreferredTerm(term,entry["@language"],"@none"),_addPreferredTerm(term,entry["@type"],"@none")):(_addPreferredTerm(term,entry["@language"],defaultLanguage),_addPreferredTerm(term,entry["@language"],"@none"),_addPreferredTerm(term,entry["@type"],"@none"))}}for(const key2 in fastCurieMap)_buildIriMap(fastCurieMap,key2,1);return inverse}__name(_createInverseContext,"_createInverseContext");function _buildIriMap(iriMap,key2,idx){const entries=iriMap[key2],next=iriMap[key2]={};let iri,letter;for(const entry of entries)iri=entry.iri,idx>=iri.length?letter="":letter=iri[idx],letter in next?next[letter].push(entry):next[letter]=[entry];for(const key3 in next)key3!==""&&_buildIriMap(next,key3,idx+1)}__name(_buildIriMap,"_buildIriMap");function _addPreferredTerm(term,entry,typeOrLanguageValue){entry.hasOwnProperty(typeOrLanguageValue)||(entry[typeOrLanguageValue]=term)}__name(_addPreferredTerm,"_addPreferredTerm");function _cloneActiveContext(){const child={};return child.mappings=util$4.clone(this.mappings),child.clone=this.clone,child.inverse=null,child.getInverse=this.getInverse,child.protected=util$4.clone(this.protected),this.previousContext&&(child.previousContext=this.previousContext.clone()),child.revertToPreviousContext=this.revertToPreviousContext,"@base"in this&&(child["@base"]=this["@base"]),"@language"in this&&(child["@language"]=this["@language"]),"@vocab"in this&&(child["@vocab"]=this["@vocab"]),child}__name(_cloneActiveContext,"_cloneActiveContext");function _revertToPreviousContext(){return this.previousContext?this.previousContext.clone():this}__name(_revertToPreviousContext,"_revertToPreviousContext")};api$7.getContextValue=(ctx,key,type)=>{if(key===null)return type==="@context"?void 0:null;if(ctx.mappings.has(key)){const entry=ctx.mappings.get(key);if(_isUndefined$2(type))return entry;if(entry.hasOwnProperty(type))return entry[type]}if(type==="@language"&&type in ctx||type==="@direction"&&type in ctx)return ctx[type];if(type!=="@context")return null};api$7.processingMode=(activeCtx,version)=>version.toString()>="1.1"?!activeCtx.processingMode||activeCtx.processingMode>="json-ld-"+version.toString():activeCtx.processingMode==="json-ld-1.0";api$7.isKeyword=v=>{if(!_isString$3(v)||v[0]!=="@")return!1;switch(v){case"@base":case"@container":case"@context":case"@default":case"@direction":case"@embed":case"@explicit":case"@graph":case"@id":case"@included":case"@index":case"@json":case"@language":case"@list":case"@nest":case"@none":case"@omitDefault":case"@prefix":case"@preserve":case"@protected":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@version":case"@vocab":return!0}return!1};function _deepCompare(x1,x2){if(!(x1&&typeof x1=="object")||!(x2&&typeof x2=="object"))return x1===x2;const x1Array=Array.isArray(x1);if(x1Array!==Array.isArray(x2))return!1;if(x1Array){if(x1.length!==x2.length)return!1;for(let i=0;i<x1.length;++i)if(!_deepCompare(x1[i],x2[i]))return!1;return!0}const k1s=Object.keys(x1),k2s=Object.keys(x2);if(k1s.length!==k2s.length)return!1;for(const k1 in x1){let v1=x1[k1],v2=x2[k1];if(k1==="@container"&&Array.isArray(v1)&&Array.isArray(v2)&&(v1=v1.slice().sort(),v2=v2.slice().sort()),!_deepCompare(v1,v2))return!1}return!0}__name(_deepCompare,"_deepCompare");const JsonLdError$5=JsonLdError_1,{isArray:_isArray$2,isObject:_isObject$2,isEmptyObject:_isEmptyObject,isString:_isString$2,isUndefined:_isUndefined$1}=types$7,{isList:_isList$1,isValue:_isValue$1,isGraph:_isGraph$1,isSubject:_isSubject}=graphTypes$5,{expandIri:_expandIri$2,getContextValue:_getContextValue$1,isKeyword:_isKeyword$1,process:_processContext$2,processingMode:_processingMode$2}=context,{isAbsolute:_isAbsoluteIri$1}=url$1,{REGEX_BCP47:REGEX_BCP47$1,REGEX_KEYWORD:REGEX_KEYWORD$1,addValue:_addValue$2,asArray:_asArray$1,getValues:_getValues,validateTypeValue:_validateTypeValue}=util$5,{handleEvent:_handleEvent$2}=events,api$6={};var expand=api$6;api$6.expand=async({activeCtx,activeProperty=null,element,options={},insideList=!1,insideIndex=!1,typeScopedContext=null})=>{if(element==null)return null;if(activeProperty==="@default"&&(options=Object.assign({},options,{isFrame:!1})),!_isArray$2(element)&&!_isObject$2(element))return!insideList&&(activeProperty===null||_expandIri$2(activeCtx,activeProperty,{vocab:!0},options)==="@graph")?(options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"free-floating scalar",level:"warning",message:"Dropping free-floating scalar not in a list.",details:{value:element}},options}),null):_expandValue({activeCtx,activeProperty,value:element,options});if(_isArray$2(element)){let rval2=[];const container=_getContextValue$1(activeCtx,activeProperty,"@container")||[];insideList=insideList||container.includes("@list");for(let i=0;i<element.length;++i){let e=await api$6.expand({activeCtx,activeProperty,element:element[i],options,insideIndex,typeScopedContext});insideList&&_isArray$2(e)&&(e={"@list":e}),e!==null&&(_isArray$2(e)?rval2=rval2.concat(e):rval2.push(e))}return rval2}const expandedActiveProperty=_expandIri$2(activeCtx,activeProperty,{vocab:!0},options),propertyScopedCtx=_getContextValue$1(activeCtx,activeProperty,"@context");typeScopedContext=typeScopedContext||(activeCtx.previousContext?activeCtx:null);let keys=Object.keys(element).sort(),mustRevert=!insideIndex;if(mustRevert&&typeScopedContext&&keys.length<=2&&!keys.includes("@context"))for(const key of keys){const expandedProperty=_expandIri$2(typeScopedContext,key,{vocab:!0},options);if(expandedProperty==="@value"){mustRevert=!1,activeCtx=typeScopedContext;break}if(expandedProperty==="@id"&&keys.length===1){mustRevert=!1;break}}mustRevert&&(activeCtx=activeCtx.revertToPreviousContext()),_isUndefined$1(propertyScopedCtx)||(activeCtx=await _processContext$2({activeCtx,localCtx:propertyScopedCtx,propagate:!0,overrideProtected:!0,options})),"@context"in element&&(activeCtx=await _processContext$2({activeCtx,localCtx:element["@context"],options})),typeScopedContext=activeCtx;let typeKey=null;for(const key of keys)if(_expandIri$2(activeCtx,key,{vocab:!0},options)==="@type"){typeKey=typeKey||key;const value=element[key],types2=Array.isArray(value)?value.length>1?value.slice().sort():value:[value];for(const type of types2){const ctx=_getContextValue$1(typeScopedContext,type,"@context");_isUndefined$1(ctx)||(activeCtx=await _processContext$2({activeCtx,localCtx:ctx,options,propagate:!1}))}}let rval={};await _expandObject({activeCtx,activeProperty,expandedActiveProperty,element,expandedParent:rval,options,insideList,typeKey,typeScopedContext}),keys=Object.keys(rval);let count=keys.length;if("@value"in rval){if("@type"in rval&&("@language"in rval||"@direction"in rval))throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and either "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:rval});let validCount=count-1;if("@type"in rval&&(validCount-=1),"@index"in rval&&(validCount-=1),"@language"in rval&&(validCount-=1),"@direction"in rval&&(validCount-=1),validCount!==0)throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and either "@type" or either or both "@language" or "@direction".',"jsonld.SyntaxError",{code:"invalid value object",element:rval});const values=rval["@value"]===null?[]:_asArray$1(rval["@value"]),types2=_getValues(rval,"@type");if(!(_processingMode$2(activeCtx,1.1)&&types2.includes("@json")&&types2.length===1))if(values.length===0)options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"null @value value",level:"warning",message:"Dropping null @value value.",details:{value:rval}},options}),rval=null;else{if(!values.every(v=>_isString$2(v)||_isEmptyObject(v))&&"@language"in rval)throw new JsonLdError$5("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:rval});if(!types2.every(t=>_isAbsoluteIri$1(t)&&!(_isString$2(t)&&t.indexOf("_:")===0)||_isEmptyObject(t)))throw new JsonLdError$5('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:rval})}}else if("@type"in rval&&!_isArray$2(rval["@type"]))rval["@type"]=[rval["@type"]];else if("@set"in rval||"@list"in rval){if(count>1&&!(count===2&&"@index"in rval))throw new JsonLdError$5('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:rval});"@set"in rval&&(rval=rval["@set"],keys=Object.keys(rval),count=keys.length)}else count===1&&"@language"in rval&&(options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"object with only @language",level:"warning",message:"Dropping object with only @language.",details:{value:rval}},options}),rval=null);return _isObject$2(rval)&&!options.keepFreeFloatingNodes&&!insideList&&(activeProperty===null||expandedActiveProperty==="@graph"||(_getContextValue$1(activeCtx,activeProperty,"@container")||[]).includes("@graph"))&&(rval=_dropUnsafeObject({value:rval,count,options})),rval};function _dropUnsafeObject({value,count,options}){if(count===0||"@value"in value||"@list"in value||count===1&&"@id"in value){if(options.eventHandler){let code,message;count===0?(code="empty object",message="Dropping empty object."):"@value"in value?(code="object with only @value",message="Dropping object with only @value."):"@list"in value?(code="object with only @list",message="Dropping object with only @list."):count===1&&"@id"in value&&(code="object with only @id",message="Dropping object with only @id."),_handleEvent$2({event:{type:["JsonLdEvent"],code,level:"warning",message,details:{value}},options})}return null}return value}__name(_dropUnsafeObject,"_dropUnsafeObject");async function _expandObject({activeCtx,activeProperty,expandedActiveProperty,element,expandedParent,options={},insideList,typeKey,typeScopedContext}){const keys=Object.keys(element).sort(),nests=[];let unexpandedValue;const isJsonType=element[typeKey]&&_expandIri$2(activeCtx,_isArray$2(element[typeKey])?element[typeKey][0]:element[typeKey],{vocab:!0},{...options,typeExpansion:!0})==="@json";for(const key of keys){let value=element[key],expandedValue;if(key==="@context")continue;const expandedProperty=_expandIri$2(activeCtx,key,{vocab:!0},options);if(expandedProperty===null||!(_isAbsoluteIri$1(expandedProperty)||_isKeyword$1(expandedProperty))){options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid property",level:"warning",message:"Dropping property that did not expand into an absolute IRI or keyword.",details:{property:key,expandedProperty}},options});continue}if(_isKeyword$1(expandedProperty)){if(expandedActiveProperty==="@reverse")throw new JsonLdError$5("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value});if(expandedProperty in expandedParent&&expandedProperty!=="@included"&&expandedProperty!=="@type")throw new JsonLdError$5("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:expandedProperty})}if(expandedProperty==="@id"){if(!_isString$2(value)){if(!options.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value});if(_isObject$2(value)){if(!_isEmptyObject(value))throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value})}else if(_isArray$2(value)){if(!value.every(v=>_isString$2(v)))throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value})}else throw new JsonLdError$5('Invalid JSON-LD syntax; "@id" value an empty object or array of strings, if framing',"jsonld.SyntaxError",{code:"invalid @id value",value})}_addValue$2(expandedParent,"@id",_asArray$1(value).map(v=>{if(_isString$2(v)){const ve2=_expandIri$2(activeCtx,v,{base:!0},options);return options.eventHandler&&(ve2===null?_handleEvent$2(v===null?{event:{type:["JsonLdEvent"],code:"null @id value",level:"warning",message:"Null @id found.",details:{id:v}},options}:{event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:v}},options}):_isAbsoluteIri$1(ve2)||_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @id reference",level:"warning",message:"Relative @id reference found.",details:{id:v,expandedId:ve2}},options})),ve2}return v}),{propertyIsArray:options.isFrame});continue}if(expandedProperty==="@type"){_isObject$2(value)&&(value=Object.fromEntries(Object.entries(value).map(([k,v])=>[_expandIri$2(typeScopedContext,k,{vocab:!0}),_asArray$1(v).map(vv=>_expandIri$2(typeScopedContext,vv,{base:!0,vocab:!0},{...options,typeExpansion:!0}))]))),_validateTypeValue(value,options.isFrame),_addValue$2(expandedParent,"@type",_asArray$1(value).map(v=>{if(_isString$2(v)){const ve2=_expandIri$2(typeScopedContext,v,{base:!0,vocab:!0},{...options,typeExpansion:!0});return ve2!=="@json"&&!_isAbsoluteIri$1(ve2)&&options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"relative @type reference",level:"warning",message:"Relative @type reference found.",details:{type:v}},options}),ve2}return v}),{propertyIsArray:!!options.isFrame});continue}if(expandedProperty==="@included"&&_processingMode$2(activeCtx,1.1)){const includedResult=_asArray$1(await api$6.expand({activeCtx,activeProperty,element:value,options}));if(!includedResult.every(v=>_isSubject(v)))throw new JsonLdError$5("Invalid JSON-LD syntax; values of @included must expand to node objects.","jsonld.SyntaxError",{code:"invalid @included value",value});_addValue$2(expandedParent,"@included",includedResult,{propertyIsArray:!0});continue}if(expandedProperty==="@graph"&&!(_isObject$2(value)||_isArray$2(value)))throw new JsonLdError$5('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value});if(expandedProperty==="@value"){unexpandedValue=value,isJsonType&&_processingMode$2(activeCtx,1.1)?expandedParent["@value"]=value:_addValue$2(expandedParent,"@value",value,{propertyIsArray:options.isFrame});continue}if(expandedProperty==="@language"){if(value===null)continue;if(!_isString$2(value)&&!options.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value});value=_asArray$1(value).map(v=>_isString$2(v)?v.toLowerCase():v);for(const language of value)_isString$2(language)&&!language.match(REGEX_BCP47$1)&&options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language}},options});_addValue$2(expandedParent,"@language",value,{propertyIsArray:options.isFrame});continue}if(expandedProperty==="@direction"){if(!_isString$2(value)&&!options.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@direction" value must be a string.',"jsonld.SyntaxError",{code:"invalid base direction",value});value=_asArray$1(value);for(const dir of value)if(_isString$2(dir)&&dir!=="ltr"&&dir!=="rtl")throw new JsonLdError$5('Invalid JSON-LD syntax; "@direction" must be "ltr" or "rtl".',"jsonld.SyntaxError",{code:"invalid base direction",value});_addValue$2(expandedParent,"@direction",value,{propertyIsArray:options.isFrame});continue}if(expandedProperty==="@index"){if(!_isString$2(value))throw new JsonLdError$5('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value});_addValue$2(expandedParent,"@index",value);continue}if(expandedProperty==="@reverse"){if(!_isObject$2(value))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value});if(expandedValue=await api$6.expand({activeCtx,activeProperty:"@reverse",element:value,options}),"@reverse"in expandedValue)for(const property in expandedValue["@reverse"])_addValue$2(expandedParent,property,expandedValue["@reverse"][property],{propertyIsArray:!0});let reverseMap=expandedParent["@reverse"]||null;for(const property in expandedValue){if(property==="@reverse")continue;reverseMap===null&&(reverseMap=expandedParent["@reverse"]={}),_addValue$2(reverseMap,property,[],{propertyIsArray:!0});const items=expandedValue[property];for(let ii2=0;ii2<items.length;++ii2){const item=items[ii2];if(_isValue$1(item)||_isList$1(item))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:expandedValue});_addValue$2(reverseMap,property,item,{propertyIsArray:!0})}}continue}if(expandedProperty==="@nest"){nests.push(key);continue}let termCtx=activeCtx;const ctx=_getContextValue$1(activeCtx,key,"@context");_isUndefined$1(ctx)||(termCtx=await _processContext$2({activeCtx,localCtx:ctx,propagate:!0,overrideProtected:!0,options}));const container=_getContextValue$1(termCtx,key,"@container")||[];if(container.includes("@language")&&_isObject$2(value)){const direction=_getContextValue$1(termCtx,key,"@direction");expandedValue=_expandLanguageMap(termCtx,value,direction,options)}else if(container.includes("@index")&&_isObject$2(value)){const asGraph=container.includes("@graph"),indexKey=_getContextValue$1(termCtx,key,"@index")||"@index",propertyIndex=indexKey!=="@index"&&_expandIri$2(activeCtx,indexKey,{vocab:!0},options);expandedValue=await _expandIndexMap({activeCtx:termCtx,options,activeProperty:key,value,asGraph,indexKey,propertyIndex})}else if(container.includes("@id")&&_isObject$2(value)){const asGraph=container.includes("@graph");expandedValue=await _expandIndexMap({activeCtx:termCtx,options,activeProperty:key,value,asGraph,indexKey:"@id"})}else if(container.includes("@type")&&_isObject$2(value))expandedValue=await _expandIndexMap({activeCtx:termCtx.revertToPreviousContext(),options,activeProperty:key,value,asGraph:!1,indexKey:"@type"});else{const isList=expandedProperty==="@list";if(isList||expandedProperty==="@set"){let nextActiveProperty=activeProperty;isList&&expandedActiveProperty==="@graph"&&(nextActiveProperty=null),expandedValue=await api$6.expand({activeCtx:termCtx,activeProperty:nextActiveProperty,element:value,options,insideList:isList})}else _getContextValue$1(activeCtx,key,"@type")==="@json"?expandedValue={"@type":"@json","@value":value}:expandedValue=await api$6.expand({activeCtx:termCtx,activeProperty:key,element:value,options,insideList:!1})}if(!(expandedValue===null&&expandedProperty!=="@value")){if(expandedProperty!=="@list"&&!_isList$1(expandedValue)&&container.includes("@list")&&(expandedValue={"@list":_asArray$1(expandedValue)}),container.includes("@graph")&&!container.some(key2=>key2==="@id"||key2==="@index")){expandedValue=_asArray$1(expandedValue);const count=Object.keys(expandedValue[0]).length;if(!options.isFrame&&_dropUnsafeObject({value:expandedValue[0],count,options})===null)continue;expandedValue=expandedValue.map(v=>({"@graph":_asArray$1(v)}))}if(termCtx.mappings.has(key)&&termCtx.mappings.get(key).reverse){const reverseMap=expandedParent["@reverse"]=expandedParent["@reverse"]||{};expandedValue=_asArray$1(expandedValue);for(let ii2=0;ii2<expandedValue.length;++ii2){const item=expandedValue[ii2];if(_isValue$1(item)||_isList$1(item))throw new JsonLdError$5('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:expandedValue});_addValue$2(reverseMap,expandedProperty,item,{propertyIsArray:!0})}continue}_addValue$2(expandedParent,expandedProperty,expandedValue,{propertyIsArray:!0})}}if("@value"in expandedParent&&!(expandedParent["@type"]==="@json"&&_processingMode$2(activeCtx,1.1))){if((_isObject$2(unexpandedValue)||_isArray$2(unexpandedValue))&&!options.isFrame)throw new JsonLdError$5('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:unexpandedValue})}for(const key of nests){const nestedValues=_isArray$2(element[key])?element[key]:[element[key]];for(const nv of nestedValues){if(!_isObject$2(nv)||Object.keys(nv).some(k=>_expandIri$2(activeCtx,k,{vocab:!0},options)==="@value"))throw new JsonLdError$5("Invalid JSON-LD syntax; nested value must be a node object.","jsonld.SyntaxError",{code:"invalid @nest value",value:nv});await _expandObject({activeCtx,activeProperty,expandedActiveProperty,element:nv,expandedParent,options,insideList,typeScopedContext,typeKey})}}}__name(_expandObject,"_expandObject");function _expandValue({activeCtx,activeProperty,value,options}){if(value==null)return null;const expandedProperty=_expandIri$2(activeCtx,activeProperty,{vocab:!0},options);if(expandedProperty==="@id")return _expandIri$2(activeCtx,value,{base:!0},options);if(expandedProperty==="@type")return _expandIri$2(activeCtx,value,{vocab:!0,base:!0},{...options,typeExpansion:!0});const type=_getContextValue$1(activeCtx,activeProperty,"@type");if((type==="@id"||expandedProperty==="@graph")&&_isString$2(value)){const expandedValue=_expandIri$2(activeCtx,value,{base:!0},options);return expandedValue===null&&value.match(REGEX_KEYWORD$1)&&options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"reserved @id value",level:"warning",message:"Reserved @id found.",details:{id:activeProperty}},options}),{"@id":expandedValue}}if(type==="@vocab"&&_isString$2(value))return{"@id":_expandIri$2(activeCtx,value,{vocab:!0,base:!0},options)};if(_isKeyword$1(expandedProperty))return value;const rval={};if(type&&!["@id","@vocab","@none"].includes(type))rval["@type"]=type;else if(_isString$2(value)){const language=_getContextValue$1(activeCtx,activeProperty,"@language");language!==null&&(rval["@language"]=language);const direction=_getContextValue$1(activeCtx,activeProperty,"@direction");direction!==null&&(rval["@direction"]=direction)}return["boolean","number","string"].includes(typeof value)||(value=value.toString()),rval["@value"]=value,rval}__name(_expandValue,"_expandValue");function _expandLanguageMap(activeCtx,languageMap,direction,options){const rval=[],keys=Object.keys(languageMap).sort();for(const key of keys){const expandedKey=_expandIri$2(activeCtx,key,{vocab:!0},options);let val=languageMap[key];_isArray$2(val)||(val=[val]);for(const item of val){if(item===null)continue;if(!_isString$2(item))throw new JsonLdError$5("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap});const val2={"@value":item};expandedKey!=="@none"&&(key.match(REGEX_BCP47$1)||options.eventHandler&&_handleEvent$2({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:key}},options}),val2["@language"]=key.toLowerCase()),direction&&(val2["@direction"]=direction),rval.push(val2)}}return rval}__name(_expandLanguageMap,"_expandLanguageMap");async function _expandIndexMap({activeCtx,options,activeProperty,value,asGraph,indexKey,propertyIndex}){const rval=[],keys=Object.keys(value).sort(),isTypeIndex=indexKey==="@type";for(let key of keys){if(isTypeIndex){const ctx=_getContextValue$1(activeCtx,key,"@context");_isUndefined$1(ctx)||(activeCtx=await _processContext$2({activeCtx,localCtx:ctx,propagate:!1,options}))}let val=value[key];_isArray$2(val)||(val=[val]),val=await api$6.expand({activeCtx,activeProperty,element:val,options,insideList:!1,insideIndex:!0});let expandedKey;propertyIndex?key==="@none"?expandedKey="@none":expandedKey=_expandValue({activeCtx,activeProperty:indexKey,value:key,options}):expandedKey=_expandIri$2(activeCtx,key,{vocab:!0},options),indexKey==="@id"?key=_expandIri$2(activeCtx,key,{base:!0},options):isTypeIndex&&(key=expandedKey);for(let item of val){if(asGraph&&!_isGraph$1(item)&&(item={"@graph":[item]}),indexKey==="@type")expandedKey==="@none"||(item["@type"]?item["@type"]=[key].concat(item["@type"]):item["@type"]=[key]);else{if(_isValue$1(item)&&!["@language","@type","@index"].includes(indexKey))throw new JsonLdError$5(`Invalid JSON-LD syntax; Attempt to add illegal key to value object: "${indexKey}".`,"jsonld.SyntaxError",{code:"invalid value object",value:item});propertyIndex?expandedKey!=="@none"&&_addValue$2(item,propertyIndex,expandedKey,{propertyIsArray:!0,prependValue:!0}):expandedKey!=="@none"&&!(indexKey in item)&&(item[indexKey]=key)}rval.push(item)}}return rval}__name(_expandIndexMap,"_expandIndexMap");const{isKeyword:isKeyword$2}=context,graphTypes$3=graphTypes$5,types$3=types$7,util$3=util$5,JsonLdError$4=JsonLdError_1,api$5={};var nodeMap=api$5;api$5.createMergedNodeMap=(input,options)=>{options=options||{};const issuer=options.issuer||new util$3.IdentifierIssuer("_:b"),graphs={"@default":{}};return api$5.createNodeMap(input,graphs,"@default",issuer),api$5.mergeNodeMaps(graphs)};api$5.createNodeMap=(input,graphs,graph,issuer,name,list)=>{if(types$3.isArray(input)){for(const node of input)api$5.createNodeMap(node,graphs,graph,issuer,void 0,list);return}if(!types$3.isObject(input)){list&&list.push(input);return}if(graphTypes$3.isValue(input)){if("@type"in input){let type=input["@type"];type.indexOf("_:")===0&&(input["@type"]=type=issuer.getId(type))}list&&list.push(input);return}else if(list&&graphTypes$3.isList(input)){const _list=[];api$5.createNodeMap(input["@list"],graphs,graph,issuer,name,_list),list.push({"@list":_list});return}if("@type"in input){const types2=input["@type"];for(const type of types2)type.indexOf("_:")===0&&issuer.getId(type)}types$3.isUndefined(name)&&(name=graphTypes$3.isBlankNode(input)?issuer.getId(input["@id"]):input["@id"]),list&&list.push({"@id":name});const subjects=graphs[graph],subject=subjects[name]=subjects[name]||{};subject["@id"]=name;const properties=Object.keys(input).sort();for(let property of properties){if(property==="@id")continue;if(property==="@reverse"){const referencedNode={"@id":name},reverseMap=input["@reverse"];for(const reverseProperty in reverseMap){const items=reverseMap[reverseProperty];for(const item of items){let itemName=item["@id"];graphTypes$3.isBlankNode(item)&&(itemName=issuer.getId(itemName)),api$5.createNodeMap(item,graphs,graph,issuer,itemName),util$3.addValue(subjects[itemName],reverseProperty,referencedNode,{propertyIsArray:!0,allowDuplicate:!1})}}continue}if(property==="@graph"){name in graphs||(graphs[name]={}),api$5.createNodeMap(input[property],graphs,name,issuer);continue}if(property==="@included"){api$5.createNodeMap(input[property],graphs,graph,issuer);continue}if(property!=="@type"&&isKeyword$2(property)){if(property==="@index"&&property in subject&&(input[property]!==subject[property]||input[property]["@id"]!==subject[property]["@id"]))throw new JsonLdError$4("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject});subject[property]=input[property];continue}const objects=input[property];if(property.indexOf("_:")===0&&(property=issuer.getId(property)),objects.length===0){util$3.addValue(subject,property,[],{propertyIsArray:!0});continue}for(let o of objects)if(property==="@type"&&(o=o.indexOf("_:")===0?issuer.getId(o):o),graphTypes$3.isSubject(o)||graphTypes$3.isSubjectReference(o)){if("@id"in o&&!o["@id"])continue;const id=graphTypes$3.isBlankNode(o)?issuer.getId(o["@id"]):o["@id"];util$3.addValue(subject,property,{"@id":id},{propertyIsArray:!0,allowDuplicate:!1}),api$5.createNodeMap(o,graphs,graph,issuer,id)}else if(graphTypes$3.isValue(o))util$3.addValue(subject,property,o,{propertyIsArray:!0,allowDuplicate:!1});else if(graphTypes$3.isList(o)){const _list=[];api$5.createNodeMap(o["@list"],graphs,graph,issuer,name,_list),o={"@list":_list},util$3.addValue(subject,property,o,{propertyIsArray:!0,allowDuplicate:!1})}else api$5.createNodeMap(o,graphs,graph,issuer,name),util$3.addValue(subject,property,o,{propertyIsArray:!0,allowDuplicate:!1})}};api$5.mergeNodeMapGraphs=graphs=>{const merged={};for(const name of Object.keys(graphs).sort())for(const id of Object.keys(graphs[name]).sort()){const node=graphs[name][id];id in merged||(merged[id]={"@id":id});const mergedNode=merged[id];for(const property of Object.keys(node).sort())if(isKeyword$2(property)&&property!=="@type")mergedNode[property]=util$3.clone(node[property]);else for(const value of node[property])util$3.addValue(mergedNode,property,util$3.clone(value),{propertyIsArray:!0,allowDuplicate:!1})}return merged};api$5.mergeNodeMaps=graphs=>{const defaultGraph=graphs["@default"],graphNames=Object.keys(graphs).sort();for(const graphName of graphNames){if(graphName==="@default")continue;const nodeMap2=graphs[graphName];let subject=defaultGraph[graphName];subject?"@graph"in subject||(subject["@graph"]=[]):defaultGraph[graphName]=subject={"@id":graphName,"@graph":[]};const graph=subject["@graph"];for(const id of Object.keys(nodeMap2).sort()){const node=nodeMap2[id];graphTypes$3.isSubjectReference(node)||graph.push(node)}}return defaultGraph};const{isSubjectReference:_isSubjectReference$2}=graphTypes$5,{createMergedNodeMap:_createMergedNodeMap$1}=nodeMap,api$4={};var flatten=api$4;api$4.flatten=input=>{const defaultGraph=_createMergedNodeMap$1(input),flattened=[],keys=Object.keys(defaultGraph).sort();for(let ki2=0;ki2<keys.length;++ki2){const node=defaultGraph[keys[ki2]];_isSubjectReference$2(node)||flattened.push(node)}return flattened};const JsonLdError$3=JsonLdError_1,graphTypes$2=graphTypes$5,types$2=types$7,{REGEX_BCP47,addValue:_addValue$1}=util$5,{handleEvent:_handleEvent$1}=events,{RDF_LIST,RDF_FIRST:RDF_FIRST$1,RDF_REST:RDF_REST$1,RDF_NIL:RDF_NIL$1,RDF_TYPE:RDF_TYPE$1,RDF_JSON_LITERAL:RDF_JSON_LITERAL$1,XSD_BOOLEAN:XSD_BOOLEAN$1,XSD_DOUBLE:XSD_DOUBLE$1,XSD_INTEGER:XSD_INTEGER$1,XSD_STRING:XSD_STRING$1}=constants,api$3={};var fromRdf=api$3;api$3.fromRDF=async(dataset,options)=>{const defaultGraph={},graphMap={"@default":defaultGraph},referencedOnce={},{useRdfType=!1,useNativeTypes=!1,rdfDirection=null}=options;for(const quad of dataset){const name=quad.graph.termType==="DefaultGraph"?"@default":quad.graph.value;name in graphMap||(graphMap[name]={}),name!=="@default"&&!(name in defaultGraph)&&(defaultGraph[name]={"@id":name});const nodeMap2=graphMap[name],s=quad.subject.value,p=quad.predicate.value,o=quad.object;s in nodeMap2||(nodeMap2[s]={"@id":s});const node=nodeMap2[s],objectIsNode=o.termType.endsWith("Node");if(objectIsNode&&!(o.value in nodeMap2)&&(nodeMap2[o.value]={"@id":o.value}),p===RDF_TYPE$1&&!useRdfType&&objectIsNode){_addValue$1(node,"@type",o.value,{propertyIsArray:!0});continue}const value=_RDFToObject(o,useNativeTypes,rdfDirection,options);if(_addValue$1(node,p,value,{propertyIsArray:!0}),objectIsNode)if(o.value===RDF_NIL$1){const object=nodeMap2[o.value];"usages"in object||(object.usages=[]),object.usages.push({node,property:p,value})}else o.value in referencedOnce?referencedOnce[o.value]=!1:referencedOnce[o.value]={node,property:p,value}}for(const name in graphMap){const graphObject=graphMap[name];if(!(RDF_NIL$1 in graphObject))continue;const nil=graphObject[RDF_NIL$1];if(nil.usages){for(let usage of nil.usages){let node=usage.node,property=usage.property,head=usage.value;const list=[],listNodes=[];let nodeKeyCount=Object.keys(node).length;for(;property===RDF_REST$1&&types$2.isObject(referencedOnce[node["@id"]])&&types$2.isArray(node[RDF_FIRST$1])&&node[RDF_FIRST$1].length===1&&types$2.isArray(node[RDF_REST$1])&&node[RDF_REST$1].length===1&&(nodeKeyCount===3||nodeKeyCount===4&&types$2.isArray(node["@type"])&&node["@type"].length===1&&node["@type"][0]===RDF_LIST)&&(list.push(node[RDF_FIRST$1][0]),listNodes.push(node["@id"]),usage=referencedOnce[node["@id"]],node=usage.node,property=usage.property,head=usage.value,nodeKeyCount=Object.keys(node).length,!!graphTypes$2.isBlankNode(node)););delete head["@id"],head["@list"]=list.reverse();for(const listNode of listNodes)delete graphObject[listNode]}delete nil.usages}}const result=[],subjects=Object.keys(defaultGraph).sort();for(const subject of subjects){const node=defaultGraph[subject];if(subject in graphMap){const graph=node["@graph"]=[],graphObject=graphMap[subject],graphSubjects=Object.keys(graphObject).sort();for(const graphSubject of graphSubjects){const node2=graphObject[graphSubject];graphTypes$2.isSubjectReference(node2)||graph.push(node2)}}graphTypes$2.isSubjectReference(node)||result.push(node)}return result};function _RDFToObject(o,useNativeTypes,rdfDirection,options){if(o.termType.endsWith("Node"))return{"@id":o.value};const rval={"@value":o.value};if(o.language)o.language.match(REGEX_BCP47)||options.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language:o.language}},options}),rval["@language"]=o.language;else{let type=o.datatype.value;if(type||(type=XSD_STRING$1),type===RDF_JSON_LITERAL$1){type="@json";try{rval["@value"]=JSON.parse(rval["@value"])}catch(e){throw new JsonLdError$3("JSON literal could not be parsed.","jsonld.InvalidJsonLiteral",{code:"invalid JSON literal",value:rval["@value"],cause:e})}}if(useNativeTypes){if(type===XSD_BOOLEAN$1)rval["@value"]==="true"?rval["@value"]=!0:rval["@value"]==="false"&&(rval["@value"]=!1);else if(types$2.isNumeric(rval["@value"]))if(type===XSD_INTEGER$1){const i=parseInt(rval["@value"],10);i.toFixed(0)===rval["@value"]&&(rval["@value"]=i)}else type===XSD_DOUBLE$1&&(rval["@value"]=parseFloat(rval["@value"]));[XSD_BOOLEAN$1,XSD_INTEGER$1,XSD_DOUBLE$1,XSD_STRING$1].includes(type)||(rval["@type"]=type)}else if(rdfDirection==="i18n-datatype"&&type.startsWith("https://www.w3.org/ns/i18n#")){const[,language,direction]=type.split(/[#_]/);language.length>0&&(rval["@language"]=language,language.match(REGEX_BCP47)||options.eventHandler&&_handleEvent$1({event:{type:["JsonLdEvent"],code:"invalid @language value",level:"warning",message:"@language value must be valid BCP47.",details:{language}},options})),rval["@direction"]=direction}else type!==XSD_STRING$1&&(rval["@type"]=type)}return rval}__name(_RDFToObject,"_RDFToObject");var canonicalize=__name(function serialize(object){return object===null||typeof object!="object"||object.toJSON!=null?JSON.stringify(object):Array.isArray(object)?"["+object.reduce((t,cv,ci2)=>{const comma=ci2===0?"":",",value=cv===void 0||typeof cv=="symbol"?null:cv;return t+comma+serialize(value)},"")+"]":"{"+Object.keys(object).sort().reduce((t,cv,ci2)=>{if(object[cv]===void 0||typeof object[cv]=="symbol")return t;const comma=t.length===0?"":",";return t+comma+serialize(cv)+":"+serialize(object[cv])},"")+"}"},"serialize");const{createNodeMap}=nodeMap,{isKeyword:isKeyword$1}=context,graphTypes$1=graphTypes$5,jsonCanonicalize=canonicalize,types$1=types$7,util$2=util$5,{handleEvent:_handleEvent}=events,{RDF_FIRST,RDF_REST,RDF_NIL,RDF_TYPE,RDF_JSON_LITERAL,RDF_LANGSTRING,XSD_BOOLEAN,XSD_DOUBLE,XSD_INTEGER,XSD_STRING}=constants,{isAbsolute:_isAbsoluteIri}=url$1,api$2={};var toRdf=api$2;api$2.toRDF=(input,options)=>{const issuer=new util$2.IdentifierIssuer("_:b"),nodeMap2={"@default":{}};createNodeMap(input,nodeMap2,"@default",issuer);const dataset=[],graphNames=Object.keys(nodeMap2).sort();for(const graphName of graphNames){let graphTerm;if(graphName==="@default")graphTerm={termType:"DefaultGraph",value:""};else if(_isAbsoluteIri(graphName))graphName.startsWith("_:")?graphTerm={termType:"BlankNode"}:graphTerm={termType:"NamedNode"},graphTerm.value=graphName;else{options.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative graph reference",level:"warning",message:"Relative graph reference found.",details:{graph:graphName}},options});continue}_graphToRDF(dataset,nodeMap2[graphName],graphTerm,issuer,options)}return dataset};function _graphToRDF(dataset,graph,graphTerm,issuer,options){const ids=Object.keys(graph).sort();for(const id of ids){const node=graph[id],properties=Object.keys(node).sort();for(let property of properties){const items=node[property];if(property==="@type")property=RDF_TYPE;else if(isKeyword$1(property))continue;for(const item of items){const subject={termType:id.startsWith("_:")?"BlankNode":"NamedNode",value:id};if(!_isAbsoluteIri(id)){options.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative subject reference",level:"warning",message:"Relative subject reference found.",details:{subject:id}},options});continue}const predicate={termType:property.startsWith("_:")?"BlankNode":"NamedNode",value:property};if(!_isAbsoluteIri(property)){options.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative predicate reference",level:"warning",message:"Relative predicate reference found.",details:{predicate:property}},options});continue}if(predicate.termType==="BlankNode"&&!options.produceGeneralizedRdf){options.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"blank node predicate",level:"warning",message:"Dropping blank node predicate.",details:{property:issuer.getOldIds().find(key=>issuer.getId(key)===property)}},options});continue}const object=_objectToRDF(item,issuer,dataset,graphTerm,options.rdfDirection,options);object&&dataset.push({subject,predicate,object,graph:graphTerm})}}}}__name(_graphToRDF,"_graphToRDF");function _listToRDF(list,issuer,dataset,graphTerm,rdfDirection,options){const first={termType:"NamedNode",value:RDF_FIRST},rest={termType:"NamedNode",value:RDF_REST},nil={termType:"NamedNode",value:RDF_NIL},last=list.pop(),result=last?{termType:"BlankNode",value:issuer.getId()}:nil;let subject=result;for(const item of list){const object=_objectToRDF(item,issuer,dataset,graphTerm,rdfDirection,options),next={termType:"BlankNode",value:issuer.getId()};dataset.push({subject,predicate:first,object,graph:graphTerm}),dataset.push({subject,predicate:rest,object:next,graph:graphTerm}),subject=next}if(last){const object=_objectToRDF(last,issuer,dataset,graphTerm,rdfDirection,options);dataset.push({subject,predicate:first,object,graph:graphTerm}),dataset.push({subject,predicate:rest,object:nil,graph:graphTerm})}return result}__name(_listToRDF,"_listToRDF");function _objectToRDF(item,issuer,dataset,graphTerm,rdfDirection,options){const object={};if(graphTypes$1.isValue(item)){object.termType="Literal",object.value=void 0,object.datatype={termType:"NamedNode"};let value=item["@value"];const datatype=item["@type"]||null;if(datatype==="@json")object.value=jsonCanonicalize(value),object.datatype.value=RDF_JSON_LITERAL;else if(types$1.isBoolean(value))object.value=value.toString(),object.datatype.value=datatype||XSD_BOOLEAN;else if(types$1.isDouble(value)||datatype===XSD_DOUBLE)types$1.isDouble(value)||(value=parseFloat(value)),object.value=value.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),object.datatype.value=datatype||XSD_DOUBLE;else if(types$1.isNumber(value))object.value=value.toFixed(0),object.datatype.value=datatype||XSD_INTEGER;else if(rdfDirection==="i18n-datatype"&&"@direction"in item){const datatype2="https://www.w3.org/ns/i18n#"+(item["@language"]||"")+`_${item["@direction"]}`;object.datatype.value=datatype2,object.value=value}else"@language"in item?(object.value=value,object.datatype.value=datatype||RDF_LANGSTRING,object.language=item["@language"]):(object.value=value,object.datatype.value=datatype||XSD_STRING)}else if(graphTypes$1.isList(item)){const _list=_listToRDF(item["@list"],issuer,dataset,graphTerm,rdfDirection,options);object.termType=_list.termType,object.value=_list.value}else{const id=types$1.isObject(item)?item["@id"]:item;object.termType=id.startsWith("_:")?"BlankNode":"NamedNode",object.value=id}return object.termType==="NamedNode"&&!_isAbsoluteIri(object.value)?(options.eventHandler&&_handleEvent({event:{type:["JsonLdEvent"],code:"relative object reference",level:"warning",message:"Relative object reference found.",details:{object:object.value}},options}),null):object}__name(_objectToRDF,"_objectToRDF");const{isKeyword}=context,graphTypes=graphTypes$5,types=types$7,util$1=util$5,url=url$1,JsonLdError$2=JsonLdError_1,{createNodeMap:_createNodeMap$1,mergeNodeMapGraphs:_mergeNodeMapGraphs}=nodeMap,api$1={};var frame=api$1;api$1.frameMergedOrDefault=(input,frame2,options)=>{const state={options,embedded:!1,graph:"@default",graphMap:{"@default":{}},subjectStack:[],link:{},bnodeMap:{}},issuer=new util$1.IdentifierIssuer("_:b");_createNodeMap$1(input,state.graphMap,"@default",issuer),options.merged&&(state.graphMap["@merged"]=_mergeNodeMapGraphs(state.graphMap),state.graph="@merged"),state.subjects=state.graphMap[state.graph];const framed=[];api$1.frame(state,Object.keys(state.subjects).sort(),frame2,framed),options.pruneBlankNodeIdentifiers&&(options.bnodesToClear=Object.keys(state.bnodeMap).filter(id=>state.bnodeMap[id].length===1));// remove @preserve from results
return options.link={},_cleanupPreserve(framed,options)};api$1.frame=(state,subjects,frame2,parent,property=null)=>{_validateFrame(frame2),frame2=frame2[0];const options=state.options,flags={embed:_getFrameFlag(frame2,options,"embed"),explicit:_getFrameFlag(frame2,options,"explicit"),requireAll:_getFrameFlag(frame2,options,"requireAll")};state.link.hasOwnProperty(state.graph)||(state.link[state.graph]={});const link=state.link[state.graph],matches=_filterSubjects(state,subjects,frame2,flags),ids=Object.keys(matches).sort();for(const id of ids){const subject=matches[id];if(property===null?state.uniqueEmbeds={[state.graph]:{}}:state.uniqueEmbeds[state.graph]=state.uniqueEmbeds[state.graph]||{},flags.embed==="@link"&&id in link){_addFrameOutput(parent,property,link[id]);continue}const output={"@id":id};if(id.indexOf("_:")===0&&util$1.addValue(state.bnodeMap,id,output,{propertyIsArray:!0}),link[id]=output,(flags.embed==="@first"||flags.embed==="@last")&&state.is11)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:frame2});if(!(!state.embedded&&state.uniqueEmbeds[state.graph].hasOwnProperty(id))){if(state.embedded&&(flags.embed==="@never"||_createsCircularReference(subject,state.graph,state.subjectStack))){_addFrameOutput(parent,property,output);continue}if(state.embedded&&(flags.embed=="@first"||flags.embed=="@once")&&state.uniqueEmbeds[state.graph].hasOwnProperty(id)){_addFrameOutput(parent,property,output);continue}if(flags.embed==="@last"&&id in state.uniqueEmbeds[state.graph]&&_removeEmbed(state,id),state.uniqueEmbeds[state.graph][id]={parent,property},state.subjectStack.push({subject,graph:state.graph}),id in state.graphMap){let recurse=!1,subframe=null;"@graph"in frame2?(subframe=frame2["@graph"][0],recurse=!(id==="@merged"||id==="@default"),types.isObject(subframe)||(subframe={})):(recurse=state.graph!=="@merged",subframe={}),recurse&&api$1.frame({...state,graph:id,embedded:!1},Object.keys(state.graphMap[id]).sort(),[subframe],output,"@graph")}"@included"in frame2&&api$1.frame({...state,embedded:!1},subjects,frame2["@included"],output,"@included");for(const prop of Object.keys(subject).sort()){if(isKeyword(prop)){if(output[prop]=util$1.clone(subject[prop]),prop==="@type")for(const type of subject["@type"])type.indexOf("_:")===0&&util$1.addValue(state.bnodeMap,type,output,{propertyIsArray:!0});continue}if(!(flags.explicit&&!(prop in frame2)))for(const o of subject[prop]){const subframe=prop in frame2?frame2[prop]:_createImplicitFrame(flags);if(graphTypes.isList(o)){const subframe2=frame2[prop]&&frame2[prop][0]&&frame2[prop][0]["@list"]?frame2[prop][0]["@list"]:_createImplicitFrame(flags),list={"@list":[]};_addFrameOutput(output,prop,list);const src=o["@list"];for(const oo2 of src)graphTypes.isSubjectReference(oo2)?api$1.frame({...state,embedded:!0},[oo2["@id"]],subframe2,list,"@list"):_addFrameOutput(list,"@list",util$1.clone(oo2))}else graphTypes.isSubjectReference(o)?api$1.frame({...state,embedded:!0},[o["@id"]],subframe,output,prop):_valueMatch(subframe[0],o)&&_addFrameOutput(output,prop,util$1.clone(o))}}for(const prop of Object.keys(frame2).sort()){if(prop==="@type"){if(!types.isObject(frame2[prop][0])||!("@default"in frame2[prop][0]))continue}else if(isKeyword(prop))continue;const next=frame2[prop][0]||{};if(!_getFrameFlag(next,options,"omitDefault")&&!(prop in output)){let preserve="@null";"@default"in next&&(preserve=util$1.clone(next["@default"])),types.isArray(preserve)||(preserve=[preserve]),output[prop]=[{"@preserve":preserve}]}}for(const reverseProp of Object.keys(frame2["@reverse"]||{}).sort()){const subframe=frame2["@reverse"][reverseProp];for(const subject2 of Object.keys(state.subjects))util$1.getValues(state.subjects[subject2],reverseProp).some(v=>v["@id"]===id)&&(output["@reverse"]=output["@reverse"]||{},util$1.addValue(output["@reverse"],reverseProp,[],{propertyIsArray:!0}),api$1.frame({...state,embedded:!0},[subject2],subframe,output["@reverse"][reverseProp],property))}_addFrameOutput(parent,property,output),state.subjectStack.pop()}}};api$1.cleanupNull=(input,options)=>{if(types.isArray(input))return input.map(v=>api$1.cleanupNull(v,options)).filter(v=>v);if(input==="@null")return null;if(types.isObject(input)){if("@id"in input){const id=input["@id"];if(options.link.hasOwnProperty(id)){const idx=options.link[id].indexOf(input);if(idx!==-1)return options.link[id][idx];options.link[id].push(input)}else options.link[id]=[input]}for(const key in input)input[key]=api$1.cleanupNull(input[key],options)}return input};function _createImplicitFrame(flags){const frame2={};for(const key in flags)flags[key]!==void 0&&(frame2["@"+key]=[flags[key]]);return[frame2]}__name(_createImplicitFrame,"_createImplicitFrame");function _createsCircularReference(subjectToEmbed,graph,subjectStack){for(let i=subjectStack.length-1;i>=0;--i){const subject=subjectStack[i];if(subject.graph===graph&&subject.subject["@id"]===subjectToEmbed["@id"])return!0}return!1}__name(_createsCircularReference,"_createsCircularReference");function _getFrameFlag(frame2,options,name){const flag="@"+name;let rval=flag in frame2?frame2[flag][0]:options[name];if(name==="embed"){if(rval===!0)rval="@once";else if(rval===!1)rval="@never";else if(rval!=="@always"&&rval!=="@never"&&rval!=="@link"&&rval!=="@first"&&rval!=="@last"&&rval!=="@once")throw new JsonLdError$2("Invalid JSON-LD syntax; invalid value of @embed.","jsonld.SyntaxError",{code:"invalid @embed value",frame:frame2})}return rval}__name(_getFrameFlag,"_getFrameFlag");function _validateFrame(frame2){if(!types.isArray(frame2)||frame2.length!==1||!types.isObject(frame2[0]))throw new JsonLdError$2("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:frame2});if("@id"in frame2[0]){for(const id of util$1.asArray(frame2[0]["@id"]))if(!(types.isObject(id)||url.isAbsolute(id))||types.isString(id)&&id.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @id in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:frame2})}if("@type"in frame2[0]){for(const type of util$1.asArray(frame2[0]["@type"]))if(!(types.isObject(type)||url.isAbsolute(type)||type==="@json")||types.isString(type)&&type.indexOf("_:")===0)throw new JsonLdError$2("Invalid JSON-LD syntax; invalid @type in frame.","jsonld.SyntaxError",{code:"invalid frame",frame:frame2})}}__name(_validateFrame,"_validateFrame");function _filterSubjects(state,subjects,frame2,flags){const rval={};for(const id of subjects){const subject=state.graphMap[state.graph][id];_filterSubject(state,subject,frame2,flags)&&(rval[id]=subject)}return rval}__name(_filterSubjects,"_filterSubjects");function _filterSubject(state,subject,frame2,flags){let wildcard=!0,matchesSome=!1;for(const key in frame2){let matchThis=!1;const nodeValues=util$1.getValues(subject,key),isEmpty=util$1.getValues(frame2,key).length===0;if(key==="@id"){if(types.isEmptyObject(frame2["@id"][0]||{})?matchThis=!0:frame2["@id"].length>=0&&(matchThis=frame2["@id"].includes(nodeValues[0])),!flags.requireAll)return matchThis}else if(key==="@type"){if(wildcard=!1,isEmpty){if(nodeValues.length>0)return!1;matchThis=!0}else if(frame2["@type"].length===1&&types.isEmptyObject(frame2["@type"][0]))matchThis=nodeValues.length>0;else for(const type of frame2["@type"])types.isObject(type)&&"@default"in type?matchThis=!0:matchThis=matchThis||nodeValues.some(tt2=>tt2===type);if(!flags.requireAll)return matchThis}else{if(isKeyword(key))continue;{const thisFrame=util$1.getValues(frame2,key)[0];let hasDefault=!1;if(thisFrame&&(_validateFrame([thisFrame]),hasDefault="@default"in thisFrame),wildcard=!1,nodeValues.length===0&&hasDefault)continue;if(nodeValues.length>0&&isEmpty)return!1;if(thisFrame===void 0){if(nodeValues.length>0)return!1;matchThis=!0}else if(graphTypes.isList(thisFrame)){const listValue=thisFrame["@list"][0];if(graphTypes.isList(nodeValues[0])){const nodeListValues=nodeValues[0]["@list"];graphTypes.isValue(listValue)?matchThis=nodeListValues.some(lv=>_valueMatch(listValue,lv)):(graphTypes.isSubject(listValue)||graphTypes.isSubjectReference(listValue))&&(matchThis=nodeListValues.some(lv=>_nodeMatch(state,listValue,lv,flags)))}}else graphTypes.isValue(thisFrame)?matchThis=nodeValues.some(nv=>_valueMatch(thisFrame,nv)):graphTypes.isSubjectReference(thisFrame)?matchThis=nodeValues.some(nv=>_nodeMatch(state,thisFrame,nv,flags)):types.isObject(thisFrame)?matchThis=nodeValues.length>0:matchThis=!1}}if(!matchThis&&flags.requireAll)return!1;matchesSome=matchesSome||matchThis}return wildcard||matchesSome}__name(_filterSubject,"_filterSubject");function _removeEmbed(state,id){const embeds=state.uniqueEmbeds[state.graph],embed=embeds[id],parent=embed.parent,property=embed.property,subject={"@id":id};if(types.isArray(parent)){for(let i=0;i<parent.length;++i)if(util$1.compareValues(parent[i],subject)){parent[i]=subject;break}}else{const useArray=types.isArray(parent[property]);util$1.removeValue(parent,property,subject,{propertyIsArray:useArray}),util$1.addValue(parent,property,subject,{propertyIsArray:useArray})}const removeDependents=__name(id2=>{const ids=Object.keys(embeds);for(const next of ids)next in embeds&&types.isObject(embeds[next].parent)&&embeds[next].parent["@id"]===id2&&(delete embeds[next],removeDependents(next))},"removeDependents");removeDependents(id)}__name(_removeEmbed,"_removeEmbed");/**
 * Removes the @preserve keywords from expanded result of framing.
 *
 * @param input the framed, framed output.
 * @param options the framing options used.
 *
 * @return the resulting output.
 */function _cleanupPreserve(input,options){if(types.isArray(input))return input.map(value=>_cleanupPreserve(value,options));if(types.isObject(input)){// remove @preserve
if("@preserve"in input)return input["@preserve"][0];if(graphTypes.isValue(input))return input;if(graphTypes.isList(input))return input["@list"]=_cleanupPreserve(input["@list"],options),input;if("@id"in input){const id=input["@id"];if(options.link.hasOwnProperty(id)){const idx=options.link[id].indexOf(input);if(idx!==-1)return options.link[id][idx];options.link[id].push(input)}else options.link[id]=[input]}for(const prop in input){if(prop==="@id"&&options.bnodesToClear.includes(input[prop])){delete input["@id"];continue}input[prop]=_cleanupPreserve(input[prop],options)}}return input}__name(_cleanupPreserve,"_cleanupPreserve");function _addFrameOutput(parent,property,output){types.isObject(parent)?util$1.addValue(parent,property,output,{propertyIsArray:!0}):parent.push(output)}__name(_addFrameOutput,"_addFrameOutput");function _nodeMatch(state,pattern,value,flags){if(!("@id"in value))return!1;const nodeObject=state.subjects[value["@id"]];return nodeObject&&_filterSubject(state,nodeObject,pattern,flags)}__name(_nodeMatch,"_nodeMatch");function _valueMatch(pattern,value){const v1=value["@value"],t1=value["@type"],l1=value["@language"],v2=pattern["@value"]?types.isArray(pattern["@value"])?pattern["@value"]:[pattern["@value"]]:[],t2=pattern["@type"]?types.isArray(pattern["@type"])?pattern["@type"]:[pattern["@type"]]:[],l2=pattern["@language"]?types.isArray(pattern["@language"])?pattern["@language"]:[pattern["@language"]]:[];return v2.length===0&&t2.length===0&&l2.length===0?!0:!(!(v2.includes(v1)||types.isEmptyObject(v2[0]))||!(!t1&&t2.length===0||t2.includes(t1)||t1&&types.isEmptyObject(t2[0]))||!(!l1&&l2.length===0||l2.includes(l1)||l1&&types.isEmptyObject(l2[0])))}__name(_valueMatch,"_valueMatch");const JsonLdError$1=JsonLdError_1,{isArray:_isArray$1,isObject:_isObject$1,isString:_isString$1,isUndefined:_isUndefined}=types$7,{isList:_isList,isValue:_isValue,isGraph:_isGraph,isSimpleGraph:_isSimpleGraph,isSubjectReference:_isSubjectReference$1}=graphTypes$5,{expandIri:_expandIri$1,getContextValue:_getContextValue,isKeyword:_isKeyword,process:_processContext$1,processingMode:_processingMode$1}=context,{removeBase:_removeBase,prependBase:_prependBase}=url$1,{REGEX_KEYWORD,addValue:_addValue,asArray:_asArray,compareShortestLeast:_compareShortestLeast}=util$5,api={};var compact=api;api.compact=async({activeCtx,activeProperty=null,element,options={}})=>{if(_isArray$1(element)){let rval=[];for(let i=0;i<element.length;++i){const compacted=await api.compact({activeCtx,activeProperty,element:element[i],options});compacted!==null&&rval.push(compacted)}return options.compactArrays&&rval.length===1&&(_getContextValue(activeCtx,activeProperty,"@container")||[]).length===0&&(rval=rval[0]),rval}const ctx=_getContextValue(activeCtx,activeProperty,"@context");if(_isUndefined(ctx)||(activeCtx=await _processContext$1({activeCtx,localCtx:ctx,propagate:!0,overrideProtected:!0,options})),_isObject$1(element)){if(options.link&&"@id"in element&&options.link.hasOwnProperty(element["@id"])){const linked=options.link[element["@id"]];for(let i=0;i<linked.length;++i)if(linked[i].expanded===element)return linked[i].compacted}if(_isValue(element)||_isSubjectReference$1(element)){const rval2=api.compactValue({activeCtx,activeProperty,value:element,options});return options.link&&_isSubjectReference$1(element)&&(options.link.hasOwnProperty(element["@id"])||(options.link[element["@id"]]=[]),options.link[element["@id"]].push({expanded:element,compacted:rval2})),rval2}if(_isList(element)&&(_getContextValue(activeCtx,activeProperty,"@container")||[]).includes("@list"))return api.compact({activeCtx,activeProperty,element:element["@list"],options});const insideReverse=activeProperty==="@reverse",rval={},inputCtx=activeCtx;!_isValue(element)&&!_isSubjectReference$1(element)&&(activeCtx=activeCtx.revertToPreviousContext());const propertyScopedCtx=_getContextValue(inputCtx,activeProperty,"@context");_isUndefined(propertyScopedCtx)||(activeCtx=await _processContext$1({activeCtx,localCtx:propertyScopedCtx,propagate:!0,overrideProtected:!0,options})),options.link&&"@id"in element&&(options.link.hasOwnProperty(element["@id"])||(options.link[element["@id"]]=[]),options.link[element["@id"]].push({expanded:element,compacted:rval}));let types2=element["@type"]||[];types2.length>1&&(types2=Array.from(types2).sort());const typeContext=activeCtx;for(const type of types2){const compactedType=api.compactIri({activeCtx:typeContext,iri:type,relativeTo:{vocab:!0}}),ctx2=_getContextValue(inputCtx,compactedType,"@context");_isUndefined(ctx2)||(activeCtx=await _processContext$1({activeCtx,localCtx:ctx2,options,propagate:!1}))}const keys=Object.keys(element).sort();for(const expandedProperty of keys){const expandedValue=element[expandedProperty];if(expandedProperty==="@id"){let compactedValue=_asArray(expandedValue).map(expandedIri=>api.compactIri({activeCtx,iri:expandedIri,relativeTo:{vocab:!1},base:options.base}));compactedValue.length===1&&(compactedValue=compactedValue[0]);const alias=api.compactIri({activeCtx,iri:"@id",relativeTo:{vocab:!0}});rval[alias]=compactedValue;continue}if(expandedProperty==="@type"){let compactedValue=_asArray(expandedValue).map(expandedIri=>api.compactIri({activeCtx:inputCtx,iri:expandedIri,relativeTo:{vocab:!0}}));compactedValue.length===1&&(compactedValue=compactedValue[0]);const alias=api.compactIri({activeCtx,iri:"@type",relativeTo:{vocab:!0}}),isArray=(_getContextValue(activeCtx,alias,"@container")||[]).includes("@set")&&_processingMode$1(activeCtx,1.1)||_isArray$1(compactedValue)&&expandedValue.length===0;_addValue(rval,alias,compactedValue,{propertyIsArray:isArray});continue}if(expandedProperty==="@reverse"){const compactedValue=await api.compact({activeCtx,activeProperty:"@reverse",element:expandedValue,options});for(const compactedProperty in compactedValue)if(activeCtx.mappings.has(compactedProperty)&&activeCtx.mappings.get(compactedProperty).reverse){const value=compactedValue[compactedProperty],useArray=(_getContextValue(activeCtx,compactedProperty,"@container")||[]).includes("@set")||!options.compactArrays;_addValue(rval,compactedProperty,value,{propertyIsArray:useArray}),delete compactedValue[compactedProperty]}if(Object.keys(compactedValue).length>0){const alias=api.compactIri({activeCtx,iri:expandedProperty,relativeTo:{vocab:!0}});_addValue(rval,alias,compactedValue)}continue}if(expandedProperty==="@preserve"){const compactedValue=await api.compact({activeCtx,activeProperty,element:expandedValue,options});_isArray$1(compactedValue)&&compactedValue.length===0||_addValue(rval,expandedProperty,compactedValue);continue}if(expandedProperty==="@index"){if((_getContextValue(activeCtx,activeProperty,"@container")||[]).includes("@index"))continue;const alias=api.compactIri({activeCtx,iri:expandedProperty,relativeTo:{vocab:!0}});_addValue(rval,alias,expandedValue);continue}if(expandedProperty!=="@graph"&&expandedProperty!=="@list"&&expandedProperty!=="@included"&&_isKeyword(expandedProperty)){const alias=api.compactIri({activeCtx,iri:expandedProperty,relativeTo:{vocab:!0}});_addValue(rval,alias,expandedValue);continue}if(!_isArray$1(expandedValue))throw new JsonLdError$1("JSON-LD expansion error; expanded value must be an array.","jsonld.SyntaxError");if(expandedValue.length===0){const itemActiveProperty=api.compactIri({activeCtx,iri:expandedProperty,value:expandedValue,relativeTo:{vocab:!0},reverse:insideReverse}),nestProperty=activeCtx.mappings.has(itemActiveProperty)?activeCtx.mappings.get(itemActiveProperty)["@nest"]:null;let nestResult=rval;nestProperty&&(_checkNestProperty(activeCtx,nestProperty,options),_isObject$1(rval[nestProperty])||(rval[nestProperty]={}),nestResult=rval[nestProperty]),_addValue(nestResult,itemActiveProperty,expandedValue,{propertyIsArray:!0})}for(const expandedItem of expandedValue){const itemActiveProperty=api.compactIri({activeCtx,iri:expandedProperty,value:expandedItem,relativeTo:{vocab:!0},reverse:insideReverse}),nestProperty=activeCtx.mappings.has(itemActiveProperty)?activeCtx.mappings.get(itemActiveProperty)["@nest"]:null;let nestResult=rval;nestProperty&&(_checkNestProperty(activeCtx,nestProperty,options),_isObject$1(rval[nestProperty])||(rval[nestProperty]={}),nestResult=rval[nestProperty]);const container=_getContextValue(activeCtx,itemActiveProperty,"@container")||[],isGraph=_isGraph(expandedItem),isList=_isList(expandedItem);let inner;isList?inner=expandedItem["@list"]:isGraph&&(inner=expandedItem["@graph"]);let compactedItem=await api.compact({activeCtx,activeProperty:itemActiveProperty,element:isList||isGraph?inner:expandedItem,options});if(isList)if(_isArray$1(compactedItem)||(compactedItem=[compactedItem]),!container.includes("@list"))compactedItem={[api.compactIri({activeCtx,iri:"@list",relativeTo:{vocab:!0}})]:compactedItem},"@index"in expandedItem&&(compactedItem[api.compactIri({activeCtx,iri:"@index",relativeTo:{vocab:!0}})]=expandedItem["@index"]);else{_addValue(nestResult,itemActiveProperty,compactedItem,{valueIsArray:!0,allowDuplicate:!0});continue}if(isGraph)if(container.includes("@graph")&&(container.includes("@id")||container.includes("@index")&&_isSimpleGraph(expandedItem))){let mapObject;nestResult.hasOwnProperty(itemActiveProperty)?mapObject=nestResult[itemActiveProperty]:nestResult[itemActiveProperty]=mapObject={};const key=(container.includes("@id")?expandedItem["@id"]:expandedItem["@index"])||api.compactIri({activeCtx,iri:"@none",relativeTo:{vocab:!0}});_addValue(mapObject,key,compactedItem,{propertyIsArray:!options.compactArrays||container.includes("@set")})}else container.includes("@graph")&&_isSimpleGraph(expandedItem)?(_isArray$1(compactedItem)&&compactedItem.length>1&&(compactedItem={"@included":compactedItem}),_addValue(nestResult,itemActiveProperty,compactedItem,{propertyIsArray:!options.compactArrays||container.includes("@set")})):(_isArray$1(compactedItem)&&compactedItem.length===1&&options.compactArrays&&(compactedItem=compactedItem[0]),compactedItem={[api.compactIri({activeCtx,iri:"@graph",relativeTo:{vocab:!0}})]:compactedItem},"@id"in expandedItem&&(compactedItem[api.compactIri({activeCtx,iri:"@id",relativeTo:{vocab:!0}})]=expandedItem["@id"]),"@index"in expandedItem&&(compactedItem[api.compactIri({activeCtx,iri:"@index",relativeTo:{vocab:!0}})]=expandedItem["@index"]),_addValue(nestResult,itemActiveProperty,compactedItem,{propertyIsArray:!options.compactArrays||container.includes("@set")}));else if(container.includes("@language")||container.includes("@index")||container.includes("@id")||container.includes("@type")){let mapObject;nestResult.hasOwnProperty(itemActiveProperty)?mapObject=nestResult[itemActiveProperty]:nestResult[itemActiveProperty]=mapObject={};let key;if(container.includes("@language"))_isValue(compactedItem)&&(compactedItem=compactedItem["@value"]),key=expandedItem["@language"];else if(container.includes("@index")){const indexKey=_getContextValue(activeCtx,itemActiveProperty,"@index")||"@index",containerKey=api.compactIri({activeCtx,iri:indexKey,relativeTo:{vocab:!0}});if(indexKey==="@index")key=expandedItem["@index"],delete compactedItem[containerKey];else{let others;if([key,...others]=_asArray(compactedItem[indexKey]||[]),!_isString$1(key))key=null;else switch(others.length){case 0:delete compactedItem[indexKey];break;case 1:compactedItem[indexKey]=others[0];break;default:compactedItem[indexKey]=others;break}}}else if(container.includes("@id")){const idKey=api.compactIri({activeCtx,iri:"@id",relativeTo:{vocab:!0}});key=compactedItem[idKey],delete compactedItem[idKey]}else if(container.includes("@type")){const typeKey=api.compactIri({activeCtx,iri:"@type",relativeTo:{vocab:!0}});let types3;switch([key,...types3]=_asArray(compactedItem[typeKey]||[]),types3.length){case 0:delete compactedItem[typeKey];break;case 1:compactedItem[typeKey]=types3[0];break;default:compactedItem[typeKey]=types3;break}Object.keys(compactedItem).length===1&&"@id"in expandedItem&&(compactedItem=await api.compact({activeCtx,activeProperty:itemActiveProperty,element:{"@id":expandedItem["@id"]},options}))}key||(key=api.compactIri({activeCtx,iri:"@none",relativeTo:{vocab:!0}})),_addValue(mapObject,key,compactedItem,{propertyIsArray:container.includes("@set")})}else{const isArray=!options.compactArrays||container.includes("@set")||container.includes("@list")||_isArray$1(compactedItem)&&compactedItem.length===0||expandedProperty==="@list"||expandedProperty==="@graph";_addValue(nestResult,itemActiveProperty,compactedItem,{propertyIsArray:isArray})}}}return rval}return element};api.compactIri=({activeCtx,iri,value=null,relativeTo={vocab:!1},reverse=!1,base=null})=>{if(iri===null)return iri;activeCtx.isPropertyTermScoped&&activeCtx.previousContext&&(activeCtx=activeCtx.previousContext);const inverseCtx=activeCtx.getInverse();if(_isKeyword(iri)&&iri in inverseCtx&&"@none"in inverseCtx[iri]&&"@type"in inverseCtx[iri]["@none"]&&"@none"in inverseCtx[iri]["@none"]["@type"])return inverseCtx[iri]["@none"]["@type"]["@none"];if(relativeTo.vocab&&iri in inverseCtx){const defaultLanguage=activeCtx["@language"]||"@none",containers=[];_isObject$1(value)&&"@index"in value&&!("@graph"in value)&&containers.push("@index","@index@set"),_isObject$1(value)&&"@preserve"in value&&(value=value["@preserve"][0]),_isGraph(value)?("@index"in value&&containers.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in value&&containers.push("@graph@id","@graph@id@set"),containers.push("@graph","@graph@set","@set"),"@index"in value||containers.push("@graph@index","@graph@index@set","@index","@index@set"),"@id"in value||containers.push("@graph@id","@graph@id@set")):_isObject$1(value)&&!_isValue(value)&&containers.push("@id","@id@set","@type","@set@type");let typeOrLanguage="@language",typeOrLanguageValue="@null";if(reverse)typeOrLanguage="@type",typeOrLanguageValue="@reverse",containers.push("@set");else if(_isList(value)){"@index"in value||containers.push("@list");const list=value["@list"];if(list.length===0)typeOrLanguage="@any",typeOrLanguageValue="@none";else{let commonLanguage=list.length===0?defaultLanguage:null,commonType=null;for(let i=0;i<list.length;++i){const item=list[i];let itemLanguage="@none",itemType="@none";if(_isValue(item))if("@direction"in item){const lang=(item["@language"]||"").toLowerCase(),dir=item["@direction"];itemLanguage=`${lang}_${dir}`}else"@language"in item?itemLanguage=item["@language"].toLowerCase():"@type"in item?itemType=item["@type"]:itemLanguage="@null";else itemType="@id";if(commonLanguage===null?commonLanguage=itemLanguage:itemLanguage!==commonLanguage&&_isValue(item)&&(commonLanguage="@none"),commonType===null?commonType=itemType:itemType!==commonType&&(commonType="@none"),commonLanguage==="@none"&&commonType==="@none")break}commonLanguage=commonLanguage||"@none",commonType=commonType||"@none",commonType!=="@none"?(typeOrLanguage="@type",typeOrLanguageValue=commonType):typeOrLanguageValue=commonLanguage}}else{if(_isValue(value))if("@language"in value&&!("@index"in value)){containers.push("@language","@language@set"),typeOrLanguageValue=value["@language"];const dir=value["@direction"];dir&&(typeOrLanguageValue=`${typeOrLanguageValue}_${dir}`)}else"@direction"in value&&!("@index"in value)?typeOrLanguageValue=`_${value["@direction"]}`:"@type"in value&&(typeOrLanguage="@type",typeOrLanguageValue=value["@type"]);else typeOrLanguage="@type",typeOrLanguageValue="@id";containers.push("@set")}containers.push("@none"),_isObject$1(value)&&!("@index"in value)&&containers.push("@index","@index@set"),_isValue(value)&&Object.keys(value).length===1&&containers.push("@language","@language@set");const term=_selectTerm(activeCtx,iri,value,containers,typeOrLanguage,typeOrLanguageValue);if(term!==null)return term}if(relativeTo.vocab&&"@vocab"in activeCtx){const vocab=activeCtx["@vocab"];if(iri.indexOf(vocab)===0&&iri!==vocab){const suffix=iri.substr(vocab.length);if(!activeCtx.mappings.has(suffix))return suffix}}let choice=null;const partialMatches=[];let iriMap=activeCtx.fastCurieMap;const maxPartialLength=iri.length-1;for(let i=0;i<maxPartialLength&&iri[i]in iriMap;++i)iriMap=iriMap[iri[i]],""in iriMap&&partialMatches.push(iriMap[""][0]);for(let i=partialMatches.length-1;i>=0;--i){const entry=partialMatches[i],terms=entry.terms;for(const term of terms){const curie=term+":"+iri.substr(entry.iri.length);activeCtx.mappings.get(term)._prefix&&(!activeCtx.mappings.has(curie)||value===null&&activeCtx.mappings.get(curie)["@id"]===iri)&&(choice===null||_compareShortestLeast(curie,choice)<0)&&(choice=curie)}}if(choice!==null)return choice;for(const[term,td]of activeCtx.mappings)if(td&&td._prefix&&iri.startsWith(term+":"))throw new JsonLdError$1(`Absolute IRI "${iri}" confused with prefix "${term}".`,"jsonld.SyntaxError",{code:"IRI confused with prefix",context:activeCtx});if(!relativeTo.vocab)if("@base"in activeCtx)if(activeCtx["@base"]){const _iri=_removeBase(_prependBase(base,activeCtx["@base"]),iri);return REGEX_KEYWORD.test(_iri)?`./${_iri}`:_iri}else return iri;else return _removeBase(base,iri);return iri};api.compactValue=({activeCtx,activeProperty,value,options})=>{if(_isValue(value)){const type2=_getContextValue(activeCtx,activeProperty,"@type"),language=_getContextValue(activeCtx,activeProperty,"@language"),direction=_getContextValue(activeCtx,activeProperty,"@direction"),container=_getContextValue(activeCtx,activeProperty,"@container")||[],preserveIndex="@index"in value&&!container.includes("@index");if(!preserveIndex&&type2!=="@none"&&(value["@type"]===type2||"@language"in value&&value["@language"]===language&&"@direction"in value&&value["@direction"]===direction||"@language"in value&&value["@language"]===language||"@direction"in value&&value["@direction"]===direction))return value["@value"];const keyCount=Object.keys(value).length,isValueOnlyKey=keyCount===1||keyCount===2&&"@index"in value&&!preserveIndex,hasDefaultLanguage="@language"in activeCtx,isValueString=_isString$1(value["@value"]),hasNullMapping=activeCtx.mappings.has(activeProperty)&&activeCtx.mappings.get(activeProperty)["@language"]===null;if(isValueOnlyKey&&type2!=="@none"&&(!hasDefaultLanguage||!isValueString||hasNullMapping))return value["@value"];const rval={};return preserveIndex&&(rval[api.compactIri({activeCtx,iri:"@index",relativeTo:{vocab:!0}})]=value["@index"]),"@type"in value?rval[api.compactIri({activeCtx,iri:"@type",relativeTo:{vocab:!0}})]=api.compactIri({activeCtx,iri:value["@type"],relativeTo:{vocab:!0}}):"@language"in value&&(rval[api.compactIri({activeCtx,iri:"@language",relativeTo:{vocab:!0}})]=value["@language"]),"@direction"in value&&(rval[api.compactIri({activeCtx,iri:"@direction",relativeTo:{vocab:!0}})]=value["@direction"]),rval[api.compactIri({activeCtx,iri:"@value",relativeTo:{vocab:!0}})]=value["@value"],rval}const expandedProperty=_expandIri$1(activeCtx,activeProperty,{vocab:!0},options),type=_getContextValue(activeCtx,activeProperty,"@type"),compacted=api.compactIri({activeCtx,iri:value["@id"],relativeTo:{vocab:type==="@vocab"},base:options.base});return type==="@id"||type==="@vocab"||expandedProperty==="@graph"?compacted:{[api.compactIri({activeCtx,iri:"@id",relativeTo:{vocab:!0}})]:compacted}};function _selectTerm(activeCtx,iri,value,containers,typeOrLanguage,typeOrLanguageValue){typeOrLanguageValue===null&&(typeOrLanguageValue="@null");const prefs=[];if((typeOrLanguageValue==="@id"||typeOrLanguageValue==="@reverse")&&_isObject$1(value)&&"@id"in value){typeOrLanguageValue==="@reverse"&&prefs.push("@reverse");const term=api.compactIri({activeCtx,iri:value["@id"],relativeTo:{vocab:!0}});activeCtx.mappings.has(term)&&activeCtx.mappings.get(term)&&activeCtx.mappings.get(term)["@id"]===value["@id"]?prefs.push.apply(prefs,["@vocab","@id"]):prefs.push.apply(prefs,["@id","@vocab"])}else{prefs.push(typeOrLanguageValue);const langDir=prefs.find(el=>el.includes("_"));langDir&&prefs.push(langDir.replace(/^[^_]+_/,"_"))}prefs.push("@none");const containerMap=activeCtx.inverse[iri];for(const container of containers){if(!(container in containerMap))continue;const typeOrLanguageValueMap=containerMap[container][typeOrLanguage];for(const pref of prefs)if(pref in typeOrLanguageValueMap)return typeOrLanguageValueMap[pref]}return null}__name(_selectTerm,"_selectTerm");function _checkNestProperty(activeCtx,nestProperty,options){if(_expandIri$1(activeCtx,nestProperty,{vocab:!0},options)!=="@nest")throw new JsonLdError$1("JSON-LD compact error; nested property must have an @nest value resolving to @nest.","jsonld.SyntaxError",{code:"invalid @nest value"})}__name(_checkNestProperty,"_checkNestProperty");var JsonLdProcessor,hasRequiredJsonLdProcessor;function requireJsonLdProcessor(){return hasRequiredJsonLdProcessor||(hasRequiredJsonLdProcessor=1,JsonLdProcessor=__name(jsonld2=>{const _JsonLdProcessor=class _JsonLdProcessor{toString(){return"[object JsonLdProcessor]"}};__name(_JsonLdProcessor,"JsonLdProcessor");let JsonLdProcessor2=_JsonLdProcessor;return Object.defineProperty(JsonLdProcessor2,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(JsonLdProcessor2.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:JsonLdProcessor2}),JsonLdProcessor2.compact=function(input,ctx){return arguments.length<2?Promise.reject(new TypeError("Could not compact, too few arguments.")):jsonld2.compact(input,ctx)},JsonLdProcessor2.expand=function(input){return arguments.length<1?Promise.reject(new TypeError("Could not expand, too few arguments.")):jsonld2.expand(input)},JsonLdProcessor2.flatten=function(input){return arguments.length<1?Promise.reject(new TypeError("Could not flatten, too few arguments.")):jsonld2.flatten(input)},JsonLdProcessor2},"JsonLdProcessor")),JsonLdProcessor}__name(requireJsonLdProcessor,"requireJsonLdProcessor");/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2022 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */const canonize=rdfCanonize,platform=platformBrowser,util=util$5,ContextResolver=ContextResolver_1,IdentifierIssuer=util.IdentifierIssuer,JsonLdError=JsonLdError_1,LRU=lruCache,NQuads=NQuads$1,{expand:_expand}=expand,{flatten:_flatten}=flatten,{fromRDF:_fromRDF}=fromRdf,{toRDF:_toRDF}=toRdf,{frameMergedOrDefault:_frameMergedOrDefault,cleanupNull:_cleanupNull}=frame,{isArray:_isArray,isObject:_isObject,isString:_isString}=types$7,{isSubjectReference:_isSubjectReference}=graphTypes$5,{expandIri:_expandIri,getInitialContext:_getInitialContext,process:_processContext,processingMode:_processingMode}=context,{compact:_compact,compactIri:_compactIri}=compact,{createNodeMap:_createNodeMap,createMergedNodeMap:_createMergedNodeMap,mergeNodeMaps:_mergeNodeMaps}=nodeMap,{logEventHandler:_logEventHandler,logWarningEventHandler:_logWarningEventHandler,safeEventHandler:_safeEventHandler,setDefaultEventHandler:_setDefaultEventHandler,setupEventHandler:_setupEventHandler,strictEventHandler:_strictEventHandler,unhandledEventHandler:_unhandledEventHandler}=events,wrapper=__name(function(jsonld2){const _rdfParsers={},_resolvedContextCache=new LRU({max:100});jsonld2.compact=async function(input,ctx,options){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");if(ctx===null)throw new JsonLdError("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"});if(input===null)return null;options=_setDefaults(options,{base:_isString(input)?input:"",compactArrays:!0,compactToRelative:!0,graph:!1,skipExpansion:!1,link:!1,issuer:new IdentifierIssuer("_:b"),contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})}),options.link&&(options.skipExpansion=!0),options.compactToRelative||delete options.base;let expanded;options.skipExpansion?expanded=input:expanded=await jsonld2.expand(input,options);const activeCtx=await jsonld2.processContext(_getInitialContext(options),ctx,options);let compacted=await _compact({activeCtx,element:expanded,options});options.compactArrays&&!options.graph&&_isArray(compacted)?compacted.length===1?compacted=compacted[0]:compacted.length===0&&(compacted={}):options.graph&&_isObject(compacted)&&(compacted=[compacted]),_isObject(ctx)&&"@context"in ctx&&(ctx=ctx["@context"]),ctx=util.clone(ctx),_isArray(ctx)||(ctx=[ctx]);const tmp=ctx;ctx=[];for(let i=0;i<tmp.length;++i)(!_isObject(tmp[i])||Object.keys(tmp[i]).length>0)&&ctx.push(tmp[i]);const hasContext=ctx.length>0;if(ctx.length===1&&(ctx=ctx[0]),_isArray(compacted)){const graphAlias=_compactIri({activeCtx,iri:"@graph",relativeTo:{vocab:!0}}),graph=compacted;compacted={},hasContext&&(compacted["@context"]=ctx),compacted[graphAlias]=graph}else if(_isObject(compacted)&&hasContext){const graph=compacted;compacted={"@context":ctx};for(const key in graph)compacted[key]=graph[key]}return compacted},jsonld2.expand=async function(input,options){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");options=_setDefaults(options,{keepFreeFloatingNodes:!1,contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})});const toResolve={},contextsToProcess=[];if("expandContext"in options){const expandContext=util.clone(options.expandContext);_isObject(expandContext)&&"@context"in expandContext?toResolve.expandContext=expandContext:toResolve.expandContext={"@context":expandContext},contextsToProcess.push(toResolve.expandContext)}let defaultBase;if(!_isString(input))toResolve.input=util.clone(input);else{const remoteDoc=await jsonld2.get(input,options);defaultBase=remoteDoc.documentUrl,toResolve.input=remoteDoc.document,remoteDoc.contextUrl&&(toResolve.remoteContext={"@context":remoteDoc.contextUrl},contextsToProcess.push(toResolve.remoteContext))}"base"in options||(options.base=defaultBase||"");let activeCtx=_getInitialContext(options);for(const localCtx of contextsToProcess)activeCtx=await _processContext({activeCtx,localCtx,options});let expanded=await _expand({activeCtx,element:toResolve.input,options});return _isObject(expanded)&&"@graph"in expanded&&Object.keys(expanded).length===1?expanded=expanded["@graph"]:expanded===null&&(expanded=[]),_isArray(expanded)||(expanded=[expanded]),expanded},jsonld2.flatten=async function(input,ctx,options){if(arguments.length<1)return new TypeError("Could not flatten, too few arguments.");typeof ctx=="function"?ctx=null:ctx=ctx||null,options=_setDefaults(options,{base:_isString(input)?input:"",contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})});const expanded=await jsonld2.expand(input,options),flattened=_flatten(expanded);return ctx===null?flattened:(options.graph=!0,options.skipExpansion=!0,await jsonld2.compact(flattened,ctx,options))},jsonld2.frame=async function(input,frame2,options){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");if(options=_setDefaults(options,{base:_isString(input)?input:"",embed:"@once",explicit:!1,requireAll:!1,omitDefault:!1,bnodesToClear:[],contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})}),_isString(frame2)){const remoteDoc=await jsonld2.get(frame2,options);if(frame2=remoteDoc.document,remoteDoc.contextUrl){let ctx=frame2["@context"];ctx?_isArray(ctx)?ctx.push(remoteDoc.contextUrl):ctx=[ctx,remoteDoc.contextUrl]:ctx=remoteDoc.contextUrl,frame2["@context"]=ctx}}const frameContext=frame2?frame2["@context"]||{}:{},activeCtx=await jsonld2.processContext(_getInitialContext(options),frameContext,options);options.hasOwnProperty("omitGraph")||(options.omitGraph=_processingMode(activeCtx,1.1)),options.hasOwnProperty("pruneBlankNodeIdentifiers")||(options.pruneBlankNodeIdentifiers=_processingMode(activeCtx,1.1));const expanded=await jsonld2.expand(input,options),opts={...options};opts.isFrame=!0,opts.keepFreeFloatingNodes=!0;const expandedFrame=await jsonld2.expand(frame2,opts),frameKeys=Object.keys(frame2).map(key=>_expandIri(activeCtx,key,{vocab:!0}));opts.merged=!frameKeys.includes("@graph"),opts.is11=_processingMode(activeCtx,1.1);const framed=_frameMergedOrDefault(expanded,expandedFrame,opts);opts.graph=!options.omitGraph,opts.skipExpansion=!0,opts.link={},opts.framing=!0;let compacted=await jsonld2.compact(framed,frameContext,opts);return opts.link={},compacted=_cleanupNull(compacted,opts),compacted},jsonld2.link=async function(input,ctx,options){const frame2={};return ctx&&(frame2["@context"]=ctx),frame2["@embed"]="@link",jsonld2.frame(input,frame2,options)},jsonld2.normalize=jsonld2.canonize=async function(input,options){if(arguments.length<1)throw new TypeError("Could not canonize, too few arguments.");if(options=_setDefaults(options,{base:_isString(input)?input:null,algorithm:"URDNA2015",skipExpansion:!1,safe:!0,contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})}),"inputFormat"in options){if(options.inputFormat!=="application/n-quads"&&options.inputFormat!=="application/nquads")throw new JsonLdError("Unknown canonicalization input format.","jsonld.CanonizeError");const parsedInput=NQuads.parse(input);return canonize.canonize(parsedInput,options)}const opts={...options};delete opts.format,opts.produceGeneralizedRdf=!1;const dataset=await jsonld2.toRDF(input,opts);return canonize.canonize(dataset,options)},jsonld2.fromRDF=async function(dataset,options){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");options=_setDefaults(options,{format:_isString(dataset)?"application/n-quads":void 0});const{format}=options;let{rdfParser}=options;if(format){if(rdfParser=rdfParser||_rdfParsers[format],!rdfParser)throw new JsonLdError("Unknown input format.","jsonld.UnknownFormat",{format})}else rdfParser=__name(()=>dataset,"rdfParser");const parsedDataset=await rdfParser(dataset);return _fromRDF(parsedDataset,options)},jsonld2.toRDF=async function(input,options){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");options=_setDefaults(options,{base:_isString(input)?input:"",skipExpansion:!1,contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})});let expanded;options.skipExpansion?expanded=input:expanded=await jsonld2.expand(input,options);const dataset=_toRDF(expanded,options);if(options.format){if(options.format==="application/n-quads"||options.format==="application/nquads")return NQuads.serialize(dataset);throw new JsonLdError("Unknown output format.","jsonld.UnknownFormat",{format:options.format})}return dataset},jsonld2.createNodeMap=async function(input,options){if(arguments.length<1)throw new TypeError("Could not create node map, too few arguments.");options=_setDefaults(options,{base:_isString(input)?input:"",contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})});const expanded=await jsonld2.expand(input,options);return _createMergedNodeMap(expanded,options)},jsonld2.merge=async function(docs,ctx,options){if(arguments.length<1)throw new TypeError("Could not merge, too few arguments.");if(!_isArray(docs))throw new TypeError('Could not merge, "docs" must be an array.');typeof ctx=="function"?ctx=null:ctx=ctx||null,options=_setDefaults(options,{contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})});const expanded=await Promise.all(docs.map(doc=>{const opts={...options};return jsonld2.expand(doc,opts)}));let mergeNodes=!0;"mergeNodes"in options&&(mergeNodes=options.mergeNodes);const issuer=options.issuer||new IdentifierIssuer("_:b"),graphs={"@default":{}};for(let i=0;i<expanded.length;++i){const doc=util.relabelBlankNodes(expanded[i],{issuer:new IdentifierIssuer("_:b"+i+"-")}),_graphs=mergeNodes||i===0?graphs:{"@default":{}};if(_createNodeMap(doc,_graphs,"@default",issuer),_graphs!==graphs)for(const graphName in _graphs){const _nodeMap=_graphs[graphName];if(!(graphName in graphs)){graphs[graphName]=_nodeMap;continue}const nodeMap2=graphs[graphName];for(const key in _nodeMap)key in nodeMap2||(nodeMap2[key]=_nodeMap[key])}}const defaultGraph=_mergeNodeMaps(graphs),flattened=[],keys=Object.keys(defaultGraph).sort();for(let ki2=0;ki2<keys.length;++ki2){const node=defaultGraph[keys[ki2]];_isSubjectReference(node)||flattened.push(node)}return ctx===null?flattened:(options.graph=!0,options.skipExpansion=!0,await jsonld2.compact(flattened,ctx,options))},Object.defineProperty(jsonld2,"documentLoader",{get:()=>jsonld2._documentLoader,set:v=>jsonld2._documentLoader=v}),jsonld2.documentLoader=async url2=>{throw new JsonLdError("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",url:url2})},jsonld2.get=async function(url2,options){let load;typeof options.documentLoader=="function"?load=options.documentLoader:load=jsonld2.documentLoader;const remoteDoc=await load(url2);try{if(!remoteDoc.document)throw new JsonLdError("No remote document found at the given URL.","jsonld.NullRemoteDocument");_isString(remoteDoc.document)&&(remoteDoc.document=JSON.parse(remoteDoc.document))}catch(e){throw new JsonLdError("Could not retrieve a JSON-LD document from the URL.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc})}return remoteDoc},jsonld2.processContext=async function(activeCtx,localCtx,options){return options=_setDefaults(options,{base:"",contextResolver:new ContextResolver({sharedCache:_resolvedContextCache})}),localCtx===null?_getInitialContext(options):(localCtx=util.clone(localCtx),_isObject(localCtx)&&"@context"in localCtx||(localCtx={"@context":localCtx}),_processContext({activeCtx,localCtx,options}))},jsonld2.getContextValue=context.getContextValue,jsonld2.documentLoaders={},jsonld2.useDocumentLoader=function(type){if(!(type in jsonld2.documentLoaders))throw new JsonLdError('Unknown document loader type: "'+type+'"',"jsonld.UnknownDocumentLoader",{type});jsonld2.documentLoader=jsonld2.documentLoaders[type].apply(jsonld2,Array.prototype.slice.call(arguments,1))},jsonld2.registerRDFParser=function(contentType,parser){_rdfParsers[contentType]=parser},jsonld2.unregisterRDFParser=function(contentType){delete _rdfParsers[contentType]},jsonld2.registerRDFParser("application/n-quads",NQuads.parse),jsonld2.registerRDFParser("application/nquads",NQuads.parse),jsonld2.url=url$1,jsonld2.logEventHandler=_logEventHandler,jsonld2.logWarningEventHandler=_logWarningEventHandler,jsonld2.safeEventHandler=_safeEventHandler,jsonld2.setDefaultEventHandler=_setDefaultEventHandler,jsonld2.strictEventHandler=_strictEventHandler,jsonld2.unhandledEventHandler=_unhandledEventHandler,jsonld2.util=util,Object.assign(jsonld2,util),jsonld2.promises=jsonld2,jsonld2.RequestQueue=requireRequestQueue(),jsonld2.JsonLdProcessor=requireJsonLdProcessor()(jsonld2),platform.setupGlobals(jsonld2),platform.setupDocumentLoaders(jsonld2);function _setDefaults(options,{documentLoader=jsonld2.documentLoader,...defaults}){if(options&&"compactionMap"in options)throw new JsonLdError('"compactionMap" not supported.',"jsonld.OptionsError");if(options&&"expansionMap"in options)throw new JsonLdError('"expansionMap" not supported.',"jsonld.OptionsError");return Object.assign({},{documentLoader},defaults,options,{eventHandler:_setupEventHandler({options})})}return __name(_setDefaults,"_setDefaults"),jsonld2},"wrapper"),factory=__name(function(){return wrapper(function(){return factory()})},"factory");wrapper(factory);var jsonld=factory;const jsonld$1=getDefaultExportFromCjs(jsonld);var bundle$7={exports:{}};(function(module,exports){(function(e,t){module.exports=t()})(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return __name(n,"n"),n.m=e,n.c=t,n.d=function(e2,t2,r){n.o(e2,t2)||Object.defineProperty(e2,t2,{enumerable:!0,get:r})},n.r=function(e2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e2,"__esModule",{value:!0})},n.t=function(e2,t2){if(1&t2&&(e2=n(e2)),8&t2||4&t2&&typeof e2=="object"&&e2&&e2.__esModule)return e2;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e2}),2&t2&&typeof e2!="string")for(var i in e2)n.d(r,i,(function(t3){return e2[t3]}).bind(null,i));return r},n.n=function(e2){var t2=e2&&e2.__esModule?function(){return e2.default}:function(){return e2};return n.d(t2,"a",t2),t2},n.o=function(e2,t2){return Object.prototype.hasOwnProperty.call(e2,t2)},n.p="/",n(n.s=4)}([function(e,t,n){var r=n(1),i=n(2);typeof(i=i.__esModule?i.default:i)=="string"&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o),e.exports=i.locals||{}},function(e,t,n){var r,i=__name(function(){return r===void 0&&(r=!!(window&&document&&document.all&&!window.atob)),r},"i"),o=function(){var e2={};return function(t2){if(e2[t2]===void 0){var n2=document.querySelector(t2);if(window.HTMLIFrameElement&&n2 instanceof window.HTMLIFrameElement)try{n2=n2.contentDocument.head}catch{n2=null}e2[t2]=n2}return e2[t2]}}(),a=[];function s(e2){for(var t2=-1,n2=0;n2<a.length;n2++)if(a[n2].identifier===e2){t2=n2;break}return t2}__name(s,"s");function c(e2,t2){for(var n2={},r2=[],i2=0;i2<e2.length;i2++){var o2=e2[i2],c2=t2.base?o2[0]+t2.base:o2[0],l2=n2[c2]||0,u2="".concat(c2," ").concat(l2);n2[c2]=l2+1;var d3=s(u2),f2={css:o2[1],media:o2[2],sourceMap:o2[3]};d3!==-1?(a[d3].references++,a[d3].updater(f2)):a.push({identifier:u2,updater:y(f2,t2),references:1}),r2.push(u2)}return r2}__name(c,"c");function l(e2){var t2=document.createElement("style"),r2=e2.attributes||{};if(r2.nonce===void 0){var i2=n.nc;i2&&(r2.nonce=i2)}if(Object.keys(r2).forEach(function(e3){t2.setAttribute(e3,r2[e3])}),typeof e2.insert=="function")e2.insert(t2);else{var a2=o(e2.insert||"head");if(!a2)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a2.appendChild(t2)}return t2}__name(l,"l");var u,d2=(u=[],function(e2,t2){return u[e2]=t2,u.filter(Boolean).join(`
`)});function f(e2,t2,n2,r2){var i2=n2?"":r2.media?"@media ".concat(r2.media," {").concat(r2.css,"}"):r2.css;if(e2.styleSheet)e2.styleSheet.cssText=d2(t2,i2);else{var o2=document.createTextNode(i2),a2=e2.childNodes;a2[t2]&&e2.removeChild(a2[t2]),a2.length?e2.insertBefore(o2,a2[t2]):e2.appendChild(o2)}}__name(f,"f");function p(e2,t2,n2){var r2=n2.css,i2=n2.media,o2=n2.sourceMap;if(i2?e2.setAttribute("media",i2):e2.removeAttribute("media"),o2&&btoa&&(r2+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(o2))))," */")),e2.styleSheet)e2.styleSheet.cssText=r2;else{for(;e2.firstChild;)e2.removeChild(e2.firstChild);e2.appendChild(document.createTextNode(r2))}}__name(p,"p");var h=null,m2=0;function y(e2,t2){var n2,r2,i2;if(t2.singleton){var o2=m2++;n2=h||(h=l(t2)),r2=f.bind(null,n2,o2,!1),i2=f.bind(null,n2,o2,!0)}else n2=l(t2),r2=p.bind(null,n2,t2),i2=__name(function(){(function(e3){if(e3.parentNode===null)return!1;e3.parentNode.removeChild(e3)})(n2)},"i");return r2(e2),function(t3){if(t3){if(t3.css===e2.css&&t3.media===e2.media&&t3.sourceMap===e2.sourceMap)return;r2(e2=t3)}else i2()}}__name(y,"y"),e.exports=function(e2,t2){(t2=t2||{}).singleton||typeof t2.singleton=="boolean"||(t2.singleton=i());var n2=c(e2=e2||[],t2);return function(e3){if(e3=e3||[],Object.prototype.toString.call(e3)==="[object Array]"){for(var r2=0;r2<n2.length;r2++){var i2=s(n2[r2]);a[i2].references--}for(var o2=c(e3,t2),l2=0;l2<n2.length;l2++){var u2=s(n2[l2]);a[u2].references===0&&(a[u2].updater(),a.splice(u2,1))}n2=o2}}}},function(e,t,n){(t=n(3)(!1)).push([e.i,`.cdx-list {
    margin: 0;
    padding-left: 40px;
    outline: none;
}

    .cdx-list__item {
        padding: 5.5px 0 5.5px 3px;
        line-height: 1.6em;
    }

    .cdx-list--unordered {
        list-style: disc;
    }

    .cdx-list--ordered {
        list-style: decimal;
    }

    .cdx-list-settings {
        display: flex;
    }

    .cdx-list-settings .cdx-settings-button {
            width: 50%;
        }
`,""]),e.exports=t},function(e,t,n){e.exports=function(e2){var t2=[];return t2.toString=function(){return this.map(function(t3){var n2=function(e3,t4){var n3=e3[1]||"",r=e3[3];if(!r)return n3;if(t4&&typeof btoa=="function"){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map(function(e4){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e4," */")});return[n3].concat(o).concat([i]).join(`
`)}var a,s,c;return[n3].join(`
`)}(t3,e2);return t3[2]?"@media ".concat(t3[2]," {").concat(n2,"}"):n2}).join("")},t2.i=function(e3,n2,r){typeof e3=="string"&&(e3=[[null,e3,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];a!=null&&(i[a]=!0)}for(var s=0;s<e3.length;s++){var c=[].concat(e3[s]);r&&i[c[0]]||(n2&&(c[2]?c[2]="".concat(n2," and ").concat(c[2]):c[2]=n2),t2.push(c))}},t2}},function(e,t,n){n.r(t),n.d(t,"default",function(){return d2}),n(0);const r='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>';function i(e2){return function(e3){if(Array.isArray(e3))return o(e3)}(e2)||function(e3){if(typeof Symbol<"u"&&Symbol.iterator in Object(e3))return Array.from(e3)}(e2)||function(e3,t2){if(e3){if(typeof e3=="string")return o(e3,t2);var n2=Object.prototype.toString.call(e3).slice(8,-1);if(n2==="Object"&&e3.constructor&&(n2=e3.constructor.name),n2==="Map"||n2==="Set")return Array.from(e3);if(n2==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))return o(e3,t2)}}(e2)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}__name(i,"i");function o(e2,t2){(t2==null||t2>e2.length)&&(t2=e2.length);for(var n2=0,r2=new Array(t2);n2<t2;n2++)r2[n2]=e2[n2];return r2}__name(o,"o");function a(e2,t2){var n2=Object.keys(e2);if(Object.getOwnPropertySymbols){var r2=Object.getOwnPropertySymbols(e2);t2&&(r2=r2.filter(function(t3){return Object.getOwnPropertyDescriptor(e2,t3).enumerable})),n2.push.apply(n2,r2)}return n2}__name(a,"a");function s(e2){for(var t2=1;t2<arguments.length;t2++){var n2=arguments[t2]!=null?arguments[t2]:{};t2%2?a(Object(n2),!0).forEach(function(t3){c(e2,t3,n2[t3])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e2,Object.getOwnPropertyDescriptors(n2)):a(Object(n2)).forEach(function(t3){Object.defineProperty(e2,t3,Object.getOwnPropertyDescriptor(n2,t3))})}return e2}__name(s,"s");function c(e2,t2,n2){return t2 in e2?Object.defineProperty(e2,t2,{value:n2,enumerable:!0,configurable:!0,writable:!0}):e2[t2]=n2,e2}__name(c,"c");function l(e2,t2){for(var n2=0;n2<t2.length;n2++){var r2=t2[n2];r2.enumerable=r2.enumerable||!1,r2.configurable=!0,"value"in r2&&(r2.writable=!0),Object.defineProperty(e2,r2.key,r2)}}__name(l,"l");function u(e2,t2,n2){return t2&&l(e2.prototype,t2),n2&&l(e2,n2),e2}__name(u,"u");var d2=function(){function e2(t2){var n2=t2.data,i2=t2.config,o2=t2.api,a2=t2.readOnly;(function(e3,t3){if(!(e3 instanceof t3))throw new TypeError("Cannot call a class as a function")})(this,e2),this._elements={wrapper:null},this.api=o2,this.readOnly=a2,this.settings=[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:r,default:i2.defaultStyle==="unordered"||!1},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>',default:i2.defaultStyle==="ordered"||!0}],this._data={style:this.settings.find(function(e3){return e3.default===!0}).name,items:[]},this.data=n2}return __name(e2,"e"),u(e2,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"enableLineBreaks",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:r,title:"List"}}}]),u(e2,[{key:"render",value:function(){var e3=this;return this._elements.wrapper=this.makeMainTag(this._data.style),this._data.items.length?this._data.items.forEach(function(t2){e3._elements.wrapper.appendChild(e3._make("li",e3.CSS.item,{innerHTML:t2}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this.readOnly||this._elements.wrapper.addEventListener("keydown",function(t2){switch(t2.keyCode){case 13:e3.getOutofList(t2);break;case 8:e3.backspace(t2)}},!1),this._elements.wrapper}},{key:"save",value:function(){return this.data}},{key:"renderSettings",value:function(){var e3=this;return this.settings.map(function(t2){return s(s({},t2),{},{isActive:e3._data.style===t2.name,closeOnActivate:!0,onActivate:function(){return e3.toggleTune(t2.name)}})})}},{key:"onPaste",value:function(e3){var t2=e3.detail.data;this.data=this.pasteHandler(t2)}},{key:"makeMainTag",value:function(e3){var t2=e3==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered,n2=e3==="ordered"?"ol":"ul";return this._make(n2,[this.CSS.baseBlock,this.CSS.wrapper,t2],{contentEditable:!this.readOnly})}},{key:"toggleTune",value:function(e3){for(var t2=this.makeMainTag(e3);this._elements.wrapper.hasChildNodes();)t2.appendChild(this._elements.wrapper.firstChild);this._elements.wrapper.replaceWith(t2),this._elements.wrapper=t2,this._data.style=e3}},{key:"_make",value:function(e3){var t2,n2=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r2=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o2=document.createElement(e3);Array.isArray(n2)?(t2=o2.classList).add.apply(t2,i(n2)):n2&&o2.classList.add(n2);for(var a2 in r2)o2[a2]=r2[a2];return o2}},{key:"getOutofList",value:function(e3){var t2=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(!(t2.length<2)){var n2=t2[t2.length-1],r2=this.currentItem;r2!==n2||n2.textContent.trim().length||(r2.parentElement.removeChild(r2),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex()),e3.preventDefault(),e3.stopPropagation())}}},{key:"backspace",value:function(e3){var t2=this._elements.wrapper.querySelectorAll("."+this.CSS.item),n2=t2[0];n2&&t2.length<2&&!n2.innerHTML.replace("<br>"," ").trim()&&e3.preventDefault()}},{key:"selectItem",value:function(e3){e3.preventDefault();var t2=window.getSelection(),n2=t2.anchorNode.parentNode.closest("."+this.CSS.item),r2=new Range;r2.selectNodeContents(n2),t2.removeAllRanges(),t2.addRange(r2)}},{key:"pasteHandler",value:function(e3){var t2,n2=e3.tagName;switch(n2){case"OL":t2="ordered";break;case"UL":case"LI":t2="unordered"}var r2={style:t2,items:[]};if(n2==="LI")r2.items=[e3.innerHTML];else{var i2=Array.from(e3.querySelectorAll("LI"));r2.items=i2.map(function(e4){return e4.innerHTML}).filter(function(e4){return!!e4.trim()})}return r2}},{key:"CSS",get:function(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item"}}},{key:"data",set:function(e3){e3||(e3={}),this._data.style=e3.style||this.settings.find(function(e4){return e4.default===!0}).name,this._data.items=e3.items||[];var t2=this._elements.wrapper;t2&&t2.parentNode.replaceChild(this.render(),t2)},get:function(){this._data.items=[];for(var e3=this._elements.wrapper.querySelectorAll(".".concat(this.CSS.item)),t2=0;t2<e3.length;t2++)e3[t2].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(e3[t2].innerHTML);return this._data}},{key:"currentItem",get:function(){var e3=window.getSelection().anchorNode;return e3.nodeType!==Node.ELEMENT_NODE&&(e3=e3.parentNode),e3.closest(".".concat(this.CSS.item))}}],[{key:"conversionConfig",get:function(){return{export:function(e3){return e3.items.join(". ")},import:function(e3){return{items:[e3],style:"unordered"}}}}},{key:"sanitize",get:function(){return{style:{},items:{br:!0}}}},{key:"pasteConfig",get:function(){return{tags:["OL","UL","LI"]}}}]),e2}()}]).default})})(bundle$7);var bundleExports$7=bundle$7.exports;const List=getDefaultExportFromCjs(bundleExports$7);var bundle$6={exports:{}};(function(module,exports){(function(t,e){module.exports=e()})(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return __name(n,"n"),n.m=t,n.c=e,n.d=function(t2,e2,r){n.o(t2,e2)||Object.defineProperty(t2,e2,{enumerable:!0,get:r})},n.r=function(t2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t2,"__esModule",{value:!0})},n.t=function(t2,e2){if(1&e2&&(t2=n(t2)),8&e2||4&e2&&typeof t2=="object"&&t2&&t2.__esModule)return t2;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t2}),2&e2&&typeof t2!="string")for(var o in t2)n.d(r,o,(function(e3){return t2[e3]}).bind(null,o));return r},n.n=function(t2){var e2=t2&&t2.__esModule?function(){return t2.default}:function(){return t2};return n.d(e2,"a",e2),e2},n.o=function(t2,e2){return Object.prototype.hasOwnProperty.call(t2,e2)},n.p="/",n(n.s=18)}([function(t,e,n){t.exports=n(11)},function(t,e){function n(t2,e2){for(var n2=0;n2<e2.length;n2++){var r=e2[n2];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t2,r.key,r)}}__name(n,"n"),t.exports=function(t2,e2,r){return e2&&n(t2.prototype,e2),r&&n(t2,r),t2}},function(t,e){t.exports=function(t2,e2){(e2==null||e2>t2.length)&&(e2=t2.length);for(var n=0,r=new Array(e2);n<e2;n++)r[n]=t2[n];return r}},function(t,e,n){var r=n(7),o=n(8),i=n(9),a=n(10);t.exports=function(t2){return r(t2)||o(t2)||i(t2)||a()}},function(t,e){function n(t2,e2,n2,r,o,i,a){try{var s=t2[i](a),c=s.value}catch(t3){return void n2(t3)}s.done?e2(c):Promise.resolve(c).then(r,o)}__name(n,"n"),t.exports=function(t2){return function(){var e2=this,r=arguments;return new Promise(function(o,i){var a=t2.apply(e2,r);function s(t3){n(a,o,i,s,c,"next",t3)}__name(s,"s");function c(t3){n(a,o,i,s,c,"throw",t3)}__name(c,"c"),s(void 0)})}}},function(t,e){t.exports=function(t2,e2){if(!(t2 instanceof e2))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){t.exports=function(t2){var e2={};function n2(r){if(e2[r])return e2[r].exports;var o=e2[r]={i:r,l:!1,exports:{}};return t2[r].call(o.exports,o,o.exports,n2),o.l=!0,o.exports}return __name(n2,"n"),n2.m=t2,n2.c=e2,n2.d=function(t3,e3,r){n2.o(t3,e3)||Object.defineProperty(t3,e3,{enumerable:!0,get:r})},n2.r=function(t3){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t3,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t3,"__esModule",{value:!0})},n2.t=function(t3,e3){if(1&e3&&(t3=n2(t3)),8&e3||4&e3&&typeof t3=="object"&&t3&&t3.__esModule)return t3;var r=Object.create(null);if(n2.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t3}),2&e3&&typeof t3!="string")for(var o in t3)n2.d(r,o,(function(e4){return t3[e4]}).bind(null,o));return r},n2.n=function(t3){var e3=t3&&t3.__esModule?function(){return t3.default}:function(){return t3};return n2.d(e3,"a",e3),e3},n2.o=function(t3,e3){return Object.prototype.hasOwnProperty.call(t3,e3)},n2.p="",n2(n2.s=3)}([function(t2,e2){var n2;n2=function(){return this}();try{n2=n2||new Function("return this")()}catch{typeof window=="object"&&(n2=window)}t2.exports=n2},function(t2,e2,n2){(function(t3){var r=n2(2),o=setTimeout;function i(){}__name(i,"i");function a(t4){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if(typeof t4!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d2(t4,this)}__name(a,"a");function s(t4,e3){for(;t4._state===3;)t4=t4._value;t4._state!==0?(t4._handled=!0,a._immediateFn(function(){var n3=t4._state===1?e3.onFulfilled:e3.onRejected;if(n3!==null){var r2;try{r2=n3(t4._value)}catch(t5){return void u(e3.promise,t5)}c(e3.promise,r2)}else(t4._state===1?c:u)(e3.promise,t4._value)})):t4._deferreds.push(e3)}__name(s,"s");function c(t4,e3){try{if(e3===t4)throw new TypeError("A promise cannot be resolved with itself.");if(e3&&(typeof e3=="object"||typeof e3=="function")){var n3=e3.then;if(e3 instanceof a)return t4._state=3,t4._value=e3,void l(t4);if(typeof n3=="function")return void d2((r2=n3,o2=e3,function(){r2.apply(o2,arguments)}),t4)}t4._state=1,t4._value=e3,l(t4)}catch(e4){u(t4,e4)}var r2,o2}__name(c,"c");function u(t4,e3){t4._state=2,t4._value=e3,l(t4)}__name(u,"u");function l(t4){t4._state===2&&t4._deferreds.length===0&&a._immediateFn(function(){t4._handled||a._unhandledRejectionFn(t4._value)});for(var e3=0,n3=t4._deferreds.length;e3<n3;e3++)s(t4,t4._deferreds[e3]);t4._deferreds=null}__name(l,"l");function f(t4,e3,n3){this.onFulfilled=typeof t4=="function"?t4:null,this.onRejected=typeof e3=="function"?e3:null,this.promise=n3}__name(f,"f");function d2(t4,e3){var n3=!1;try{t4(function(t5){n3||(n3=!0,c(e3,t5))},function(t5){n3||(n3=!0,u(e3,t5))})}catch(t5){if(n3)return;n3=!0,u(e3,t5)}}__name(d2,"d"),a.prototype.catch=function(t4){return this.then(null,t4)},a.prototype.then=function(t4,e3){var n3=new this.constructor(i);return s(this,new f(t4,e3,n3)),n3},a.prototype.finally=r.a,a.all=function(t4){return new a(function(e3,n3){if(!t4||t4.length===void 0)throw new TypeError("Promise.all accepts an array");var r2=Array.prototype.slice.call(t4);if(r2.length===0)return e3([]);var o2=r2.length;function i2(t5,a3){try{if(a3&&(typeof a3=="object"||typeof a3=="function")){var s2=a3.then;if(typeof s2=="function")return void s2.call(a3,function(e4){i2(t5,e4)},n3)}r2[t5]=a3,--o2==0&&e3(r2)}catch(t6){n3(t6)}}__name(i2,"i");for(var a2=0;a2<r2.length;a2++)i2(a2,r2[a2])})},a.resolve=function(t4){return t4&&typeof t4=="object"&&t4.constructor===a?t4:new a(function(e3){e3(t4)})},a.reject=function(t4){return new a(function(e3,n3){n3(t4)})},a.race=function(t4){return new a(function(e3,n3){for(var r2=0,o2=t4.length;r2<o2;r2++)t4[r2].then(e3,n3)})},a._immediateFn=typeof t3=="function"&&function(e3){t3(e3)}||function(t4){o(t4,0)},a._unhandledRejectionFn=function(t4){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",t4)},e2.a=a}).call(this,n2(5).setImmediate)},function(t2,e2,n2){e2.a=function(t3){var e3=this.constructor;return this.then(function(n3){return e3.resolve(t3()).then(function(){return n3})},function(n3){return e3.resolve(t3()).then(function(){return e3.reject(n3)})})}},function(t2,e2,n2){function r(t3){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t4){return typeof t4}:function(t4){return t4&&typeof Symbol=="function"&&t4.constructor===Symbol&&t4!==Symbol.prototype?"symbol":typeof t4})(t3)}__name(r,"r"),n2(4);var o,i,a,s,c,u,l=n2(8),f=(i=__name(function(t3){return new Promise(function(e3,n3){t3=s(t3),t3=c(t3);var r2=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");r2.open(t3.method,t3.url),r2.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(t3.headers).forEach(function(e4){var n4=t3.headers[e4];r2.setRequestHeader(e4,n4)});var o2=t3.ratio;r2.upload.addEventListener("progress",function(e4){var n4=Math.round(e4.loaded/e4.total*100),r3=Math.ceil(n4*o2/100);t3.progress(r3)},!1),r2.addEventListener("progress",function(e4){var n4=Math.round(e4.loaded/e4.total*100),r3=Math.ceil(n4*(100-o2)/100)+o2;t3.progress(r3)},!1),r2.onreadystatechange=function(){if(r2.readyState===4){var t4=r2.response;try{t4=JSON.parse(t4)}catch{}var o3=l.parseHeaders(r2.getAllResponseHeaders()),i2={body:t4,code:r2.status,headers:o3};r2.status===200?e3(i2):n3(i2)}},r2.send(t3.data)})},"i"),a=__name(function(t3){return t3.method="POST",i(t3)},"a"),s=__name(function(){var t3=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t3.url&&typeof t3.url!="string")throw new Error("Url must be a string");if(t3.url=t3.url||"",t3.method&&typeof t3.method!="string")throw new Error("`method` must be a string or null");if(t3.method=t3.method?t3.method.toUpperCase():"GET",t3.headers&&r(t3.headers)!=="object")throw new Error("`headers` must be an object or null");if(t3.headers=t3.headers||{},t3.type&&(typeof t3.type!="string"||!Object.values(o).includes(t3.type)))throw new Error("`type` must be taken from module's «contentType» library");if(t3.progress&&typeof t3.progress!="function")throw new Error("`progress` must be a function or null");if(t3.progress=t3.progress||function(t4){},t3.beforeSend=t3.beforeSend||function(t4){},t3.ratio&&typeof t3.ratio!="number")throw new Error("`ratio` must be a number");if(t3.ratio<0||t3.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(t3.ratio=t3.ratio||90,t3.accept&&typeof t3.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(t3.accept=t3.accept||"*/*",t3.multiple&&typeof t3.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(t3.multiple=t3.multiple||!1,t3.fieldName&&typeof t3.fieldName!="string")throw new Error("`fieldName` must be a string");return t3.fieldName=t3.fieldName||"files",t3},"s"),c=__name(function(t3){switch(t3.method){case"GET":var e3=u(t3.data,o.URLENCODED);delete t3.data,t3.url=/\?/.test(t3.url)?t3.url+"&"+e3:t3.url+"?"+e3;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var n3=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||o.JSON}(t3);(l.isFormData(t3.data)||l.isFormElement(t3.data))&&(n3=o.FORM),t3.data=u(t3.data,n3),n3!==f.contentType.FORM&&(t3.headers["content-type"]=n3)}return t3},"c"),u=__name(function(){var t3=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case o.URLENCODED:return l.urlEncode(t3);case o.JSON:return l.jsonEncode(t3);case o.FORM:return l.formEncode(t3);default:return t3}},"u"),{contentType:o={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:i,get:function(t3){return t3.method="GET",i(t3)},post:a,transport:function(t3){return t3=s(t3),l.selectFiles(t3).then(function(e3){for(var n3=new FormData,r2=0;r2<e3.length;r2++)n3.append(t3.fieldName,e3[r2],e3[r2].name);return l.isObject(t3.data)&&Object.keys(t3.data).forEach(function(e4){var r3=t3.data[e4];n3.append(e4,r3)}),t3.beforeSend&&t3.beforeSend(e3),t3.data=n3,a(t3)})},selectFiles:function(t3){return delete(t3=s(t3)).beforeSend,l.selectFiles(t3)}});t2.exports=f},function(t2,e2,n2){n2.r(e2);var r=n2(1);window.Promise=window.Promise||r.a},function(t2,e2,n2){(function(t3){var r=t3!==void 0&&t3||typeof self<"u"&&self||window,o=Function.prototype.apply;function i(t4,e3){this._id=t4,this._clearFn=e3}__name(i,"i"),e2.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e2.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e2.clearTimeout=e2.clearInterval=function(t4){t4&&t4.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e2.enroll=function(t4,e3){clearTimeout(t4._idleTimeoutId),t4._idleTimeout=e3},e2.unenroll=function(t4){clearTimeout(t4._idleTimeoutId),t4._idleTimeout=-1},e2._unrefActive=e2.active=function(t4){clearTimeout(t4._idleTimeoutId);var e3=t4._idleTimeout;e3>=0&&(t4._idleTimeoutId=setTimeout(function(){t4._onTimeout&&t4._onTimeout()},e3))},n2(6),e2.setImmediate=typeof self<"u"&&self.setImmediate||t3!==void 0&&t3.setImmediate||this&&this.setImmediate,e2.clearImmediate=typeof self<"u"&&self.clearImmediate||t3!==void 0&&t3.clearImmediate||this&&this.clearImmediate}).call(this,n2(0))},function(t2,e2,n2){(function(t3,e3){(function(t4,n3){if(!t4.setImmediate){var r,o,i,a,s,c=1,u={},l=!1,f=t4.document,d2=Object.getPrototypeOf&&Object.getPrototypeOf(t4);d2=d2&&d2.setTimeout?d2:t4,{}.toString.call(t4.process)==="[object process]"?r=__name(function(t5){e3.nextTick(function(){p(t5)})},"r"):function(){if(t4.postMessage&&!t4.importScripts){var e4=!0,n4=t4.onmessage;return t4.onmessage=function(){e4=!1},t4.postMessage("","*"),t4.onmessage=n4,e4}}()?(a="setImmediate$"+Math.random()+"$",s=__name(function(e4){e4.source===t4&&typeof e4.data=="string"&&e4.data.indexOf(a)===0&&p(+e4.data.slice(a.length))},"s"),t4.addEventListener?t4.addEventListener("message",s,!1):t4.attachEvent("onmessage",s),r=__name(function(e4){t4.postMessage(a+e4,"*")},"r")):t4.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t5){p(t5.data)},r=__name(function(t5){i.port2.postMessage(t5)},"r")):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,r=__name(function(t5){var e4=f.createElement("script");e4.onreadystatechange=function(){p(t5),e4.onreadystatechange=null,o.removeChild(e4),e4=null},o.appendChild(e4)},"r")):r=__name(function(t5){setTimeout(p,0,t5)},"r"),d2.setImmediate=function(t5){typeof t5!="function"&&(t5=new Function(""+t5));for(var e4=new Array(arguments.length-1),n4=0;n4<e4.length;n4++)e4[n4]=arguments[n4+1];var o2={callback:t5,args:e4};return u[c]=o2,r(c),c++},d2.clearImmediate=h}function h(t5){delete u[t5]}__name(h,"h");function p(t5){if(l)setTimeout(p,0,t5);else{var e4=u[t5];if(e4){l=!0;try{(function(t6){var e5=t6.callback,n4=t6.args;switch(n4.length){case 0:e5();break;case 1:e5(n4[0]);break;case 2:e5(n4[0],n4[1]);break;case 3:e5(n4[0],n4[1],n4[2]);break;default:e5.apply(void 0,n4)}})(e4)}finally{h(t5),l=!1}}}}__name(p,"p")})(typeof self>"u"?t3===void 0?this:t3:self)}).call(this,n2(0),n2(7))},function(t2,e2){var n2,r,o=t2.exports={};function i(){throw new Error("setTimeout has not been defined")}__name(i,"i");function a(){throw new Error("clearTimeout has not been defined")}__name(a,"a");function s(t3){if(n2===setTimeout)return setTimeout(t3,0);if((n2===i||!n2)&&setTimeout)return n2=setTimeout,setTimeout(t3,0);try{return n2(t3,0)}catch{try{return n2.call(null,t3,0)}catch{return n2.call(this,t3,0)}}}__name(s,"s"),function(){try{n2=typeof setTimeout=="function"?setTimeout:i}catch{n2=i}try{r=typeof clearTimeout=="function"?clearTimeout:a}catch{r=a}}();var c,u=[],l=!1,f=-1;function d2(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&h())}__name(d2,"d");function h(){if(!l){var t3=s(d2);l=!0;for(var e3=u.length;e3;){for(c=u,u=[];++f<e3;)c&&c[f].run();f=-1,e3=u.length}c=null,l=!1,function(t4){if(r===clearTimeout)return clearTimeout(t4);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t4);try{r(t4)}catch{try{return r.call(null,t4)}catch{return r.call(this,t4)}}}(t3)}}__name(h,"h");function p(t3,e3){this.fun=t3,this.array=e3}__name(p,"p");function m2(){}__name(m2,"m"),o.nextTick=function(t3){var e3=new Array(arguments.length-1);if(arguments.length>1)for(var n3=1;n3<arguments.length;n3++)e3[n3-1]=arguments[n3];u.push(new p(t3,e3)),u.length!==1||l||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m2,o.addListener=m2,o.once=m2,o.off=m2,o.removeListener=m2,o.removeAllListeners=m2,o.emit=m2,o.prependListener=m2,o.prependOnceListener=m2,o.listeners=function(t3){return[]},o.binding=function(t3){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t3){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t2,e2,n2){function r(t3,e3){for(var n3=0;n3<e3.length;n3++){var r2=e3[n3];r2.enumerable=r2.enumerable||!1,r2.configurable=!0,"value"in r2&&(r2.writable=!0),Object.defineProperty(t3,r2.key,r2)}}__name(r,"r");var o=n2(9);t2.exports=function(){function t3(){(function(t4,e4){if(!(t4 instanceof e4))throw new TypeError("Cannot call a class as a function")})(this,t3)}__name(t3,"t");var e3,n3;return e3=t3,(n3=[{key:"urlEncode",value:function(t4){return o(t4)}},{key:"jsonEncode",value:function(t4){return JSON.stringify(t4)}},{key:"formEncode",value:function(t4){if(this.isFormData(t4))return t4;if(this.isFormElement(t4))return new FormData(t4);if(this.isObject(t4)){var e4=new FormData;return Object.keys(t4).forEach(function(n4){var r2=t4[n4];e4.append(n4,r2)}),e4}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(t4){return Object.prototype.toString.call(t4)==="[object Object]"}},{key:"isFormData",value:function(t4){return t4 instanceof FormData}},{key:"isFormElement",value:function(t4){return t4 instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var t4=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(e4,n4){var r2=document.createElement("INPUT");r2.type="file",t4.multiple&&r2.setAttribute("multiple","multiple"),t4.accept&&r2.setAttribute("accept",t4.accept),r2.style.display="none",document.body.appendChild(r2),r2.addEventListener("change",function(t5){var n5=t5.target.files;e4(n5),document.body.removeChild(r2)},!1),r2.click()})}},{key:"parseHeaders",value:function(t4){var e4=t4.trim().split(/[\r\n]+/),n4={};return e4.forEach(function(t5){var e5=t5.split(": "),r2=e5.shift(),o2=e5.join(": ");r2&&(n4[r2]=o2)}),n4}}])&&r(e3,n3),t3}()},function(t2,e2){var n2=__name(function(t3){return encodeURIComponent(t3).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},"n"),r=__name(function(t3,e3,o,i){return e3=e3||null,o=o||"&",i=i||null,t3?function(t4){for(var e4=new Array,n3=0;n3<t4.length;n3++)t4[n3]&&e4.push(t4[n3]);return e4}(Object.keys(t3).map(function(a){var s,c,u=a;if(i&&(u=i+"["+u+"]"),typeof t3[a]=="object"&&t3[a]!==null)s=r(t3[a],null,o,u);else{e3&&(c=u,u=!isNaN(parseFloat(c))&&isFinite(c)?e3+Number(u):u);var l=t3[a];l=(l=(l=(l=l===!0?"1":l)===!1?"0":l)===0?"0":l)||"",s=n2(u)+"="+n2(l)}return s})).join(o).replace(/[!'()*]/g,""):""},"r");t2.exports=r}])},function(t,e,n){var r=n(2);t.exports=function(t2){if(Array.isArray(t2))return r(t2)}},function(t,e){t.exports=function(t2){if(typeof Symbol<"u"&&Symbol.iterator in Object(t2))return Array.from(t2)}},function(t,e,n){var r=n(2);t.exports=function(t2,e2){if(t2){if(typeof t2=="string")return r(t2,e2);var n2=Object.prototype.toString.call(t2).slice(8,-1);return n2==="Object"&&t2.constructor&&(n2=t2.constructor.name),n2==="Map"||n2==="Set"?Array.from(t2):n2==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2)?r(t2,e2):void 0}}},function(t,e){t.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(t,e,n){var r=function(t2){var e2=Object.prototype,n2=e2.hasOwnProperty,r2=typeof Symbol=="function"?Symbol:{},o=r2.iterator||"@@iterator",i=r2.asyncIterator||"@@asyncIterator",a=r2.toStringTag||"@@toStringTag";function s(t3,e3,n3,r3){var o2=e3&&e3.prototype instanceof l?e3:l,i2=Object.create(o2.prototype),a2=new _(r3||[]);return i2._invoke=function(t4,e4,n4){var r4="suspendedStart";return function(o3,i3){if(r4==="executing")throw new Error("Generator is already running");if(r4==="completed"){if(o3==="throw")throw i3;return x()}for(n4.method=o3,n4.arg=i3;;){var a3=n4.delegate;if(a3){var s2=b(a3,n4);if(s2){if(s2===u)continue;return s2}}if(n4.method==="next")n4.sent=n4._sent=n4.arg;else if(n4.method==="throw"){if(r4==="suspendedStart")throw r4="completed",n4.arg;n4.dispatchException(n4.arg)}else n4.method==="return"&&n4.abrupt("return",n4.arg);r4="executing";var l2=c(t4,e4,n4);if(l2.type==="normal"){if(r4=n4.done?"completed":"suspendedYield",l2.arg===u)continue;return{value:l2.arg,done:n4.done}}l2.type==="throw"&&(r4="completed",n4.method="throw",n4.arg=l2.arg)}}}(t3,n3,a2),i2}__name(s,"s");function c(t3,e3,n3){try{return{type:"normal",arg:t3.call(e3,n3)}}catch(t4){return{type:"throw",arg:t4}}}__name(c,"c"),t2.wrap=s;var u={};function l(){}__name(l,"l");function f(){}__name(f,"f");function d2(){}__name(d2,"d");var h={};h[o]=function(){return this};var p=Object.getPrototypeOf,m2=p&&p(p(E([])));m2&&m2!==e2&&n2.call(m2,o)&&(h=m2);var v=d2.prototype=l.prototype=Object.create(h);function y(t3){["next","throw","return"].forEach(function(e3){t3[e3]=function(t4){return this._invoke(e3,t4)}})}__name(y,"y");function g(t3,e3){var r3;this._invoke=function(o2,i2){function a2(){return new e3(function(r4,a3){__name(function r5(o3,i3,a4,s2){var u2=c(t3[o3],t3,i3);if(u2.type!=="throw"){var l2=u2.arg,f2=l2.value;return f2&&typeof f2=="object"&&n2.call(f2,"__await")?e3.resolve(f2.__await).then(function(t4){r5("next",t4,a4,s2)},function(t4){r5("throw",t4,a4,s2)}):e3.resolve(f2).then(function(t4){l2.value=t4,a4(l2)},function(t4){return r5("throw",t4,a4,s2)})}s2(u2.arg)},"r")(o2,i2,r4,a3)})}return __name(a2,"a"),r3=r3?r3.then(a2,a2):a2()}}__name(g,"g");function b(t3,e3){var n3=t3.iterator[e3.method];if(n3===void 0){if(e3.delegate=null,e3.method==="throw"){if(t3.iterator.return&&(e3.method="return",e3.arg=void 0,b(t3,e3),e3.method==="throw"))return u;e3.method="throw",e3.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r3=c(n3,t3.iterator,e3.arg);if(r3.type==="throw")return e3.method="throw",e3.arg=r3.arg,e3.delegate=null,u;var o2=r3.arg;return o2?o2.done?(e3[t3.resultName]=o2.value,e3.next=t3.nextLoc,e3.method!=="return"&&(e3.method="next",e3.arg=void 0),e3.delegate=null,u):o2:(e3.method="throw",e3.arg=new TypeError("iterator result is not an object"),e3.delegate=null,u)}__name(b,"b");function w(t3){var e3={tryLoc:t3[0]};1 in t3&&(e3.catchLoc=t3[1]),2 in t3&&(e3.finallyLoc=t3[2],e3.afterLoc=t3[3]),this.tryEntries.push(e3)}__name(w,"w");function k(t3){var e3=t3.completion||{};e3.type="normal",delete e3.arg,t3.completion=e3}__name(k,"k");function _(t3){this.tryEntries=[{tryLoc:"root"}],t3.forEach(w,this),this.reset(!0)}__name(_,"_");function E(t3){if(t3){var e3=t3[o];if(e3)return e3.call(t3);if(typeof t3.next=="function")return t3;if(!isNaN(t3.length)){var r3=-1,i2=__name(function e4(){for(;++r3<t3.length;)if(n2.call(t3,r3))return e4.value=t3[r3],e4.done=!1,e4;return e4.value=void 0,e4.done=!0,e4},"e");return i2.next=i2}}return{next:x}}__name(E,"E");function x(){return{value:void 0,done:!0}}return __name(x,"x"),f.prototype=v.constructor=d2,d2.constructor=f,d2[a]=f.displayName="GeneratorFunction",t2.isGeneratorFunction=function(t3){var e3=typeof t3=="function"&&t3.constructor;return!!e3&&(e3===f||(e3.displayName||e3.name)==="GeneratorFunction")},t2.mark=function(t3){return Object.setPrototypeOf?Object.setPrototypeOf(t3,d2):(t3.__proto__=d2,a in t3||(t3[a]="GeneratorFunction")),t3.prototype=Object.create(v),t3},t2.awrap=function(t3){return{__await:t3}},y(g.prototype),g.prototype[i]=function(){return this},t2.AsyncIterator=g,t2.async=function(e3,n3,r3,o2,i2){i2===void 0&&(i2=Promise);var a2=new g(s(e3,n3,r3,o2),i2);return t2.isGeneratorFunction(n3)?a2:a2.next().then(function(t3){return t3.done?t3.value:a2.next()})},y(v),v[a]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},t2.keys=function(t3){var e3=[];for(var n3 in t3)e3.push(n3);return e3.reverse(),__name(function n4(){for(;e3.length;){var r3=e3.pop();if(r3 in t3)return n4.value=r3,n4.done=!1,n4}return n4.done=!0,n4},"n")},t2.values=E,_.prototype={constructor:_,reset:function(t3){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t3)for(var e3 in this)e3.charAt(0)==="t"&&n2.call(this,e3)&&!isNaN(+e3.slice(1))&&(this[e3]=void 0)},stop:function(){this.done=!0;var t3=this.tryEntries[0].completion;if(t3.type==="throw")throw t3.arg;return this.rval},dispatchException:function(t3){if(this.done)throw t3;var e3=this;function r3(n3,r4){return a2.type="throw",a2.arg=t3,e3.next=n3,r4&&(e3.method="next",e3.arg=void 0),!!r4}__name(r3,"r");for(var o2=this.tryEntries.length-1;o2>=0;--o2){var i2=this.tryEntries[o2],a2=i2.completion;if(i2.tryLoc==="root")return r3("end");if(i2.tryLoc<=this.prev){var s2=n2.call(i2,"catchLoc"),c2=n2.call(i2,"finallyLoc");if(s2&&c2){if(this.prev<i2.catchLoc)return r3(i2.catchLoc,!0);if(this.prev<i2.finallyLoc)return r3(i2.finallyLoc)}else if(s2){if(this.prev<i2.catchLoc)return r3(i2.catchLoc,!0)}else{if(!c2)throw new Error("try statement without catch or finally");if(this.prev<i2.finallyLoc)return r3(i2.finallyLoc)}}}},abrupt:function(t3,e3){for(var r3=this.tryEntries.length-1;r3>=0;--r3){var o2=this.tryEntries[r3];if(o2.tryLoc<=this.prev&&n2.call(o2,"finallyLoc")&&this.prev<o2.finallyLoc){var i2=o2;break}}i2&&(t3==="break"||t3==="continue")&&i2.tryLoc<=e3&&e3<=i2.finallyLoc&&(i2=null);var a2=i2?i2.completion:{};return a2.type=t3,a2.arg=e3,i2?(this.method="next",this.next=i2.finallyLoc,u):this.complete(a2)},complete:function(t3,e3){if(t3.type==="throw")throw t3.arg;return t3.type==="break"||t3.type==="continue"?this.next=t3.arg:t3.type==="return"?(this.rval=this.arg=t3.arg,this.method="return",this.next="end"):t3.type==="normal"&&e3&&(this.next=e3),u},finish:function(t3){for(var e3=this.tryEntries.length-1;e3>=0;--e3){var n3=this.tryEntries[e3];if(n3.finallyLoc===t3)return this.complete(n3.completion,n3.afterLoc),k(n3),u}},catch:function(t3){for(var e3=this.tryEntries.length-1;e3>=0;--e3){var n3=this.tryEntries[e3];if(n3.tryLoc===t3){var r3=n3.completion;if(r3.type==="throw"){var o2=r3.arg;k(n3)}return o2}}throw new Error("illegal catch attempt")},delegateYield:function(t3,e3,n3){return this.delegate={iterator:E(t3),resultName:e3,nextLoc:n3},this.method==="next"&&(this.arg=void 0),u}},t2}(t.exports);try{regeneratorRuntime=r}catch{Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){var r=n(13),o=n(14);typeof(o=o.__esModule?o.default:o)=="string"&&(o=[[t.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i),t.exports=o.locals||{}},function(t,e,n){var r,o=__name(function(){return r===void 0&&(r=!!(window&&document&&document.all&&!window.atob)),r},"o"),i=function(){var t2={};return function(e2){if(t2[e2]===void 0){var n2=document.querySelector(e2);if(window.HTMLIFrameElement&&n2 instanceof window.HTMLIFrameElement)try{n2=n2.contentDocument.head}catch{n2=null}t2[e2]=n2}return t2[e2]}}(),a=[];function s(t2){for(var e2=-1,n2=0;n2<a.length;n2++)if(a[n2].identifier===t2){e2=n2;break}return e2}__name(s,"s");function c(t2,e2){for(var n2={},r2=[],o2=0;o2<t2.length;o2++){var i2=t2[o2],c2=e2.base?i2[0]+e2.base:i2[0],u2=n2[c2]||0,l2="".concat(c2," ").concat(u2);n2[c2]=u2+1;var f2=s(l2),d3={css:i2[1],media:i2[2],sourceMap:i2[3]};f2!==-1?(a[f2].references++,a[f2].updater(d3)):a.push({identifier:l2,updater:v(d3,e2),references:1}),r2.push(l2)}return r2}__name(c,"c");function u(t2){var e2=document.createElement("style"),r2=t2.attributes||{};if(r2.nonce===void 0){var o2=n.nc;o2&&(r2.nonce=o2)}if(Object.keys(r2).forEach(function(t3){e2.setAttribute(t3,r2[t3])}),typeof t2.insert=="function")t2.insert(e2);else{var a2=i(t2.insert||"head");if(!a2)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a2.appendChild(e2)}return e2}__name(u,"u");var l,f=(l=[],function(t2,e2){return l[t2]=e2,l.filter(Boolean).join(`
`)});function d2(t2,e2,n2,r2){var o2=n2?"":r2.media?"@media ".concat(r2.media," {").concat(r2.css,"}"):r2.css;if(t2.styleSheet)t2.styleSheet.cssText=f(e2,o2);else{var i2=document.createTextNode(o2),a2=t2.childNodes;a2[e2]&&t2.removeChild(a2[e2]),a2.length?t2.insertBefore(i2,a2[e2]):t2.appendChild(i2)}}__name(d2,"d");function h(t2,e2,n2){var r2=n2.css,o2=n2.media,i2=n2.sourceMap;if(o2?t2.setAttribute("media",o2):t2.removeAttribute("media"),i2&&btoa&&(r2+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(i2))))," */")),t2.styleSheet)t2.styleSheet.cssText=r2;else{for(;t2.firstChild;)t2.removeChild(t2.firstChild);t2.appendChild(document.createTextNode(r2))}}__name(h,"h");var p=null,m2=0;function v(t2,e2){var n2,r2,o2;if(e2.singleton){var i2=m2++;n2=p||(p=u(e2)),r2=d2.bind(null,n2,i2,!1),o2=d2.bind(null,n2,i2,!0)}else n2=u(e2),r2=h.bind(null,n2,e2),o2=__name(function(){(function(t3){if(t3.parentNode===null)return!1;t3.parentNode.removeChild(t3)})(n2)},"o");return r2(t2),function(e3){if(e3){if(e3.css===t2.css&&e3.media===t2.media&&e3.sourceMap===t2.sourceMap)return;r2(t2=e3)}else o2()}}__name(v,"v"),t.exports=function(t2,e2){(e2=e2||{}).singleton||typeof e2.singleton=="boolean"||(e2.singleton=o());var n2=c(t2=t2||[],e2);return function(t3){if(t3=t3||[],Object.prototype.toString.call(t3)==="[object Array]"){for(var r2=0;r2<n2.length;r2++){var o2=s(n2[r2]);a[o2].references--}for(var i2=c(t3,e2),u2=0;u2<n2.length;u2++){var l2=s(n2[u2]);a[l2].references===0&&(a[l2].updater(),a.splice(l2,1))}n2=i2}}}},function(t,e,n){(e=n(15)(!1)).push([t.i,`.link-tool {
  position: relative;
}

  .link-tool__input {
    padding-left: 38px;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='%23707684' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: 10px;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  .link-tool__input-holder {
      position: relative;
    }

  .link-tool__input-holder--error .link-tool__input {
          background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' fill='none'%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m7.7 12.6-.021.02a2.795 2.795 0 0 0-.044 4.005v0a2.795 2.795 0 0 0 3.936.006l1.455-1.438a3 3 0 0 0 .34-3.866l-.146-.207'/%3E%3Cpath stroke='rgb(224, 147, 147)' stroke-linecap='round' stroke-width='2' d='m16.22 11.12.136-.14c.933-.954.992-2.46.135-3.483v0a2.597 2.597 0 0 0-3.664-.32L11.39 8.386a3 3 0 0 0-.301 4.3l.031.034'/%3E%3C/svg%3E");
          background-color: #fff3f6;
          border-color: #f3e0e0;
          color: #a95a5a;
          box-shadow: inset 0 1px 3px 0 rgba(146, 62, 62, .05);
        }

  .link-tool__input[contentEditable=true][data-placeholder]::before{
      position: absolute;
      content: attr(data-placeholder);
      color: #707684;
      font-weight: normal;
      opacity: 0;
    }

  .link-tool__input[contentEditable=true][data-placeholder]:empty::before {
        opacity: 1;
      }

  .link-tool__input[contentEditable=true][data-placeholder]:empty:focus::before {
         opacity: 0;
       }

  .link-tool__progress {
    position: absolute;
    box-shadow: inset 0 1px 3px 0 rgba(102, 85, 107, 0.04);
    height: 100%;
    width: 0;
    background-color: #f4f5f7;
    z-index: -1;
  }

  .link-tool__progress--loading {
      -webkit-animation: progress 500ms ease-in;
      -webkit-animation-fill-mode: forwards;
    }

  .link-tool__progress--loaded {
      width: 100%;
    }

  .link-tool__content {
    display: block;
    padding: 25px;
    border-radius: 2px;
    box-shadow: 0 0 0 2px #fff;
    color: initial !important;
    text-decoration: none !important;
  }

  .link-tool__content::after {
      content: "";
      clear: both;
      display: table;
    }

  .link-tool__content--rendered {
      background: #fff;
      border: 1px solid rgba(201, 201, 204, 0.48);
      box-shadow: 0 1px 3px rgba(0,0,0, .1);
      border-radius: 6px;
      will-change: filter;
      animation: link-in 450ms 1 cubic-bezier(0.215, 0.61, 0.355, 1);
    }

  .link-tool__content--rendered:hover {
        box-shadow: 0 0 3px rgba(0,0,0, .16);
      }

  .link-tool__image {
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
    margin: 0 0 0 30px;
    width: 65px;
    height: 65px;
    border-radius: 3px;
    float: right;
  }

  .link-tool__title {
    font-size: 17px;
    font-weight: 600;
    line-height: 1.5em;
    margin: 0 0 10px 0;
  }

  .link-tool__title + .link-tool__anchor {
      margin-top: 25px;
    }

  .link-tool__description {
    margin: 0 0 20px 0;
    font-size: 15px;
    line-height: 1.55em;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .link-tool__anchor {
    display: block;
    font-size: 15px;
    line-height: 1em;
    color: #888 !important;
    border: 0 !important;
    padding: 0 !important;
  }

@keyframes link-in {
  from {
    filter: blur(5px);
  }

  to {
    filter: none;
  }
}

.codex-editor--narrow .link-tool__image {
  display: none;
}

@-webkit-keyframes progress {
  0% {
    width: 0;
  }
  100% {
    width: 85%;
  }
}
`,""]),t.exports=e},function(t,e,n){t.exports=function(t2){var e2=[];return e2.toString=function(){return this.map(function(e3){var n2=function(t3,e4){var n3=t3[1]||"",r=t3[3];if(!r)return n3;if(e4&&typeof btoa=="function"){var o=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=r.sources.map(function(t4){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t4," */")});return[n3].concat(i).concat([o]).join(`
`)}var a,s,c;return[n3].join(`
`)}(e3,t2);return e3[2]?"@media ".concat(e3[2]," {").concat(n2,"}"):n2}).join("")},e2.i=function(t3,n2,r){typeof t3=="string"&&(t3=[[null,t3,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];a!=null&&(o[a]=!0)}for(var s=0;s<t3.length;s++){var c=[].concat(t3[s]);r&&o[c[0]]||(n2&&(c[2]?c[2]="".concat(n2," and ").concat(c[2]):c[2]=n2),e2.push(c))}},e2}},function(t,e,n){(function(t2){(function(t3){var e2=function(){try{return!!Symbol.iterator}catch{return!1}}(),n2=__name(function(t4){var n3={next:function(){var e3=t4.shift();return{done:e3===void 0,value:e3}}};return e2&&(n3[Symbol.iterator]=function(){return n3}),n3},"n"),r=__name(function(t4){return encodeURIComponent(t4).replace(/%20/g,"+")},"r"),o=__name(function(t4){return decodeURIComponent(String(t4).replace(/\+/g," "))},"o");(function(){try{var e3=t3.URLSearchParams;return new e3("?a=1").toString()==="a=1"&&typeof e3.prototype.set=="function"}catch{return!1}})()||function(){var o2=__name(function(t4){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var e3=typeof t4;if(e3!=="undefined")if(e3==="string")t4!==""&&this._fromString(t4);else if(t4 instanceof o2){var n3=this;t4.forEach(function(t5,e4){n3.append(e4,t5)})}else{if(t4===null||e3!=="object")throw new TypeError("Unsupported input's type for URLSearchParams");if(Object.prototype.toString.call(t4)==="[object Array]")for(var r2=0;r2<t4.length;r2++){var i3=t4[r2];if(Object.prototype.toString.call(i3)!=="[object Array]"&&i3.length===2)throw new TypeError("Expected [string, any] as entry at index "+r2+" of URLSearchParams's input");this.append(i3[0],i3[1])}else for(var a in t4)t4.hasOwnProperty(a)&&this.append(a,t4[a])}},"o"),i2=o2.prototype;i2.append=function(t4,e3){t4 in this._entries?this._entries[t4].push(String(e3)):this._entries[t4]=[String(e3)]},i2.delete=function(t4){delete this._entries[t4]},i2.get=function(t4){return t4 in this._entries?this._entries[t4][0]:null},i2.getAll=function(t4){return t4 in this._entries?this._entries[t4].slice(0):[]},i2.has=function(t4){return t4 in this._entries},i2.set=function(t4,e3){this._entries[t4]=[String(e3)]},i2.forEach=function(t4,e3){var n3;for(var r2 in this._entries)if(this._entries.hasOwnProperty(r2)){n3=this._entries[r2];for(var o3=0;o3<n3.length;o3++)t4.call(e3,n3[o3],r2,this)}},i2.keys=function(){var t4=[];return this.forEach(function(e3,n3){t4.push(n3)}),n2(t4)},i2.values=function(){var t4=[];return this.forEach(function(e3){t4.push(e3)}),n2(t4)},i2.entries=function(){var t4=[];return this.forEach(function(e3,n3){t4.push([n3,e3])}),n2(t4)},e2&&(i2[Symbol.iterator]=i2.entries),i2.toString=function(){var t4=[];return this.forEach(function(e3,n3){t4.push(r(n3)+"="+r(e3))}),t4.join("&")},t3.URLSearchParams=o2}();var i=t3.URLSearchParams.prototype;typeof i.sort!="function"&&(i.sort=function(){var t4=this,e3=[];this.forEach(function(n4,r2){e3.push([r2,n4]),t4._entries||t4.delete(r2)}),e3.sort(function(t5,e4){return t5[0]<e4[0]?-1:t5[0]>e4[0]?1:0}),t4._entries&&(t4._entries={});for(var n3=0;n3<e3.length;n3++)this.append(e3[n3][0],e3[n3][1])}),typeof i._fromString!="function"&&Object.defineProperty(i,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(t4){if(this._entries)this._entries={};else{var e3=[];this.forEach(function(t5,n4){e3.push(n4)});for(var n3=0;n3<e3.length;n3++)this.delete(e3[n3])}var r2,i2=(t4=t4.replace(/^\?/,"")).split("&");for(n3=0;n3<i2.length;n3++)r2=i2[n3].split("="),this.append(o(r2[0]),r2.length>1?o(r2[1]):"")}})})(t2!==void 0?t2:typeof window<"u"?window:typeof self<"u"?self:this),function(t3){if(function(){try{var e3=new t3.URL("b","http://a");return e3.pathname="c d",e3.href==="http://a/c%20d"&&e3.searchParams}catch{return!1}}()||function(){var e3=t3.URL,n2=__name(function(e4,n3){typeof e4!="string"&&(e4=String(e4));var r2,o=document;if(n3&&(t3.location===void 0||n3!==t3.location.href)){(r2=(o=document.implementation.createHTMLDocument("")).createElement("base")).href=n3,o.head.appendChild(r2);try{if(r2.href.indexOf(n3)!==0)throw new Error(r2.href)}catch(t4){throw new Error("URL unable to set base "+n3+" due to "+t4)}}var i=o.createElement("a");i.href=e4,r2&&(o.body.appendChild(i),i.href=i.href);var a=o.createElement("input");if(a.type="url",a.value=e4,i.protocol===":"||!/:/.test(i.href)||!a.checkValidity()&&!n3)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:i});var s=new t3.URLSearchParams(this.search),c=!0,u=!0,l=this;["append","delete","set"].forEach(function(t4){var e5=s[t4];s[t4]=function(){e5.apply(s,arguments),c&&(u=!1,l.search=s.toString(),u=!0)}}),Object.defineProperty(this,"searchParams",{value:s,enumerable:!0});var f=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==f&&(f=this.search,u&&(c=!1,this.searchParams._fromString(this.search),c=!0))}})},"n"),r=n2.prototype;["hash","host","hostname","port","protocol"].forEach(function(t4){(function(t5){Object.defineProperty(r,t5,{get:function(){return this._anchorElement[t5]},set:function(e4){this._anchorElement[t5]=e4},enumerable:!0})})(t4)}),Object.defineProperty(r,"search",{get:function(){return this._anchorElement.search},set:function(t4){this._anchorElement.search=t4,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(r,{toString:{get:function(){var t4=this;return function(){return t4.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(t4){this._anchorElement.href=t4,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(t4){this._anchorElement.pathname=t4},enumerable:!0},origin:{get:function(){var t4={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],e4=this._anchorElement.port!=t4&&this._anchorElement.port!=="";return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(e4?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(t4){},enumerable:!0},username:{get:function(){return""},set:function(t4){},enumerable:!0}}),n2.createObjectURL=function(t4){return e3.createObjectURL.apply(e3,arguments)},n2.revokeObjectURL=function(t4){return e3.revokeObjectURL.apply(e3,arguments)},t3.URL=n2}(),t3.location!==void 0&&!("origin"in t3.location)){var e2=__name(function(){return t3.location.protocol+"//"+t3.location.hostname+(t3.location.port?":"+t3.location.port:"")},"e");try{Object.defineProperty(t3.location,"origin",{get:e2,enumerable:!0})}catch{setInterval(function(){t3.location.origin=e2()},100)}}}(t2!==void 0?t2:typeof window<"u"?window:typeof self<"u"?self:this)}).call(this,n(17))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch{typeof window=="object"&&(n=window)}t.exports=n},function(t,e,n){n.r(e),n.d(e,"default",function(){return m2});var r=n(3),o=n.n(r),i=n(0),a=n.n(i),s=n(4),c=n.n(s),u=n(5),l=n.n(u),f=n(1),d2=n.n(f),h=(n(12),n(16),n(6)),p=n.n(h),m2=function(){function t2(e3){var n2=e3.data,r2=e3.config,o2=e3.api,i2=e3.readOnly;l()(this,t2),this.api=o2,this.readOnly=i2,this.config={endpoint:r2.endpoint||"",headers:r2.headers||{}},this.nodes={wrapper:null,container:null,progress:null,input:null,inputHolder:null,linkContent:null,linkImage:null,linkTitle:null,linkDescription:null,linkText:null},this._data={link:"",meta:{}},this.data=n2}__name(t2,"t");var e2;return d2()(t2,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.569 6.39509 13.9269 6.25143 12.8271 7.17675L11.39 8.38588C10.0935 9.47674 9.95704 11.4241 11.0887 12.6852L11.12 12.72"/></svg>',title:"Link"}}},{key:"enableLineBreaks",get:function(){return!0}}]),d2()(t2,[{key:"render",value:function(){return this.nodes.wrapper=this.make("div",this.CSS.baseClass),this.nodes.container=this.make("div",this.CSS.container),this.nodes.inputHolder=this.makeInputHolder(),this.nodes.linkContent=this.prepareLinkPreview(),Object.keys(this.data.meta).length?(this.nodes.container.appendChild(this.nodes.linkContent),this.showLinkPreview(this.data.meta)):this.nodes.container.appendChild(this.nodes.inputHolder),this.nodes.wrapper.appendChild(this.nodes.container),this.nodes.wrapper}},{key:"save",value:function(){return this.data}},{key:"validate",value:function(){return this.data.link.trim()!==""}},{key:"makeInputHolder",value:function(){var t3=this,e3=this.make("div",this.CSS.inputHolder);return this.nodes.progress=this.make("label",this.CSS.progress),this.nodes.input=this.make("div",[this.CSS.input,this.CSS.inputEl],{contentEditable:!this.readOnly}),this.nodes.input.dataset.placeholder=this.api.i18n.t("Link"),this.readOnly||(this.nodes.input.addEventListener("paste",function(e4){t3.startFetching(e4)}),this.nodes.input.addEventListener("keydown",function(e4){var n2=e4.ctrlKey||e4.metaKey;switch(e4.keyCode){case 13:e4.preventDefault(),e4.stopPropagation(),t3.startFetching(e4);break;case 65:n2&&t3.selectLinkUrl(e4)}})),e3.appendChild(this.nodes.progress),e3.appendChild(this.nodes.input),e3}},{key:"startFetching",value:function(t3){var e3=this.nodes.input.textContent;t3.type==="paste"&&(e3=(t3.clipboardData||window.clipboardData).getData("text")),this.removeErrorStyle(),this.fetchLinkData(e3)}},{key:"removeErrorStyle",value:function(){this.nodes.inputHolder.classList.remove(this.CSS.inputError),this.nodes.inputHolder.insertBefore(this.nodes.progress,this.nodes.input)}},{key:"selectLinkUrl",value:function(t3){t3.preventDefault(),t3.stopPropagation();var e3=window.getSelection(),n2=new Range,r2=e3.anchorNode.parentNode.closest(".".concat(this.CSS.inputHolder)).querySelector(".".concat(this.CSS.inputEl));n2.selectNodeContents(r2),e3.removeAllRanges(),e3.addRange(n2)}},{key:"prepareLinkPreview",value:function(){var t3=this.make("a",this.CSS.linkContent,{target:"_blank",rel:"nofollow noindex noreferrer"});return this.nodes.linkImage=this.make("div",this.CSS.linkImage),this.nodes.linkTitle=this.make("div",this.CSS.linkTitle),this.nodes.linkDescription=this.make("p",this.CSS.linkDescription),this.nodes.linkText=this.make("span",this.CSS.linkText),t3}},{key:"showLinkPreview",value:function(t3){var e3=t3.image,n2=t3.title,r2=t3.description;this.nodes.container.appendChild(this.nodes.linkContent),e3&&e3.url&&(this.nodes.linkImage.style.backgroundImage="url("+e3.url+")",this.nodes.linkContent.appendChild(this.nodes.linkImage)),n2&&(this.nodes.linkTitle.textContent=n2,this.nodes.linkContent.appendChild(this.nodes.linkTitle)),r2&&(this.nodes.linkDescription.textContent=r2,this.nodes.linkContent.appendChild(this.nodes.linkDescription)),this.nodes.linkContent.classList.add(this.CSS.linkContentRendered),this.nodes.linkContent.setAttribute("href",this.data.link),this.nodes.linkContent.appendChild(this.nodes.linkText);try{this.nodes.linkText.textContent=new URL(this.data.link).hostname}catch{this.nodes.linkText.textContent=this.data.link}}},{key:"showProgress",value:function(){this.nodes.progress.classList.add(this.CSS.progressLoading)}},{key:"hideProgress",value:function(){var t3=this;return new Promise(function(e3){t3.nodes.progress.classList.remove(t3.CSS.progressLoading),t3.nodes.progress.classList.add(t3.CSS.progressLoaded),setTimeout(e3,500)})}},{key:"applyErrorStyle",value:function(){this.nodes.inputHolder.classList.add(this.CSS.inputError),this.nodes.progress.remove()}},{key:"fetchLinkData",value:(e2=c()(a.a.mark(__name(function t3(e3){var n2,r2;return a.a.wrap(function(t4){for(;;)switch(t4.prev=t4.next){case 0:return this.showProgress(),this.data={link:e3},t4.prev=2,t4.next=5,p.a.get({url:this.config.endpoint,headers:this.config.headers,data:{url:e3}});case 5:n2=t4.sent,r2=n2.body,this.onFetch(r2),t4.next=13;break;case 10:t4.prev=10,t4.t0=t4.catch(2),this.fetchingFailed(this.api.i18n.t("Couldn't fetch the link data"));case 13:case"end":return t4.stop()}},t3,this,[[2,10]])},"t"))),function(t3){return e2.apply(this,arguments)})},{key:"onFetch",value:function(t3){var e3=this;if(t3&&t3.success){var n2=t3.meta,r2=t3.link||this.data.link;this.data={meta:n2,link:r2},n2?this.hideProgress().then(function(){e3.nodes.inputHolder.remove(),e3.showLinkPreview(n2)}):this.fetchingFailed(this.api.i18n.t("Wrong response format from the server"))}else this.fetchingFailed(this.api.i18n.t("Couldn't get this link data, try the other one"))}},{key:"fetchingFailed",value:function(t3){this.api.notifier.show({message:t3,style:"error"}),this.applyErrorStyle()}},{key:"make",value:function(t3){var e3,n2=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r2=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i2=document.createElement(t3);Array.isArray(n2)?(e3=i2.classList).add.apply(e3,o()(n2)):n2&&i2.classList.add(n2);for(var a2 in r2)i2[a2]=r2[a2];return i2}},{key:"data",set:function(t3){this._data=Object.assign({},{link:t3.link||this._data.link,meta:t3.meta||this._data.meta})},get:function(){return this._data}},{key:"CSS",get:function(){return{baseClass:this.api.styles.block,input:this.api.styles.input,container:"link-tool",inputEl:"link-tool__input",inputHolder:"link-tool__input-holder",inputError:"link-tool__input-holder--error",linkContent:"link-tool__content",linkContentRendered:"link-tool__content--rendered",linkImage:"link-tool__image",linkTitle:"link-tool__title",linkDescription:"link-tool__description",linkText:"link-tool__anchor",progress:"link-tool__progress",progressLoading:"link-tool__progress--loading",progressLoaded:"link-tool__progress--loaded"}}}]),t2}()}]).default})})(bundle$6);var bundleExports$6=bundle$6.exports;const LinkTool=getDefaultExportFromCjs(bundleExports$6);var bundle$5={exports:{}};(function(module,exports){(function(t,e){module.exports=e()})(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return __name(n,"n"),n.m=t,n.c=e,n.d=function(t2,e2,r){n.o(t2,e2)||Object.defineProperty(t2,e2,{enumerable:!0,get:r})},n.r=function(t2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t2,"__esModule",{value:!0})},n.t=function(t2,e2){if(1&e2&&(t2=n(t2)),8&e2||4&e2&&typeof t2=="object"&&t2&&t2.__esModule)return t2;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t2}),2&e2&&typeof t2!="string")for(var o in t2)n.d(r,o,(function(e3){return t2[e3]}).bind(null,o));return r},n.n=function(t2){var e2=t2&&t2.__esModule?function(){return t2.default}:function(){return t2};return n.d(e2,"a",e2),e2},n.o=function(t2,e2){return Object.prototype.hasOwnProperty.call(t2,e2)},n.p="/",n(n.s=5)}([function(t,e,n){var r=n(1);typeof r=="string"&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,o),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,`.cdx-marker {
  background: rgba(245,235,111,0.29);
  padding: 3px 0;
}`,""])},function(t,e){t.exports=function(t2){var e2=[];return e2.toString=function(){return this.map(function(e3){var n=function(t3,e4){var n2=t3[1]||"",r=t3[3];if(!r)return n2;if(e4&&typeof btoa=="function"){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(t4){return"/*# sourceURL="+r.sourceRoot+t4+" */"});return[n2].concat(i).concat([o]).join(`
`)}var a;return[n2].join(`
`)}(e3,t2);return e3[2]?"@media "+e3[2]+"{"+n+"}":n}).join("")},e2.i=function(t3,n){typeof t3=="string"&&(t3=[[null,t3,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];typeof i=="number"&&(r[i]=!0)}for(o=0;o<t3.length;o++){var a=t3[o];typeof a[0]=="number"&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e2.push(a))}},e2}},function(t,e,n){var r,o,i={},a=(r=__name(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return o===void 0&&(o=r.apply(this,arguments)),o}),s=function(t2){var e2={};return function(t3){if(typeof t3=="function")return t3();if(e2[t3]===void 0){var n2=(function(t4){return document.querySelector(t4)}).call(this,t3);if(window.HTMLIFrameElement&&n2 instanceof window.HTMLIFrameElement)try{n2=n2.contentDocument.head}catch{n2=null}e2[t3]=n2}return e2[t3]}}(),u=null,c=0,f=[],l=n(4);function p(t2,e2){for(var n2=0;n2<t2.length;n2++){var r2=t2[n2],o2=i[r2.id];if(o2){o2.refs++;for(var a2=0;a2<o2.parts.length;a2++)o2.parts[a2](r2.parts[a2]);for(;a2<r2.parts.length;a2++)o2.parts.push(g(r2.parts[a2],e2))}else{var s2=[];for(a2=0;a2<r2.parts.length;a2++)s2.push(g(r2.parts[a2],e2));i[r2.id]={id:r2.id,refs:1,parts:s2}}}}__name(p,"p");function d2(t2,e2){for(var n2=[],r2={},o2=0;o2<t2.length;o2++){var i2=t2[o2],a2=e2.base?i2[0]+e2.base:i2[0],s2={css:i2[1],media:i2[2],sourceMap:i2[3]};r2[a2]?r2[a2].parts.push(s2):n2.push(r2[a2]={id:a2,parts:[s2]})}return n2}__name(d2,"d");function h(t2,e2){var n2=s(t2.insertInto);if(!n2)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r2=f[f.length-1];if(t2.insertAt==="top")r2?r2.nextSibling?n2.insertBefore(e2,r2.nextSibling):n2.appendChild(e2):n2.insertBefore(e2,n2.firstChild),f.push(e2);else if(t2.insertAt==="bottom")n2.appendChild(e2);else{if(typeof t2.insertAt!="object"||!t2.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var o2=s(t2.insertInto+" "+t2.insertAt.before);n2.insertBefore(e2,o2)}}__name(h,"h");function v(t2){if(t2.parentNode===null)return!1;t2.parentNode.removeChild(t2);var e2=f.indexOf(t2);e2>=0&&f.splice(e2,1)}__name(v,"v");function b(t2){var e2=document.createElement("style");return t2.attrs.type===void 0&&(t2.attrs.type="text/css"),y(e2,t2.attrs),h(t2,e2),e2}__name(b,"b");function y(t2,e2){Object.keys(e2).forEach(function(n2){t2.setAttribute(n2,e2[n2])})}__name(y,"y");function g(t2,e2){var n2,r2,o2,i2;if(e2.transform&&t2.css){if(!(i2=e2.transform(t2.css)))return function(){};t2.css=i2}if(e2.singleton){var a2=c++;n2=u||(u=b(e2)),r2=x.bind(null,n2,a2,!1),o2=x.bind(null,n2,a2,!0)}else t2.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(n2=function(t3){var e3=document.createElement("link");return t3.attrs.type===void 0&&(t3.attrs.type="text/css"),t3.attrs.rel="stylesheet",y(e3,t3.attrs),h(t3,e3),e3}(e2),r2=(function(t3,e3,n3){var r3=n3.css,o3=n3.sourceMap,i3=e3.convertToAbsoluteUrls===void 0&&o3;(e3.convertToAbsoluteUrls||i3)&&(r3=l(r3)),o3&&(r3+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o3))))+" */");var a3=new Blob([r3],{type:"text/css"}),s2=t3.href;t3.href=URL.createObjectURL(a3),s2&&URL.revokeObjectURL(s2)}).bind(null,n2,e2),o2=__name(function(){v(n2),n2.href&&URL.revokeObjectURL(n2.href)},"o")):(n2=b(e2),r2=(function(t3,e3){var n3=e3.css,r3=e3.media;if(r3&&t3.setAttribute("media",r3),t3.styleSheet)t3.styleSheet.cssText=n3;else{for(;t3.firstChild;)t3.removeChild(t3.firstChild);t3.appendChild(document.createTextNode(n3))}}).bind(null,n2),o2=__name(function(){v(n2)},"o"));return r2(t2),function(e3){if(e3){if(e3.css===t2.css&&e3.media===t2.media&&e3.sourceMap===t2.sourceMap)return;r2(t2=e3)}else o2()}}__name(g,"g"),t.exports=function(t2,e2){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(e2=e2||{}).attrs=typeof e2.attrs=="object"?e2.attrs:{},e2.singleton||typeof e2.singleton=="boolean"||(e2.singleton=a()),e2.insertInto||(e2.insertInto="head"),e2.insertAt||(e2.insertAt="bottom");var n2=d2(t2,e2);return p(n2,e2),function(t3){for(var r2=[],o2=0;o2<n2.length;o2++){var a2=n2[o2];(s2=i[a2.id]).refs--,r2.push(s2)}for(t3&&p(d2(t3,e2),e2),o2=0;o2<r2.length;o2++){var s2;if((s2=r2[o2]).refs===0){for(var u2=0;u2<s2.parts.length;u2++)s2.parts[u2]();delete i[s2.id]}}}};var m2,w=(m2=[],function(t2,e2){return m2[t2]=e2,m2.filter(Boolean).join(`
`)});function x(t2,e2,n2,r2){var o2=n2?"":r2.css;if(t2.styleSheet)t2.styleSheet.cssText=w(e2,o2);else{var i2=document.createTextNode(o2),a2=t2.childNodes;a2[e2]&&t2.removeChild(a2[e2]),a2.length?t2.insertBefore(i2,a2[e2]):t2.appendChild(i2)}}__name(x,"x")},function(t,e){t.exports=function(t2){var e2=typeof window<"u"&&window.location;if(!e2)throw new Error("fixUrls requires window.location");if(!t2||typeof t2!="string")return t2;var n=e2.protocol+"//"+e2.host,r=n+e2.pathname.replace(/\/[^\/]*$/,"/");return t2.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t3,e3){var o,i=e3.trim().replace(/^"(.*)"$/,function(t4,e4){return e4}).replace(/^'(.*)'$/,function(t4,e4){return e4});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t3:(o=i.indexOf("//")===0?i:i.indexOf("/")===0?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){n.r(e),n(0);function r(t2,e2){for(var n2=0;n2<e2.length;n2++){var r2=e2[n2];r2.enumerable=r2.enumerable||!1,r2.configurable=!0,"value"in r2&&(r2.writable=!0),Object.defineProperty(t2,r2.key,r2)}}__name(r,"r");function o(t2,e2,n2){return e2&&r(t2.prototype,e2),n2&&r(t2,n2),t2}__name(o,"o"),n.d(e,"default",function(){return i});var i=function(){function t2(e2){var n2=e2.api;(function(t3,e3){if(!(t3 instanceof e3))throw new TypeError("Cannot call a class as a function")})(this,t2),this.api=n2,this.button=null,this.tag="MARK",this.iconClasses={base:this.api.styles.inlineToolButton,active:this.api.styles.inlineToolButtonActive}}return __name(t2,"t"),o(t2,null,[{key:"CSS",get:function(){return"cdx-marker"}}]),o(t2,[{key:"render",value:function(){return this.button=document.createElement("button"),this.button.type="button",this.button.classList.add(this.iconClasses.base),this.button.innerHTML=this.toolboxIcon,this.button}},{key:"surround",value:function(e2){if(e2){var n2=this.api.selection.findParentTag(this.tag,t2.CSS);n2?this.unwrap(n2):this.wrap(e2)}}},{key:"wrap",value:function(e2){var n2=document.createElement(this.tag);n2.classList.add(t2.CSS),n2.appendChild(e2.extractContents()),e2.insertNode(n2),this.api.selection.expandToTag(n2)}},{key:"unwrap",value:function(t3){this.api.selection.expandToTag(t3);var e2=window.getSelection(),n2=e2.getRangeAt(0),r2=n2.extractContents();t3.parentNode.removeChild(t3),n2.insertNode(r2),e2.removeAllRanges(),e2.addRange(n2)}},{key:"checkState",value:function(){var e2=this.api.selection.findParentTag(this.tag,t2.CSS);this.button.classList.toggle(this.iconClasses.active,!!e2)}},{key:"toolboxIcon",get:function(){return'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M11.3536 9.31802L12.7678 7.90381C13.5488 7.12276 14.8151 7.12276 15.5962 7.90381C16.3772 8.68486 16.3772 9.95119 15.5962 10.7322L14.182 12.1464M11.3536 9.31802L7.96729 12.7043C7.40889 13.2627 7.02827 13.9739 6.8734 14.7482L6.69798 15.6253C6.55804 16.325 7.17496 16.942 7.87468 16.802L8.75176 16.6266C9.52612 16.4717 10.2373 16.0911 10.7957 15.5327L14.182 12.1464M11.3536 9.31802L14.182 12.1464"/><line x1="15" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>'}}],[{key:"isInline",get:function(){return!0}},{key:"sanitize",get:function(){return{mark:{class:t2.CSS}}}}]),t2}()}]).default})})(bundle$5);var bundleExports$5=bundle$5.exports;const Marker=getDefaultExportFromCjs(bundleExports$5);var bundle$4={exports:{}};(function(module,exports){(function(e,t){module.exports=t()})(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return __name(n,"n"),n.m=e,n.c=t,n.d=function(e2,t2,r){n.o(e2,t2)||Object.defineProperty(e2,t2,{enumerable:!0,get:r})},n.r=function(e2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e2,"__esModule",{value:!0})},n.t=function(e2,t2){if(1&t2&&(e2=n(e2)),8&t2||4&t2&&typeof e2=="object"&&e2&&e2.__esModule)return e2;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e2}),2&t2&&typeof e2!="string")for(var o in e2)n.d(r,o,(function(t3){return e2[t3]}).bind(null,o));return r},n.n=function(e2){var t2=e2&&e2.__esModule?function(){return e2.default}:function(){return e2};return n.d(t2,"a",t2),t2},n.o=function(e2,t2){return Object.prototype.hasOwnProperty.call(e2,t2)},n.p="/",n(n.s=5)}([function(e,t,n){var r=n(1);typeof r=="string"&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,o),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,`/**
 * Plugin styles
 */
.ce-header {
  padding: 0.6em 0 3px;
  margin: 0;
  line-height: 1.25em;
  outline: none;
}

.ce-header p,
.ce-header div{
  padding: 0 !important;
  margin: 0 !important;
}

/**
 * Styles for Plugin icon in Toolbar
 */
.ce-header__icon {}

.ce-header[contentEditable=true][data-placeholder]::before{
  position: absolute;
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  display: none;
  cursor: text;
}

.ce-header[contentEditable=true][data-placeholder]:empty::before {
  display: block;
}

.ce-header[contentEditable=true][data-placeholder]:empty:focus::before {
  display: none;
}
`,""])},function(e,t){e.exports=function(e2){var t2=[];return t2.toString=function(){return this.map(function(t3){var n=function(e3,t4){var n2=e3[1]||"",r=e3[3];if(!r)return n2;if(t4&&typeof btoa=="function"){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(e4){return"/*# sourceURL="+r.sourceRoot+e4+" */"});return[n2].concat(i).concat([o]).join(`
`)}var a;return[n2].join(`
`)}(t3,e2);return t3[2]?"@media "+t3[2]+"{"+n+"}":n}).join("")},t2.i=function(e3,n){typeof e3=="string"&&(e3=[[null,e3,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];typeof i=="number"&&(r[i]=!0)}for(o=0;o<e3.length;o++){var a=e3[o];typeof a[0]=="number"&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t2.push(a))}},t2}},function(e,t,n){var r,o,i={},a=(r=__name(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return o===void 0&&(o=r.apply(this,arguments)),o}),s=__name(function(e2){return document.querySelector(e2)},"s"),l=function(e2){var t2={};return function(e3){if(typeof e3=="function")return e3();if(t2[e3]===void 0){var n2=s.call(this,e3);if(window.HTMLIFrameElement&&n2 instanceof window.HTMLIFrameElement)try{n2=n2.contentDocument.head}catch{n2=null}t2[e3]=n2}return t2[e3]}}(),u=null,c=0,f=[],d2=n(4);function p(e2,t2){for(var n2=0;n2<e2.length;n2++){var r2=e2[n2],o2=i[r2.id];if(o2){o2.refs++;for(var a2=0;a2<o2.parts.length;a2++)o2.parts[a2](r2.parts[a2]);for(;a2<r2.parts.length;a2++)o2.parts.push(y(r2.parts[a2],t2))}else{var s2=[];for(a2=0;a2<r2.parts.length;a2++)s2.push(y(r2.parts[a2],t2));i[r2.id]={id:r2.id,refs:1,parts:s2}}}}__name(p,"p");function h(e2,t2){for(var n2=[],r2={},o2=0;o2<e2.length;o2++){var i2=e2[o2],a2=t2.base?i2[0]+t2.base:i2[0],s2={css:i2[1],media:i2[2],sourceMap:i2[3]};r2[a2]?r2[a2].parts.push(s2):n2.push(r2[a2]={id:a2,parts:[s2]})}return n2}__name(h,"h");function v(e2,t2){var n2=l(e2.insertInto);if(!n2)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r2=f[f.length-1];if(e2.insertAt==="top")r2?r2.nextSibling?n2.insertBefore(t2,r2.nextSibling):n2.appendChild(t2):n2.insertBefore(t2,n2.firstChild),f.push(t2);else if(e2.insertAt==="bottom")n2.appendChild(t2);else{if(typeof e2.insertAt!="object"||!e2.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var o2=l(e2.insertInto+" "+e2.insertAt.before);n2.insertBefore(t2,o2)}}__name(v,"v");function g(e2){if(e2.parentNode===null)return!1;e2.parentNode.removeChild(e2);var t2=f.indexOf(e2);t2>=0&&f.splice(t2,1)}__name(g,"g");function b(e2){var t2=document.createElement("style");return e2.attrs.type===void 0&&(e2.attrs.type="text/css"),m2(t2,e2.attrs),v(e2,t2),t2}__name(b,"b");function m2(e2,t2){Object.keys(t2).forEach(function(n2){e2.setAttribute(n2,t2[n2])})}__name(m2,"m");function y(e2,t2){var n2,r2,o2,i2;if(t2.transform&&e2.css){if(!(i2=t2.transform(e2.css)))return function(){};e2.css=i2}if(t2.singleton){var a2=c++;n2=u||(u=b(t2)),r2=L2.bind(null,n2,a2,!1),o2=L2.bind(null,n2,a2,!0)}else e2.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(n2=function(e3){var t3=document.createElement("link");return e3.attrs.type===void 0&&(e3.attrs.type="text/css"),e3.attrs.rel="stylesheet",m2(t3,e3.attrs),v(e3,t3),t3}(t2),r2=x.bind(null,n2,t2),o2=__name(function(){g(n2),n2.href&&URL.revokeObjectURL(n2.href)},"o")):(n2=b(t2),r2=M.bind(null,n2),o2=__name(function(){g(n2)},"o"));return r2(e2),function(t3){if(t3){if(t3.css===e2.css&&t3.media===e2.media&&t3.sourceMap===e2.sourceMap)return;r2(e2=t3)}else o2()}}__name(y,"y"),e.exports=function(e2,t2){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(t2=t2||{}).attrs=typeof t2.attrs=="object"?t2.attrs:{},t2.singleton||typeof t2.singleton=="boolean"||(t2.singleton=a()),t2.insertInto||(t2.insertInto="head"),t2.insertAt||(t2.insertAt="bottom");var n2=h(e2,t2);return p(n2,t2),function(e3){for(var r2=[],o2=0;o2<n2.length;o2++){var a2=n2[o2];(s2=i[a2.id]).refs--,r2.push(s2)}for(e3&&p(h(e3,t2),t2),o2=0;o2<r2.length;o2++){var s2;if((s2=r2[o2]).refs===0){for(var l2=0;l2<s2.parts.length;l2++)s2.parts[l2]();delete i[s2.id]}}}};var w,k=(w=[],function(e2,t2){return w[e2]=t2,w.filter(Boolean).join(`
`)});function L2(e2,t2,n2,r2){var o2=n2?"":r2.css;if(e2.styleSheet)e2.styleSheet.cssText=k(t2,o2);else{var i2=document.createTextNode(o2),a2=e2.childNodes;a2[t2]&&e2.removeChild(a2[t2]),a2.length?e2.insertBefore(i2,a2[t2]):e2.appendChild(i2)}}__name(L2,"L");function M(e2,t2){var n2=t2.css,r2=t2.media;if(r2&&e2.setAttribute("media",r2),e2.styleSheet)e2.styleSheet.cssText=n2;else{for(;e2.firstChild;)e2.removeChild(e2.firstChild);e2.appendChild(document.createTextNode(n2))}}__name(M,"M");function x(e2,t2,n2){var r2=n2.css,o2=n2.sourceMap,i2=t2.convertToAbsoluteUrls===void 0&&o2;(t2.convertToAbsoluteUrls||i2)&&(r2=d2(r2)),o2&&(r2+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o2))))+" */");var a2=new Blob([r2],{type:"text/css"}),s2=e2.href;e2.href=URL.createObjectURL(a2),s2&&URL.revokeObjectURL(s2)}__name(x,"x")},function(e,t){e.exports=function(e2){var t2=typeof window<"u"&&window.location;if(!t2)throw new Error("fixUrls requires window.location");if(!e2||typeof e2!="string")return e2;var n=t2.protocol+"//"+t2.host,r=n+t2.pathname.replace(/\/[^\/]*$/,"/");return e2.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e3,t3){var o,i=t3.trim().replace(/^"(.*)"$/,function(e4,t4){return t4}).replace(/^'(.*)'$/,function(e4,t4){return t4});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e3:(o=i.indexOf("//")===0?i:i.indexOf("/")===0?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){n.r(t),n.d(t,"default",function(){return i}),n(0);function r(e2){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e3){return typeof e3}:function(e3){return e3&&typeof Symbol=="function"&&e3.constructor===Symbol&&e3!==Symbol.prototype?"symbol":typeof e3})(e2)}__name(r,"r");function o(e2,t2){for(var n2=0;n2<t2.length;n2++){var r2=t2[n2];r2.enumerable=r2.enumerable||!1,r2.configurable=!0,"value"in r2&&(r2.writable=!0),Object.defineProperty(e2,r2.key,r2)}}__name(o,"o");/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */var i=function(){function e2(t3){var n3=t3.data,r2=t3.config,o2=t3.api,i3=t3.readOnly;(function(e3,t4){if(!(e3 instanceof t4))throw new TypeError("Cannot call a class as a function")})(this,e2),this.api=o2,this.readOnly=i3,this._CSS={block:this.api.styles.block,wrapper:"ce-header"},this._settings=r2,this._data=this.normalizeData(n3),this._element=this.getTag()}__name(e2,"e");var t2,n2,i2;return t2=e2,i2=[{key:"conversionConfig",get:function(){return{export:"text",import:"text"}}},{key:"sanitize",get:function(){return{level:!1,text:{}}}},{key:"isReadOnlySupported",get:function(){return!0}},{key:"pasteConfig",get:function(){return{tags:["H1","H2","H3","H4","H5","H6"]}}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>',title:"Heading"}}}],(n2=[{key:"normalizeData",value:function(e3){var t3={};return r(e3)!=="object"&&(e3={}),t3.text=e3.text||"",t3.level=parseInt(e3.level)||this.defaultLevel.number,t3}},{key:"render",value:function(){return this._element}},{key:"renderSettings",value:function(){var e3=this;return this.levels.map(function(t3){return{icon:t3.svg,label:e3.api.i18n.t("Heading ".concat(t3.number)),onActivate:function(){return e3.setLevel(t3.number)},closeOnActivate:!0,isActive:e3.currentLevel.number===t3.number}})}},{key:"setLevel",value:function(e3){this.data={level:e3,text:this.data.text}}},{key:"merge",value:function(e3){var t3={text:this.data.text+e3.text,level:this.data.level};this.data=t3}},{key:"validate",value:function(e3){return e3.text.trim()!==""}},{key:"save",value:function(e3){return{text:e3.innerHTML,level:this.currentLevel.number}}},{key:"getTag",value:function(){var e3=document.createElement(this.currentLevel.tag);return e3.innerHTML=this._data.text||"",e3.classList.add(this._CSS.wrapper),e3.contentEditable=this.readOnly?"false":"true",e3.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e3}},{key:"onPaste",value:function(e3){var t3=e3.detail.data,n3=this.defaultLevel.number;switch(t3.tagName){case"H1":n3=1;break;case"H2":n3=2;break;case"H3":n3=3;break;case"H4":n3=4;break;case"H5":n3=5;break;case"H6":n3=6}this._settings.levels&&(n3=this._settings.levels.reduce(function(e4,t4){return Math.abs(t4-n3)<Math.abs(e4-n3)?t4:e4})),this.data={level:n3,text:t3.innerHTML}}},{key:"data",get:function(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data},set:function(e3){if(this._data=this.normalizeData(e3),e3.level!==void 0&&this._element.parentNode){var t3=this.getTag();t3.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(t3,this._element),this._element=t3}e3.text!==void 0&&(this._element.innerHTML=this._data.text||"")}},{key:"currentLevel",get:function(){var e3=this,t3=this.levels.find(function(t4){return t4.number===e3._data.level});return t3||(t3=this.defaultLevel),t3}},{key:"defaultLevel",get:function(){var e3=this;if(this._settings.defaultLevel){var t3=this.levels.find(function(t4){return t4.number===e3._settings.defaultLevel});if(t3)return t3;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}},{key:"levels",get:function(){var e3=this,t3=[{number:1,tag:"H1",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>'},{number:2,tag:"H2",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>'},{number:3,tag:"H3",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>'},{number:4,tag:"H4",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>'},{number:5,tag:"H5",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>'},{number:6,tag:"H6",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>'}];return this._settings.levels?t3.filter(function(t4){return e3._settings.levels.includes(t4.number)}):t3}}])&&o(t2.prototype,n2),i2&&o(t2,i2),e2}()}]).default})})(bundle$4);var bundleExports$4=bundle$4.exports;const Header=getDefaultExportFromCjs(bundleExports$4);var bundle$3={exports:{}};(function(module,exports){(function(t,e){module.exports=e()})(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return __name(n,"n"),n.m=t,n.c=e,n.d=function(t2,e2,r){n.o(t2,e2)||Object.defineProperty(t2,e2,{enumerable:!0,get:r})},n.r=function(t2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t2,"__esModule",{value:!0})},n.t=function(t2,e2){if(1&e2&&(t2=n(t2)),8&e2||4&e2&&typeof t2=="object"&&t2&&t2.__esModule)return t2;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t2}),2&e2&&typeof t2!="string")for(var o in t2)n.d(r,o,(function(e3){return t2[e3]}).bind(null,o));return r},n.n=function(t2){var e2=t2&&t2.__esModule?function(){return t2.default}:function(){return t2};return n.d(e2,"a",e2),e2},n.o=function(t2,e2){return Object.prototype.hasOwnProperty.call(t2,e2)},n.p="/",n(n.s=5)}([function(t,e,n){var r=n(1);typeof r=="string"&&(r=[[t.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,o),r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(2)(!1)).push([t.i,`.cdx-quote-icon svg {
  transform: rotate(180deg);
}

.cdx-quote {
  margin: 0;
}

.cdx-quote__text {
  min-height: 158px;
  margin-bottom: 10px;
}

.cdx-quote__caption {}

.cdx-quote [contentEditable=true][data-placeholder]::before{
  position: absolute;
  content: attr(data-placeholder);
  color: #707684;
  font-weight: normal;
  opacity: 0;
}

.cdx-quote [contentEditable=true][data-placeholder]:empty::before {
  opacity: 1;
}

.cdx-quote [contentEditable=true][data-placeholder]:empty:focus::before {
  opacity: 0;
}


.cdx-quote-settings {
  display: flex;
}

.cdx-quote-settings .cdx-settings-button {
  width: 50%;
}
`,""])},function(t,e){t.exports=function(t2){var e2=[];return e2.toString=function(){return this.map(function(e3){var n=function(t3,e4){var n2=t3[1]||"",r=t3[3];if(!r)return n2;if(e4&&typeof btoa=="function"){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(t4){return"/*# sourceURL="+r.sourceRoot+t4+" */"});return[n2].concat(i).concat([o]).join(`
`)}var a;return[n2].join(`
`)}(e3,t2);return e3[2]?"@media "+e3[2]+"{"+n+"}":n}).join("")},e2.i=function(t3,n){typeof t3=="string"&&(t3=[[null,t3,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];typeof i=="number"&&(r[i]=!0)}for(o=0;o<t3.length;o++){var a=t3[o];typeof a[0]=="number"&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e2.push(a))}},e2}},function(t,e,n){var r,o,i={},a=(r=__name(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return o===void 0&&(o=r.apply(this,arguments)),o}),s=function(t2){var e2={};return function(t3){if(typeof t3=="function")return t3();if(e2[t3]===void 0){var n2=(function(t4){return document.querySelector(t4)}).call(this,t3);if(window.HTMLIFrameElement&&n2 instanceof window.HTMLIFrameElement)try{n2=n2.contentDocument.head}catch{n2=null}e2[t3]=n2}return e2[t3]}}(),c=null,u=0,l=[],f=n(4);function d2(t2,e2){for(var n2=0;n2<t2.length;n2++){var r2=t2[n2],o2=i[r2.id];if(o2){o2.refs++;for(var a2=0;a2<o2.parts.length;a2++)o2.parts[a2](r2.parts[a2]);for(;a2<r2.parts.length;a2++)o2.parts.push(b(r2.parts[a2],e2))}else{var s2=[];for(a2=0;a2<r2.parts.length;a2++)s2.push(b(r2.parts[a2],e2));i[r2.id]={id:r2.id,refs:1,parts:s2}}}}__name(d2,"d");function p(t2,e2){for(var n2=[],r2={},o2=0;o2<t2.length;o2++){var i2=t2[o2],a2=e2.base?i2[0]+e2.base:i2[0],s2={css:i2[1],media:i2[2],sourceMap:i2[3]};r2[a2]?r2[a2].parts.push(s2):n2.push(r2[a2]={id:a2,parts:[s2]})}return n2}__name(p,"p");function h(t2,e2){var n2=s(t2.insertInto);if(!n2)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r2=l[l.length-1];if(t2.insertAt==="top")r2?r2.nextSibling?n2.insertBefore(e2,r2.nextSibling):n2.appendChild(e2):n2.insertBefore(e2,n2.firstChild),l.push(e2);else if(t2.insertAt==="bottom")n2.appendChild(e2);else{if(typeof t2.insertAt!="object"||!t2.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var o2=s(t2.insertInto+" "+t2.insertAt.before);n2.insertBefore(e2,o2)}}__name(h,"h");function v(t2){if(t2.parentNode===null)return!1;t2.parentNode.removeChild(t2);var e2=l.indexOf(t2);e2>=0&&l.splice(e2,1)}__name(v,"v");function y(t2){var e2=document.createElement("style");return t2.attrs.type===void 0&&(t2.attrs.type="text/css"),g(e2,t2.attrs),h(t2,e2),e2}__name(y,"y");function g(t2,e2){Object.keys(e2).forEach(function(n2){t2.setAttribute(n2,e2[n2])})}__name(g,"g");function b(t2,e2){var n2,r2,o2,i2;if(e2.transform&&t2.css){if(!(i2=e2.transform(t2.css)))return function(){};t2.css=i2}if(e2.singleton){var a2=u++;n2=c||(c=y(e2)),r2=x.bind(null,n2,a2,!1),o2=x.bind(null,n2,a2,!0)}else t2.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(n2=function(t3){var e3=document.createElement("link");return t3.attrs.type===void 0&&(t3.attrs.type="text/css"),t3.attrs.rel="stylesheet",g(e3,t3.attrs),h(t3,e3),e3}(e2),r2=(function(t3,e3,n3){var r3=n3.css,o3=n3.sourceMap,i3=e3.convertToAbsoluteUrls===void 0&&o3;(e3.convertToAbsoluteUrls||i3)&&(r3=f(r3)),o3&&(r3+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o3))))+" */");var a3=new Blob([r3],{type:"text/css"}),s2=t3.href;t3.href=URL.createObjectURL(a3),s2&&URL.revokeObjectURL(s2)}).bind(null,n2,e2),o2=__name(function(){v(n2),n2.href&&URL.revokeObjectURL(n2.href)},"o")):(n2=y(e2),r2=(function(t3,e3){var n3=e3.css,r3=e3.media;if(r3&&t3.setAttribute("media",r3),t3.styleSheet)t3.styleSheet.cssText=n3;else{for(;t3.firstChild;)t3.removeChild(t3.firstChild);t3.appendChild(document.createTextNode(n3))}}).bind(null,n2),o2=__name(function(){v(n2)},"o"));return r2(t2),function(e3){if(e3){if(e3.css===t2.css&&e3.media===t2.media&&e3.sourceMap===t2.sourceMap)return;r2(t2=e3)}else o2()}}__name(b,"b"),t.exports=function(t2,e2){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(e2=e2||{}).attrs=typeof e2.attrs=="object"?e2.attrs:{},e2.singleton||typeof e2.singleton=="boolean"||(e2.singleton=a()),e2.insertInto||(e2.insertInto="head"),e2.insertAt||(e2.insertAt="bottom");var n2=p(t2,e2);return d2(n2,e2),function(t3){for(var r2=[],o2=0;o2<n2.length;o2++){var a2=n2[o2];(s2=i[a2.id]).refs--,r2.push(s2)}for(t3&&d2(p(t3,e2),e2),o2=0;o2<r2.length;o2++){var s2;if((s2=r2[o2]).refs===0){for(var c2=0;c2<s2.parts.length;c2++)s2.parts[c2]();delete i[s2.id]}}}};var m2,w=(m2=[],function(t2,e2){return m2[t2]=e2,m2.filter(Boolean).join(`
`)});function x(t2,e2,n2,r2){var o2=n2?"":r2.css;if(t2.styleSheet)t2.styleSheet.cssText=w(e2,o2);else{var i2=document.createTextNode(o2),a2=t2.childNodes;a2[e2]&&t2.removeChild(a2[e2]),a2.length?t2.insertBefore(i2,a2[e2]):t2.appendChild(i2)}}__name(x,"x")},function(t,e){t.exports=function(t2){var e2=typeof window<"u"&&window.location;if(!e2)throw new Error("fixUrls requires window.location");if(!t2||typeof t2!="string")return t2;var n=e2.protocol+"//"+e2.host,r=n+e2.pathname.replace(/\/[^\/]*$/,"/");return t2.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t3,e3){var o,i=e3.trim().replace(/^"(.*)"$/,function(t4,e4){return e4}).replace(/^'(.*)'$/,function(t4,e4){return e4});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?t3:(o=i.indexOf("//")===0?i:i.indexOf("/")===0?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(t,e,n){n.r(e),n(0);function r(t2){return function(t3){if(Array.isArray(t3)){for(var e2=0,n2=new Array(t3.length);e2<t3.length;e2++)n2[e2]=t3[e2];return n2}}(t2)||function(t3){if(Symbol.iterator in Object(t3)||Object.prototype.toString.call(t3)==="[object Arguments]")return Array.from(t3)}(t2)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__name(r,"r");function o(t2,e2){for(var n2=0;n2<e2.length;n2++){var r2=e2[n2];r2.enumerable=r2.enumerable||!1,r2.configurable=!0,"value"in r2&&(r2.writable=!0),Object.defineProperty(t2,r2.key,r2)}}__name(o,"o");function i(t2,e2,n2){return e2&&o(t2.prototype,e2),n2&&o(t2,n2),t2}__name(i,"i"),n.d(e,"default",function(){return a});var a=function(){function t2(e2){var n2=e2.data,r2=e2.config,o2=e2.api,i2=e2.readOnly;(function(t3,e3){if(!(t3 instanceof e3))throw new TypeError("Cannot call a class as a function")})(this,t2);var a2=t2.ALIGNMENTS,s=t2.DEFAULT_ALIGNMENT;this.api=o2,this.readOnly=i2,this.quotePlaceholder=r2.quotePlaceholder||t2.DEFAULT_QUOTE_PLACEHOLDER,this.captionPlaceholder=r2.captionPlaceholder||t2.DEFAULT_CAPTION_PLACEHOLDER,this.data={text:n2.text||"",caption:n2.caption||"",alignment:Object.values(a2).includes(n2.alignment)&&n2.alignment||r2.defaultAlignment||s}}return __name(t2,"t"),i(t2,[{key:"CSS",get:function(){return{baseClass:this.api.styles.block,wrapper:"cdx-quote",text:"cdx-quote__text",input:this.api.styles.input,caption:"cdx-quote__caption"}}},{key:"settings",get:function(){return[{name:"left",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 7L5 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17 17H5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13 12L5 12"/></svg>'},{name:"center",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 7L6 7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 17H6"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 12L8 12"/></svg>'}]}}],[{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 10.8182L9 10.8182C8.80222 10.8182 8.60888 10.7649 8.44443 10.665C8.27998 10.5651 8.15181 10.4231 8.07612 10.257C8.00043 10.0909 7.98063 9.90808 8.01922 9.73174C8.0578 9.55539 8.15304 9.39341 8.29289 9.26627C8.43275 9.13913 8.61093 9.05255 8.80491 9.01747C8.99889 8.98239 9.19996 9.00039 9.38268 9.0692C9.56541 9.13801 9.72159 9.25453 9.83147 9.40403C9.94135 9.55353 10 9.72929 10 9.90909L10 12.1818C10 12.664 9.78929 13.1265 9.41421 13.4675C9.03914 13.8084 8.53043 14 8 14"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 10.8182L15 10.8182C14.8022 10.8182 14.6089 10.7649 14.4444 10.665C14.28 10.5651 14.1518 10.4231 14.0761 10.257C14.0004 10.0909 13.9806 9.90808 14.0192 9.73174C14.0578 9.55539 14.153 9.39341 14.2929 9.26627C14.4327 9.13913 14.6109 9.05255 14.8049 9.01747C14.9989 8.98239 15.2 9.00039 15.3827 9.0692C15.5654 9.13801 15.7216 9.25453 15.8315 9.40403C15.9414 9.55353 16 9.72929 16 9.90909L16 12.1818C16 12.664 15.7893 13.1265 15.4142 13.4675C15.0391 13.8084 14.5304 14 14 14"/></svg>',title:"Quote"}}},{key:"contentless",get:function(){return!0}},{key:"enableLineBreaks",get:function(){return!0}},{key:"DEFAULT_QUOTE_PLACEHOLDER",get:function(){return"Enter a quote"}},{key:"DEFAULT_CAPTION_PLACEHOLDER",get:function(){return"Enter a caption"}},{key:"ALIGNMENTS",get:function(){return{left:"left",center:"center"}}},{key:"DEFAULT_ALIGNMENT",get:function(){return t2.ALIGNMENTS.left}},{key:"conversionConfig",get:function(){return{import:"text",export:function(t3){return t3.caption?"".concat(t3.text," — ").concat(t3.caption):t3.text}}}}]),i(t2,[{key:"render",value:function(){var t3=this._make("blockquote",[this.CSS.baseClass,this.CSS.wrapper]),e2=this._make("div",[this.CSS.input,this.CSS.text],{contentEditable:!this.readOnly,innerHTML:this.data.text}),n2=this._make("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly,innerHTML:this.data.caption});return e2.dataset.placeholder=this.quotePlaceholder,n2.dataset.placeholder=this.captionPlaceholder,t3.appendChild(e2),t3.appendChild(n2),t3}},{key:"save",value:function(t3){var e2=t3.querySelector(".".concat(this.CSS.text)),n2=t3.querySelector(".".concat(this.CSS.caption));return Object.assign(this.data,{text:e2.innerHTML,caption:n2.innerHTML})}},{key:"renderSettings",value:function(){var t3=this;return this.settings.map(function(e2){return{icon:e2.icon,label:t3.api.i18n.t("Align ".concat((n2=e2.name,n2[0].toUpperCase()+n2.substr(1)))),onActivate:function(){return t3._toggleTune(e2.name)},isActive:t3.data.alignment===e2.name,closeOnActivate:!0};var n2})}},{key:"_toggleTune",value:function(t3){this.data.alignment=t3}},{key:"_make",value:function(t3){var e2,n2=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,o2=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i2=document.createElement(t3);Array.isArray(n2)?(e2=i2.classList).add.apply(e2,r(n2)):n2&&i2.classList.add(n2);for(var a2 in o2)i2[a2]=o2[a2];return i2}}],[{key:"sanitize",get:function(){return{text:{br:!0},caption:{br:!0},alignment:{}}}}]),t2}()}]).default})})(bundle$3);var bundleExports$3=bundle$3.exports;const Quote=getDefaultExportFromCjs(bundleExports$3);var bundle$2={exports:{}};(function(module,exports){(function(e,t){module.exports=t()})(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return __name(n,"n"),n.m=e,n.c=t,n.d=function(e2,t2,r){n.o(e2,t2)||Object.defineProperty(e2,t2,{enumerable:!0,get:r})},n.r=function(e2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e2,"__esModule",{value:!0})},n.t=function(e2,t2){if(1&t2&&(e2=n(e2)),8&t2||4&t2&&typeof e2=="object"&&e2&&e2.__esModule)return e2;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e2}),2&t2&&typeof e2!="string")for(var o in e2)n.d(r,o,(function(t3){return e2[t3]}).bind(null,o));return r},n.n=function(e2){var t2=e2&&e2.__esModule?function(){return e2.default}:function(){return e2};return n.d(t2,"a",t2),t2},n.o=function(e2,t2){return Object.prototype.hasOwnProperty.call(e2,t2)},n.p="/",n(n.s=5)}([function(e,t,n){var r=n(1);typeof r=="string"&&(r=[[e.i,r,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(r,o),r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(2)(!1)).push([e.i,`.ce-delimiter {
    line-height: 1.6em;
    width: 100%;
    text-align: center;
}

.ce-delimiter:before {
    display: inline-block;
    content: "***";
    font-size: 30px;
    line-height: 65px;
    height: 30px;
    letter-spacing: 0.2em;
}`,""])},function(e,t){e.exports=function(e2){var t2=[];return t2.toString=function(){return this.map(function(t3){var n=function(e3,t4){var n2=e3[1]||"",r=e3[3];if(!r)return n2;if(t4&&typeof btoa=="function"){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(e4){return"/*# sourceURL="+r.sourceRoot+e4+" */"});return[n2].concat(i).concat([o]).join(`
`)}var a;return[n2].join(`
`)}(t3,e2);return t3[2]?"@media "+t3[2]+"{"+n+"}":n}).join("")},t2.i=function(e3,n){typeof e3=="string"&&(e3=[[null,e3,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];typeof i=="number"&&(r[i]=!0)}for(o=0;o<e3.length;o++){var a=e3[o];typeof a[0]=="number"&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t2.push(a))}},t2}},function(e,t,n){var r,o,i={},a=(r=__name(function(){return window&&document&&document.all&&!window.atob},"r"),function(){return o===void 0&&(o=r.apply(this,arguments)),o}),s=function(e2){var t2={};return function(e3){if(typeof e3=="function")return e3();if(t2[e3]===void 0){var n2=(function(e4){return document.querySelector(e4)}).call(this,e3);if(window.HTMLIFrameElement&&n2 instanceof window.HTMLIFrameElement)try{n2=n2.contentDocument.head}catch{n2=null}t2[e3]=n2}return t2[e3]}}(),u=null,c=0,f=[],l=n(4);function p(e2,t2){for(var n2=0;n2<e2.length;n2++){var r2=e2[n2],o2=i[r2.id];if(o2){o2.refs++;for(var a2=0;a2<o2.parts.length;a2++)o2.parts[a2](r2.parts[a2]);for(;a2<r2.parts.length;a2++)o2.parts.push(m2(r2.parts[a2],t2))}else{var s2=[];for(a2=0;a2<r2.parts.length;a2++)s2.push(m2(r2.parts[a2],t2));i[r2.id]={id:r2.id,refs:1,parts:s2}}}}__name(p,"p");function d2(e2,t2){for(var n2=[],r2={},o2=0;o2<e2.length;o2++){var i2=e2[o2],a2=t2.base?i2[0]+t2.base:i2[0],s2={css:i2[1],media:i2[2],sourceMap:i2[3]};r2[a2]?r2[a2].parts.push(s2):n2.push(r2[a2]={id:a2,parts:[s2]})}return n2}__name(d2,"d");function h(e2,t2){var n2=s(e2.insertInto);if(!n2)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r2=f[f.length-1];if(e2.insertAt==="top")r2?r2.nextSibling?n2.insertBefore(t2,r2.nextSibling):n2.appendChild(t2):n2.insertBefore(t2,n2.firstChild),f.push(t2);else if(e2.insertAt==="bottom")n2.appendChild(t2);else{if(typeof e2.insertAt!="object"||!e2.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var o2=s(e2.insertInto+" "+e2.insertAt.before);n2.insertBefore(t2,o2)}}__name(h,"h");function v(e2){if(e2.parentNode===null)return!1;e2.parentNode.removeChild(e2);var t2=f.indexOf(e2);t2>=0&&f.splice(t2,1)}__name(v,"v");function b(e2){var t2=document.createElement("style");return e2.attrs.type===void 0&&(e2.attrs.type="text/css"),y(t2,e2.attrs),h(e2,t2),t2}__name(b,"b");function y(e2,t2){Object.keys(t2).forEach(function(n2){e2.setAttribute(n2,t2[n2])})}__name(y,"y");function m2(e2,t2){var n2,r2,o2,i2;if(t2.transform&&e2.css){if(!(i2=t2.transform(e2.css)))return function(){};e2.css=i2}if(t2.singleton){var a2=c++;n2=u||(u=b(t2)),r2=x.bind(null,n2,a2,!1),o2=x.bind(null,n2,a2,!0)}else e2.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(n2=function(e3){var t3=document.createElement("link");return e3.attrs.type===void 0&&(e3.attrs.type="text/css"),e3.attrs.rel="stylesheet",y(t3,e3.attrs),h(e3,t3),t3}(t2),r2=(function(e3,t3,n3){var r3=n3.css,o3=n3.sourceMap,i3=t3.convertToAbsoluteUrls===void 0&&o3;(t3.convertToAbsoluteUrls||i3)&&(r3=l(r3)),o3&&(r3+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o3))))+" */");var a3=new Blob([r3],{type:"text/css"}),s2=e3.href;e3.href=URL.createObjectURL(a3),s2&&URL.revokeObjectURL(s2)}).bind(null,n2,t2),o2=__name(function(){v(n2),n2.href&&URL.revokeObjectURL(n2.href)},"o")):(n2=b(t2),r2=(function(e3,t3){var n3=t3.css,r3=t3.media;if(r3&&e3.setAttribute("media",r3),e3.styleSheet)e3.styleSheet.cssText=n3;else{for(;e3.firstChild;)e3.removeChild(e3.firstChild);e3.appendChild(document.createTextNode(n3))}}).bind(null,n2),o2=__name(function(){v(n2)},"o"));return r2(e2),function(t3){if(t3){if(t3.css===e2.css&&t3.media===e2.media&&t3.sourceMap===e2.sourceMap)return;r2(e2=t3)}else o2()}}__name(m2,"m"),e.exports=function(e2,t2){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(t2=t2||{}).attrs=typeof t2.attrs=="object"?t2.attrs:{},t2.singleton||typeof t2.singleton=="boolean"||(t2.singleton=a()),t2.insertInto||(t2.insertInto="head"),t2.insertAt||(t2.insertAt="bottom");var n2=d2(e2,t2);return p(n2,t2),function(e3){for(var r2=[],o2=0;o2<n2.length;o2++){var a2=n2[o2];(s2=i[a2.id]).refs--,r2.push(s2)}for(e3&&p(d2(e3,t2),t2),o2=0;o2<r2.length;o2++){var s2;if((s2=r2[o2]).refs===0){for(var u2=0;u2<s2.parts.length;u2++)s2.parts[u2]();delete i[s2.id]}}}};var g,w=(g=[],function(e2,t2){return g[e2]=t2,g.filter(Boolean).join(`
`)});function x(e2,t2,n2,r2){var o2=n2?"":r2.css;if(e2.styleSheet)e2.styleSheet.cssText=w(t2,o2);else{var i2=document.createTextNode(o2),a2=e2.childNodes;a2[t2]&&e2.removeChild(a2[t2]),a2.length?e2.insertBefore(i2,a2[t2]):e2.appendChild(i2)}}__name(x,"x")},function(e,t){e.exports=function(e2){var t2=typeof window<"u"&&window.location;if(!t2)throw new Error("fixUrls requires window.location");if(!e2||typeof e2!="string")return e2;var n=t2.protocol+"//"+t2.host,r=n+t2.pathname.replace(/\/[^\/]*$/,"/");return e2.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e3,t3){var o,i=t3.trim().replace(/^"(.*)"$/,function(e4,t4){return t4}).replace(/^'(.*)'$/,function(e4,t4){return t4});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e3:(o=i.indexOf("//")===0?i:i.indexOf("/")===0?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}},function(e,t,n){n.r(t),n(0);function r(e2,t2){for(var n2=0;n2<t2.length;n2++){var r2=t2[n2];r2.enumerable=r2.enumerable||!1,r2.configurable=!0,"value"in r2&&(r2.writable=!0),Object.defineProperty(e2,r2.key,r2)}}__name(r,"r");function o(e2,t2,n2){return t2&&r(e2.prototype,t2),n2&&r(e2,n2),e2}__name(o,"o");/**
 * Delimiter Block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 * @version 2.0.0
 */n.d(t,"default",function(){return i});var i=function(){function e2(t2){var n2=t2.data,r2=(t2.config,t2.api);(function(e3,t3){if(!(e3 instanceof t3))throw new TypeError("Cannot call a class as a function")})(this,e2),this.api=r2,this._CSS={block:this.api.styles.block,wrapper:"ce-delimiter"},this._data={},this._element=this.drawView(),this.data=n2}return __name(e2,"e"),o(e2,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"contentless",get:function(){return!0}}]),o(e2,[{key:"drawView",value:function(){var e3=document.createElement("DIV");return e3.classList.add(this._CSS.wrapper,this._CSS.block),e3}},{key:"render",value:function(){return this._element}},{key:"save",value:function(e3){return{}}}],[{key:"toolbox",get:function(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="6" x2="10" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="14" x2="18" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',title:"Delimiter"}}}]),e2}()}]).default})})(bundle$2);var bundleExports$2=bundle$2.exports;const Delimiter=getDefaultExportFromCjs(bundleExports$2);var bundle$1={exports:{}};/*!
 * Image tool
 * 
 * @version 2.8.1
 * 
 * @package https://github.com/editor-js/image
 * @licence MIT
 * @author CodeX <https://codex.so>
 */(function(module,exports){(function(e,t){module.exports=t()})(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return __name(n,"n"),n.m=e,n.c=t,n.d=function(e2,t2,r){n.o(e2,t2)||Object.defineProperty(e2,t2,{enumerable:!0,get:r})},n.r=function(e2){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e2,"__esModule",{value:!0})},n.t=function(e2,t2){if(1&t2&&(e2=n(e2)),8&t2||4&t2&&typeof e2=="object"&&e2&&e2.__esModule)return e2;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e2}),2&t2&&typeof e2!="string")for(var o in e2)n.d(r,o,(function(t3){return e2[t3]}).bind(null,o));return r},n.n=function(e2){var t2=e2&&e2.__esModule?function(){return e2.default}:function(){return e2};return n.d(t2,"a",t2),t2},n.o=function(e2,t2){return Object.prototype.hasOwnProperty.call(e2,t2)},n.p="/",n(n.s=9)}([function(e,t){function n(e2,t2){for(var n2=0;n2<t2.length;n2++){var r=t2[n2];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e2,r.key,r)}}__name(n,"n"),e.exports=function(e2,t2,r){return t2&&n(e2.prototype,t2),r&&n(e2,r),e2}},function(e,t,n){e.exports=function(e2){var t2={};function n2(r){if(t2[r])return t2[r].exports;var o=t2[r]={i:r,l:!1,exports:{}};return e2[r].call(o.exports,o,o.exports,n2),o.l=!0,o.exports}return __name(n2,"n"),n2.m=e2,n2.c=t2,n2.d=function(e3,t3,r){n2.o(e3,t3)||Object.defineProperty(e3,t3,{enumerable:!0,get:r})},n2.r=function(e3){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e3,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e3,"__esModule",{value:!0})},n2.t=function(e3,t3){if(1&t3&&(e3=n2(e3)),8&t3||4&t3&&typeof e3=="object"&&e3&&e3.__esModule)return e3;var r=Object.create(null);if(n2.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e3}),2&t3&&typeof e3!="string")for(var o in e3)n2.d(r,o,(function(t4){return e3[t4]}).bind(null,o));return r},n2.n=function(e3){var t3=e3&&e3.__esModule?function(){return e3.default}:function(){return e3};return n2.d(t3,"a",t3),t3},n2.o=function(e3,t3){return Object.prototype.hasOwnProperty.call(e3,t3)},n2.p="",n2(n2.s=3)}([function(e2,t2){var n2;n2=function(){return this}();try{n2=n2||new Function("return this")()}catch{typeof window=="object"&&(n2=window)}e2.exports=n2},function(e2,t2,n2){(function(e3){var r=n2(2),o=setTimeout;function i(){}__name(i,"i");function a(e4){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if(typeof e4!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(e4,this)}__name(a,"a");function u(e4,t3){for(;e4._state===3;)e4=e4._value;e4._state!==0?(e4._handled=!0,a._immediateFn(function(){var n3=e4._state===1?t3.onFulfilled:t3.onRejected;if(n3!==null){var r2;try{r2=n3(e4._value)}catch(e5){return void s(t3.promise,e5)}c(t3.promise,r2)}else(e4._state===1?c:s)(t3.promise,e4._value)})):e4._deferreds.push(t3)}__name(u,"u");function c(e4,t3){try{if(t3===e4)throw new TypeError("A promise cannot be resolved with itself.");if(t3&&(typeof t3=="object"||typeof t3=="function")){var n3=t3.then;if(t3 instanceof a)return e4._state=3,e4._value=t3,void l(e4);if(typeof n3=="function")return void f((r2=n3,o2=t3,function(){r2.apply(o2,arguments)}),e4)}e4._state=1,e4._value=t3,l(e4)}catch(t4){s(e4,t4)}var r2,o2}__name(c,"c");function s(e4,t3){e4._state=2,e4._value=t3,l(e4)}__name(s,"s");function l(e4){e4._state===2&&e4._deferreds.length===0&&a._immediateFn(function(){e4._handled||a._unhandledRejectionFn(e4._value)});for(var t3=0,n3=e4._deferreds.length;t3<n3;t3++)u(e4,e4._deferreds[t3]);e4._deferreds=null}__name(l,"l");function d2(e4,t3,n3){this.onFulfilled=typeof e4=="function"?e4:null,this.onRejected=typeof t3=="function"?t3:null,this.promise=n3}__name(d2,"d");function f(e4,t3){var n3=!1;try{e4(function(e5){n3||(n3=!0,c(t3,e5))},function(e5){n3||(n3=!0,s(t3,e5))})}catch(e5){if(n3)return;n3=!0,s(t3,e5)}}__name(f,"f"),a.prototype.catch=function(e4){return this.then(null,e4)},a.prototype.then=function(e4,t3){var n3=new this.constructor(i);return u(this,new d2(e4,t3,n3)),n3},a.prototype.finally=r.a,a.all=function(e4){return new a(function(t3,n3){if(!e4||e4.length===void 0)throw new TypeError("Promise.all accepts an array");var r2=Array.prototype.slice.call(e4);if(r2.length===0)return t3([]);var o2=r2.length;function i2(e5,a3){try{if(a3&&(typeof a3=="object"||typeof a3=="function")){var u2=a3.then;if(typeof u2=="function")return void u2.call(a3,function(t4){i2(e5,t4)},n3)}r2[e5]=a3,--o2==0&&t3(r2)}catch(e6){n3(e6)}}__name(i2,"i");for(var a2=0;a2<r2.length;a2++)i2(a2,r2[a2])})},a.resolve=function(e4){return e4&&typeof e4=="object"&&e4.constructor===a?e4:new a(function(t3){t3(e4)})},a.reject=function(e4){return new a(function(t3,n3){n3(e4)})},a.race=function(e4){return new a(function(t3,n3){for(var r2=0,o2=e4.length;r2<o2;r2++)e4[r2].then(t3,n3)})},a._immediateFn=typeof e3=="function"&&function(t3){e3(t3)}||function(e4){o(e4,0)},a._unhandledRejectionFn=function(e4){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",e4)},t2.a=a}).call(this,n2(5).setImmediate)},function(e2,t2,n2){t2.a=function(e3){var t3=this.constructor;return this.then(function(n3){return t3.resolve(e3()).then(function(){return n3})},function(n3){return t3.resolve(e3()).then(function(){return t3.reject(n3)})})}},function(e2,t2,n2){function r(e3){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e4){return typeof e4}:function(e4){return e4&&typeof Symbol=="function"&&e4.constructor===Symbol&&e4!==Symbol.prototype?"symbol":typeof e4})(e3)}__name(r,"r"),n2(4);var o,i,a,u,c,s,l,d2=n2(8),f=(i=__name(function(e3){return new Promise(function(t3,n3){e3=u(e3),(e3=c(e3)).beforeSend&&e3.beforeSend();var r2=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");r2.open(e3.method,e3.url),r2.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e3.headers).forEach(function(t4){var n4=e3.headers[t4];r2.setRequestHeader(t4,n4)});var o2=e3.ratio;r2.upload.addEventListener("progress",function(t4){var n4=Math.round(t4.loaded/t4.total*100),r3=Math.ceil(n4*o2/100);e3.progress(Math.min(r3,100))},!1),r2.addEventListener("progress",function(t4){var n4=Math.round(t4.loaded/t4.total*100),r3=Math.ceil(n4*(100-o2)/100)+o2;e3.progress(Math.min(r3,100))},!1),r2.onreadystatechange=function(){if(r2.readyState===4){var e4=r2.response;try{e4=JSON.parse(e4)}catch{}var o3=d2.parseHeaders(r2.getAllResponseHeaders()),i2={body:e4,code:r2.status,headers:o3};l(r2.status)?t3(i2):n3(i2)}},r2.send(e3.data)})},"i"),a=__name(function(e3){return e3.method="POST",i(e3)},"a"),u=__name(function(){var e3=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(e3.url&&typeof e3.url!="string")throw new Error("Url must be a string");if(e3.url=e3.url||"",e3.method&&typeof e3.method!="string")throw new Error("`method` must be a string or null");if(e3.method=e3.method?e3.method.toUpperCase():"GET",e3.headers&&r(e3.headers)!=="object")throw new Error("`headers` must be an object or null");if(e3.headers=e3.headers||{},e3.type&&(typeof e3.type!="string"||!Object.values(o).includes(e3.type)))throw new Error("`type` must be taken from module's «contentType» library");if(e3.progress&&typeof e3.progress!="function")throw new Error("`progress` must be a function or null");if(e3.progress=e3.progress||function(e4){},e3.beforeSend=e3.beforeSend||function(e4){},e3.ratio&&typeof e3.ratio!="number")throw new Error("`ratio` must be a number");if(e3.ratio<0||e3.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(e3.ratio=e3.ratio||90,e3.accept&&typeof e3.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(e3.accept=e3.accept||"*/*",e3.multiple&&typeof e3.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(e3.multiple=e3.multiple||!1,e3.fieldName&&typeof e3.fieldName!="string")throw new Error("`fieldName` must be a string");return e3.fieldName=e3.fieldName||"files",e3},"u"),c=__name(function(e3){switch(e3.method){case"GET":var t3=s(e3.data,o.URLENCODED);delete e3.data,e3.url=/\?/.test(e3.url)?e3.url+"&"+t3:e3.url+"?"+t3;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var n3=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||o.JSON}(e3);(d2.isFormData(e3.data)||d2.isFormElement(e3.data))&&(n3=o.FORM),e3.data=s(e3.data,n3),n3!==f.contentType.FORM&&(e3.headers["content-type"]=n3)}return e3},"c"),s=__name(function(){var e3=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case o.URLENCODED:return d2.urlEncode(e3);case o.JSON:return d2.jsonEncode(e3);case o.FORM:return d2.formEncode(e3);default:return e3}},"s"),l=__name(function(e3){return e3>=200&&e3<300},"l"),{contentType:o={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:i,get:function(e3){return e3.method="GET",i(e3)},post:a,transport:function(e3){return e3=u(e3),d2.selectFiles(e3).then(function(t3){for(var n3=new FormData,r2=0;r2<t3.length;r2++)n3.append(e3.fieldName,t3[r2],t3[r2].name);d2.isObject(e3.data)&&Object.keys(e3.data).forEach(function(t4){var r3=e3.data[t4];n3.append(t4,r3)});var o2=e3.beforeSend;return e3.beforeSend=function(){return o2(t3)},e3.data=n3,a(e3)})},selectFiles:function(e3){return delete(e3=u(e3)).beforeSend,d2.selectFiles(e3)}});e2.exports=f},function(e2,t2,n2){n2.r(t2);var r=n2(1);window.Promise=window.Promise||r.a},function(e2,t2,n2){(function(e3){var r=e3!==void 0&&e3||typeof self<"u"&&self||window,o=Function.prototype.apply;function i(e4,t3){this._id=e4,this._clearFn=t3}__name(i,"i"),t2.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t2.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t2.clearTimeout=t2.clearInterval=function(e4){e4&&e4.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t2.enroll=function(e4,t3){clearTimeout(e4._idleTimeoutId),e4._idleTimeout=t3},t2.unenroll=function(e4){clearTimeout(e4._idleTimeoutId),e4._idleTimeout=-1},t2._unrefActive=t2.active=function(e4){clearTimeout(e4._idleTimeoutId);var t3=e4._idleTimeout;t3>=0&&(e4._idleTimeoutId=setTimeout(function(){e4._onTimeout&&e4._onTimeout()},t3))},n2(6),t2.setImmediate=typeof self<"u"&&self.setImmediate||e3!==void 0&&e3.setImmediate||this&&this.setImmediate,t2.clearImmediate=typeof self<"u"&&self.clearImmediate||e3!==void 0&&e3.clearImmediate||this&&this.clearImmediate}).call(this,n2(0))},function(e2,t2,n2){(function(e3,t3){(function(e4,n3){if(!e4.setImmediate){var r,o,i,a,u,c=1,s={},l=!1,d2=e4.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e4);f=f&&f.setTimeout?f:e4,{}.toString.call(e4.process)==="[object process]"?r=__name(function(e5){t3.nextTick(function(){h(e5)})},"r"):function(){if(e4.postMessage&&!e4.importScripts){var t4=!0,n4=e4.onmessage;return e4.onmessage=function(){t4=!1},e4.postMessage("","*"),e4.onmessage=n4,t4}}()?(a="setImmediate$"+Math.random()+"$",u=__name(function(t4){t4.source===e4&&typeof t4.data=="string"&&t4.data.indexOf(a)===0&&h(+t4.data.slice(a.length))},"u"),e4.addEventListener?e4.addEventListener("message",u,!1):e4.attachEvent("onmessage",u),r=__name(function(t4){e4.postMessage(a+t4,"*")},"r")):e4.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e5){h(e5.data)},r=__name(function(e5){i.port2.postMessage(e5)},"r")):d2&&"onreadystatechange"in d2.createElement("script")?(o=d2.documentElement,r=__name(function(e5){var t4=d2.createElement("script");t4.onreadystatechange=function(){h(e5),t4.onreadystatechange=null,o.removeChild(t4),t4=null},o.appendChild(t4)},"r")):r=__name(function(e5){setTimeout(h,0,e5)},"r"),f.setImmediate=function(e5){typeof e5!="function"&&(e5=new Function(""+e5));for(var t4=new Array(arguments.length-1),n4=0;n4<t4.length;n4++)t4[n4]=arguments[n4+1];var o2={callback:e5,args:t4};return s[c]=o2,r(c),c++},f.clearImmediate=p}function p(e5){delete s[e5]}__name(p,"p");function h(e5){if(l)setTimeout(h,0,e5);else{var t4=s[e5];if(t4){l=!0;try{(function(e6){var t5=e6.callback,n4=e6.args;switch(n4.length){case 0:t5();break;case 1:t5(n4[0]);break;case 2:t5(n4[0],n4[1]);break;case 3:t5(n4[0],n4[1],n4[2]);break;default:t5.apply(void 0,n4)}})(t4)}finally{p(e5),l=!1}}}}__name(h,"h")})(typeof self>"u"?e3===void 0?this:e3:self)}).call(this,n2(0),n2(7))},function(e2,t2){var n2,r,o=e2.exports={};function i(){throw new Error("setTimeout has not been defined")}__name(i,"i");function a(){throw new Error("clearTimeout has not been defined")}__name(a,"a");function u(e3){if(n2===setTimeout)return setTimeout(e3,0);if((n2===i||!n2)&&setTimeout)return n2=setTimeout,setTimeout(e3,0);try{return n2(e3,0)}catch{try{return n2.call(null,e3,0)}catch{return n2.call(this,e3,0)}}}__name(u,"u"),function(){try{n2=typeof setTimeout=="function"?setTimeout:i}catch{n2=i}try{r=typeof clearTimeout=="function"?clearTimeout:a}catch{r=a}}();var c,s=[],l=!1,d2=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):d2=-1,s.length&&p())}__name(f,"f");function p(){if(!l){var e3=u(f);l=!0;for(var t3=s.length;t3;){for(c=s,s=[];++d2<t3;)c&&c[d2].run();d2=-1,t3=s.length}c=null,l=!1,function(e4){if(r===clearTimeout)return clearTimeout(e4);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e4);try{r(e4)}catch{try{return r.call(null,e4)}catch{return r.call(this,e4)}}}(e3)}}__name(p,"p");function h(e3,t3){this.fun=e3,this.array=t3}__name(h,"h");function m2(){}__name(m2,"m"),o.nextTick=function(e3){var t3=new Array(arguments.length-1);if(arguments.length>1)for(var n3=1;n3<arguments.length;n3++)t3[n3-1]=arguments[n3];s.push(new h(e3,t3)),s.length!==1||l||u(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m2,o.addListener=m2,o.once=m2,o.off=m2,o.removeListener=m2,o.removeAllListeners=m2,o.emit=m2,o.prependListener=m2,o.prependOnceListener=m2,o.listeners=function(e3){return[]},o.binding=function(e3){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e3){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e2,t2,n2){function r(e3,t3){for(var n3=0;n3<t3.length;n3++){var r2=t3[n3];r2.enumerable=r2.enumerable||!1,r2.configurable=!0,"value"in r2&&(r2.writable=!0),Object.defineProperty(e3,r2.key,r2)}}__name(r,"r");var o=n2(9);e2.exports=function(){function e3(){(function(e4,t4){if(!(e4 instanceof t4))throw new TypeError("Cannot call a class as a function")})(this,e3)}__name(e3,"e");var t3,n3;return t3=e3,(n3=[{key:"urlEncode",value:function(e4){return o(e4)}},{key:"jsonEncode",value:function(e4){return JSON.stringify(e4)}},{key:"formEncode",value:function(e4){if(this.isFormData(e4))return e4;if(this.isFormElement(e4))return new FormData(e4);if(this.isObject(e4)){var t4=new FormData;return Object.keys(e4).forEach(function(n4){var r2=e4[n4];t4.append(n4,r2)}),t4}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(e4){return Object.prototype.toString.call(e4)==="[object Object]"}},{key:"isFormData",value:function(e4){return e4 instanceof FormData}},{key:"isFormElement",value:function(e4){return e4 instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var e4=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(t4,n4){var r2=document.createElement("INPUT");r2.type="file",e4.multiple&&r2.setAttribute("multiple","multiple"),e4.accept&&r2.setAttribute("accept",e4.accept),r2.style.display="none",document.body.appendChild(r2),r2.addEventListener("change",function(e5){var n5=e5.target.files;t4(n5),document.body.removeChild(r2)},!1),r2.click()})}},{key:"parseHeaders",value:function(e4){var t4=e4.trim().split(/[\r\n]+/),n4={};return t4.forEach(function(e5){var t5=e5.split(": "),r2=t5.shift(),o2=t5.join(": ");r2&&(n4[r2]=o2)}),n4}}])&&r(t3,n3),e3}()},function(e2,t2){var n2=__name(function(e3){return encodeURIComponent(e3).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},"n"),r=__name(function(e3,t3,o,i){return t3=t3||null,o=o||"&",i=i||null,e3?function(e4){for(var t4=new Array,n3=0;n3<e4.length;n3++)e4[n3]&&t4.push(e4[n3]);return t4}(Object.keys(e3).map(function(a){var u,c,s=a;if(i&&(s=i+"["+s+"]"),typeof e3[a]=="object"&&e3[a]!==null)u=r(e3[a],null,o,s);else{t3&&(c=s,s=!isNaN(parseFloat(c))&&isFinite(c)?t3+Number(s):s);var l=e3[a];l=(l=(l=(l=l===!0?"1":l)===!1?"0":l)===0?"0":l)||"",u=n2(s)+"="+n2(l)}return u})).join(o).replace(/[!'()*]/g,""):""},"r");e2.exports=r}])},function(e,t){e.exports=function(e2,t2){if(!(e2 instanceof t2))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){e.exports=n(10)},function(e,t){e.exports=function(e2,t2){(t2==null||t2>e2.length)&&(t2=e2.length);for(var n=0,r=new Array(t2);n<t2;n++)r[n]=e2[n];return r}},function(e,t,n){var r=n(4);e.exports=function(e2,t2){if(e2){if(typeof e2=="string")return r(e2,t2);var n2=Object.prototype.toString.call(e2).slice(8,-1);return n2==="Object"&&e2.constructor&&(n2=e2.constructor.name),n2==="Map"||n2==="Set"?Array.from(n2):n2==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2)?r(e2,t2):void 0}}},function(e,t){function n(e2,t2,n2,r,o,i,a){try{var u=e2[i](a),c=u.value}catch(e3){return void n2(e3)}u.done?t2(c):Promise.resolve(c).then(r,o)}__name(n,"n"),e.exports=function(e2){return function(){var t2=this,r=arguments;return new Promise(function(o,i){var a=e2.apply(t2,r);function u(e3){n(a,o,i,u,c,"next",e3)}__name(u,"u");function c(e3){n(a,o,i,u,c,"throw",e3)}__name(c,"c"),u(void 0)})}}},function(e,t,n){var r=n(15),o=n(16),i=n(5),a=n(17);e.exports=function(e2){return r(e2)||o(e2)||i(e2)||a()}},function(e,t,n){var r=n(18),o=n(19),i=n(5),a=n(20);e.exports=function(e2,t2){return r(e2)||o(e2,t2)||i(e2,t2)||a()}},function(e,t,n){e.exports=n(21)},function(e,t,n){var r=function(e2){var t2=Object.prototype,n2=t2.hasOwnProperty,r2=typeof Symbol=="function"?Symbol:{},o=r2.iterator||"@@iterator",i=r2.asyncIterator||"@@asyncIterator",a=r2.toStringTag||"@@toStringTag";function u(e3,t3,n3,r3){var o2=t3&&t3.prototype instanceof l?t3:l,i2=Object.create(o2.prototype),a2=new _(r3||[]);return i2._invoke=function(e4,t4,n4){var r4="suspendedStart";return function(o3,i3){if(r4==="executing")throw new Error("Generator is already running");if(r4==="completed"){if(o3==="throw")throw i3;return E()}for(n4.method=o3,n4.arg=i3;;){var a3=n4.delegate;if(a3){var u2=b(a3,n4);if(u2){if(u2===s)continue;return u2}}if(n4.method==="next")n4.sent=n4._sent=n4.arg;else if(n4.method==="throw"){if(r4==="suspendedStart")throw r4="completed",n4.arg;n4.dispatchException(n4.arg)}else n4.method==="return"&&n4.abrupt("return",n4.arg);r4="executing";var l2=c(e4,t4,n4);if(l2.type==="normal"){if(r4=n4.done?"completed":"suspendedYield",l2.arg===s)continue;return{value:l2.arg,done:n4.done}}l2.type==="throw"&&(r4="completed",n4.method="throw",n4.arg=l2.arg)}}}(e3,n3,a2),i2}__name(u,"u");function c(e3,t3,n3){try{return{type:"normal",arg:e3.call(t3,n3)}}catch(e4){return{type:"throw",arg:e4}}}__name(c,"c"),e2.wrap=u;var s={};function l(){}__name(l,"l");function d2(){}__name(d2,"d");function f(){}__name(f,"f");var p={};p[o]=function(){return this};var h=Object.getPrototypeOf,m2=h&&h(h(x([])));m2&&m2!==t2&&n2.call(m2,o)&&(p=m2);var g=f.prototype=l.prototype=Object.create(p);function y(e3){["next","throw","return"].forEach(function(t3){e3[t3]=function(e4){return this._invoke(t3,e4)}})}__name(y,"y");function v(e3,t3){var r3;this._invoke=function(o2,i2){function a2(){return new t3(function(r4,a3){__name(function r5(o3,i3,a4,u2){var s2=c(e3[o3],e3,i3);if(s2.type!=="throw"){var l2=s2.arg,d3=l2.value;return d3&&typeof d3=="object"&&n2.call(d3,"__await")?t3.resolve(d3.__await).then(function(e4){r5("next",e4,a4,u2)},function(e4){r5("throw",e4,a4,u2)}):t3.resolve(d3).then(function(e4){l2.value=e4,a4(l2)},function(e4){return r5("throw",e4,a4,u2)})}u2(s2.arg)},"r")(o2,i2,r4,a3)})}return __name(a2,"a"),r3=r3?r3.then(a2,a2):a2()}}__name(v,"v");function b(e3,t3){var n3=e3.iterator[t3.method];if(n3===void 0){if(t3.delegate=null,t3.method==="throw"){if(e3.iterator.return&&(t3.method="return",t3.arg=void 0,b(e3,t3),t3.method==="throw"))return s;t3.method="throw",t3.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r3=c(n3,e3.iterator,t3.arg);if(r3.type==="throw")return t3.method="throw",t3.arg=r3.arg,t3.delegate=null,s;var o2=r3.arg;return o2?o2.done?(t3[e3.resultName]=o2.value,t3.next=e3.nextLoc,t3.method!=="return"&&(t3.method="next",t3.arg=void 0),t3.delegate=null,s):o2:(t3.method="throw",t3.arg=new TypeError("iterator result is not an object"),t3.delegate=null,s)}__name(b,"b");function w(e3){var t3={tryLoc:e3[0]};1 in e3&&(t3.catchLoc=e3[1]),2 in e3&&(t3.finallyLoc=e3[2],t3.afterLoc=e3[3]),this.tryEntries.push(t3)}__name(w,"w");function k(e3){var t3=e3.completion||{};t3.type="normal",delete t3.arg,e3.completion=t3}__name(k,"k");function _(e3){this.tryEntries=[{tryLoc:"root"}],e3.forEach(w,this),this.reset(!0)}__name(_,"_");function x(e3){if(e3){var t3=e3[o];if(t3)return t3.call(e3);if(typeof e3.next=="function")return e3;if(!isNaN(e3.length)){var r3=-1,i2=__name(function t4(){for(;++r3<e3.length;)if(n2.call(e3,r3))return t4.value=e3[r3],t4.done=!1,t4;return t4.value=void 0,t4.done=!0,t4},"t");return i2.next=i2}}return{next:E}}__name(x,"x");function E(){return{value:void 0,done:!0}}return __name(E,"E"),d2.prototype=g.constructor=f,f.constructor=d2,f[a]=d2.displayName="GeneratorFunction",e2.isGeneratorFunction=function(e3){var t3=typeof e3=="function"&&e3.constructor;return!!t3&&(t3===d2||(t3.displayName||t3.name)==="GeneratorFunction")},e2.mark=function(e3){return Object.setPrototypeOf?Object.setPrototypeOf(e3,f):(e3.__proto__=f,a in e3||(e3[a]="GeneratorFunction")),e3.prototype=Object.create(g),e3},e2.awrap=function(e3){return{__await:e3}},y(v.prototype),v.prototype[i]=function(){return this},e2.AsyncIterator=v,e2.async=function(t3,n3,r3,o2,i2){i2===void 0&&(i2=Promise);var a2=new v(u(t3,n3,r3,o2),i2);return e2.isGeneratorFunction(n3)?a2:a2.next().then(function(e3){return e3.done?e3.value:a2.next()})},y(g),g[a]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e2.keys=function(e3){var t3=[];for(var n3 in e3)t3.push(n3);return t3.reverse(),__name(function n4(){for(;t3.length;){var r3=t3.pop();if(r3 in e3)return n4.value=r3,n4.done=!1,n4}return n4.done=!0,n4},"n")},e2.values=x,_.prototype={constructor:_,reset:function(e3){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e3)for(var t3 in this)t3.charAt(0)==="t"&&n2.call(this,t3)&&!isNaN(+t3.slice(1))&&(this[t3]=void 0)},stop:function(){this.done=!0;var e3=this.tryEntries[0].completion;if(e3.type==="throw")throw e3.arg;return this.rval},dispatchException:function(e3){if(this.done)throw e3;var t3=this;function r3(n3,r4){return a2.type="throw",a2.arg=e3,t3.next=n3,r4&&(t3.method="next",t3.arg=void 0),!!r4}__name(r3,"r");for(var o2=this.tryEntries.length-1;o2>=0;--o2){var i2=this.tryEntries[o2],a2=i2.completion;if(i2.tryLoc==="root")return r3("end");if(i2.tryLoc<=this.prev){var u2=n2.call(i2,"catchLoc"),c2=n2.call(i2,"finallyLoc");if(u2&&c2){if(this.prev<i2.catchLoc)return r3(i2.catchLoc,!0);if(this.prev<i2.finallyLoc)return r3(i2.finallyLoc)}else if(u2){if(this.prev<i2.catchLoc)return r3(i2.catchLoc,!0)}else{if(!c2)throw new Error("try statement without catch or finally");if(this.prev<i2.finallyLoc)return r3(i2.finallyLoc)}}}},abrupt:function(e3,t3){for(var r3=this.tryEntries.length-1;r3>=0;--r3){var o2=this.tryEntries[r3];if(o2.tryLoc<=this.prev&&n2.call(o2,"finallyLoc")&&this.prev<o2.finallyLoc){var i2=o2;break}}i2&&(e3==="break"||e3==="continue")&&i2.tryLoc<=t3&&t3<=i2.finallyLoc&&(i2=null);var a2=i2?i2.completion:{};return a2.type=e3,a2.arg=t3,i2?(this.method="next",this.next=i2.finallyLoc,s):this.complete(a2)},complete:function(e3,t3){if(e3.type==="throw")throw e3.arg;return e3.type==="break"||e3.type==="continue"?this.next=e3.arg:e3.type==="return"?(this.rval=this.arg=e3.arg,this.method="return",this.next="end"):e3.type==="normal"&&t3&&(this.next=t3),s},finish:function(e3){for(var t3=this.tryEntries.length-1;t3>=0;--t3){var n3=this.tryEntries[t3];if(n3.finallyLoc===e3)return this.complete(n3.completion,n3.afterLoc),k(n3),s}},catch:function(e3){for(var t3=this.tryEntries.length-1;t3>=0;--t3){var n3=this.tryEntries[t3];if(n3.tryLoc===e3){var r3=n3.completion;if(r3.type==="throw"){var o2=r3.arg;k(n3)}return o2}}throw new Error("illegal catch attempt")},delegateYield:function(e3,t3,n3){return this.delegate={iterator:x(e3),resultName:t3,nextLoc:n3},this.method==="next"&&(this.arg=void 0),s}},e2}(e.exports);try{regeneratorRuntime=r}catch{Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){var r=n(12),o=n(13);typeof(o=o.__esModule?o.default:o)=="string"&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1},a=(r(o,i),o.locals?o.locals:{});e.exports=a},function(e,t,n){var r,o=__name(function(){return r===void 0&&(r=!!(window&&document&&document.all&&!window.atob)),r},"o"),i=function(){var e2={};return function(t2){if(e2[t2]===void 0){var n2=document.querySelector(t2);if(window.HTMLIFrameElement&&n2 instanceof window.HTMLIFrameElement)try{n2=n2.contentDocument.head}catch{n2=null}e2[t2]=n2}return e2[t2]}}(),a=[];function u(e2){for(var t2=-1,n2=0;n2<a.length;n2++)if(a[n2].identifier===e2){t2=n2;break}return t2}__name(u,"u");function c(e2,t2){for(var n2={},r2=[],o2=0;o2<e2.length;o2++){var i2=e2[o2],c2=t2.base?i2[0]+t2.base:i2[0],s2=n2[c2]||0,l2="".concat(c2," ").concat(s2);n2[c2]=s2+1;var d3=u(l2),f2={css:i2[1],media:i2[2],sourceMap:i2[3]};d3!==-1?(a[d3].references++,a[d3].updater(f2)):a.push({identifier:l2,updater:g(f2,t2),references:1}),r2.push(l2)}return r2}__name(c,"c");function s(e2){var t2=document.createElement("style"),r2=e2.attributes||{};if(r2.nonce===void 0){var o2=n.nc;o2&&(r2.nonce=o2)}if(Object.keys(r2).forEach(function(e3){t2.setAttribute(e3,r2[e3])}),typeof e2.insert=="function")e2.insert(t2);else{var a2=i(e2.insert||"head");if(!a2)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a2.appendChild(t2)}return t2}__name(s,"s");var l,d2=(l=[],function(e2,t2){return l[e2]=t2,l.filter(Boolean).join(`
`)});function f(e2,t2,n2,r2){var o2=n2?"":r2.media?"@media ".concat(r2.media," {").concat(r2.css,"}"):r2.css;if(e2.styleSheet)e2.styleSheet.cssText=d2(t2,o2);else{var i2=document.createTextNode(o2),a2=e2.childNodes;a2[t2]&&e2.removeChild(a2[t2]),a2.length?e2.insertBefore(i2,a2[t2]):e2.appendChild(i2)}}__name(f,"f");function p(e2,t2,n2){var r2=n2.css,o2=n2.media,i2=n2.sourceMap;if(o2?e2.setAttribute("media",o2):e2.removeAttribute("media"),i2&&btoa&&(r2+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(i2))))," */")),e2.styleSheet)e2.styleSheet.cssText=r2;else{for(;e2.firstChild;)e2.removeChild(e2.firstChild);e2.appendChild(document.createTextNode(r2))}}__name(p,"p");var h=null,m2=0;function g(e2,t2){var n2,r2,o2;if(t2.singleton){var i2=m2++;n2=h||(h=s(t2)),r2=f.bind(null,n2,i2,!1),o2=f.bind(null,n2,i2,!0)}else n2=s(t2),r2=p.bind(null,n2,t2),o2=__name(function(){(function(e3){if(e3.parentNode===null)return!1;e3.parentNode.removeChild(e3)})(n2)},"o");return r2(e2),function(t3){if(t3){if(t3.css===e2.css&&t3.media===e2.media&&t3.sourceMap===e2.sourceMap)return;r2(e2=t3)}else o2()}}__name(g,"g"),e.exports=function(e2,t2){(t2=t2||{}).singleton||typeof t2.singleton=="boolean"||(t2.singleton=o());var n2=c(e2=e2||[],t2);return function(e3){if(e3=e3||[],Object.prototype.toString.call(e3)==="[object Array]"){for(var r2=0;r2<n2.length;r2++){var o2=u(n2[r2]);a[o2].references--}for(var i2=c(e3,t2),s2=0;s2<n2.length;s2++){var l2=u(n2[s2]);a[l2].references===0&&(a[l2].updater(),a.splice(l2,1))}n2=i2}}}},function(e,t,n){(t=n(14)(!1)).push([e.i,`.image-tool {
  --bg-color: #cdd1e0;
  --front-color: #388ae5;
  --border-color: #e8e8eb;

}

  .image-tool__image {
    border-radius: 3px;
    overflow: hidden;
    margin-bottom: 10px;
  }

  .image-tool__image-picture {
      max-width: 100%;
      vertical-align: bottom;
      display: block;
    }

  .image-tool__image-preloader {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background-size: cover;
      margin: auto;
      position: relative;
      background-color: var(--bg-color);
      background-position: center center;
    }

  .image-tool__image-preloader::after {
        content: "";
        position: absolute;
        z-index: 3;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        border: 2px solid var(--bg-color);
        border-top-color: var(--front-color);
        left: 50%;
        top: 50%;
        margin-top: -30px;
        margin-left: -30px;
        animation: image-preloader-spin 2s infinite linear;
        box-sizing: border-box;
      }

  .image-tool__caption[contentEditable="true"][data-placeholder]::before {
      position: absolute !important;
      content: attr(data-placeholder);
      color: #707684;
      font-weight: normal;
      display: none;
    }

  .image-tool__caption[contentEditable="true"][data-placeholder]:empty::before {
        display: block;
      }

  .image-tool__caption[contentEditable="true"][data-placeholder]:empty:focus::before {
        display: none;
      }

  .image-tool--empty .image-tool__image {
      display: none;
    }

  .image-tool--empty .image-tool__caption, .image-tool--loading .image-tool__caption {
      display: none;
    }

  .image-tool .cdx-button {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .image-tool .cdx-button svg {
      height: auto;
      margin: 0 6px 0 0;
    }

  .image-tool--filled .cdx-button {
      display: none;
    }

  .image-tool--filled .image-tool__image-preloader {
        display: none;
      }

  .image-tool--loading .image-tool__image {
      min-height: 200px;
      display: flex;
      border: 1px solid var(--border-color);
      background-color: #fff;
    }

  .image-tool--loading .image-tool__image-picture {
        display: none;
      }

  .image-tool--loading .cdx-button {
      display: none;
    }

  /**
   * Tunes
   * ----------------
   */

  .image-tool--withBorder .image-tool__image {
      border: 1px solid var(--border-color);
    }

  .image-tool--withBackground .image-tool__image {
      padding: 15px;
      background: var(--bg-color);
    }

  .image-tool--withBackground .image-tool__image-picture {
        max-width: 60%;
        margin: 0 auto;
      }

  .image-tool--stretched .image-tool__image-picture {
        width: 100%;
      }

@keyframes image-preloader-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
`,""]),e.exports=t},function(e,t,n){e.exports=function(e2){var t2=[];return t2.toString=function(){return this.map(function(t3){var n2=function(e3,t4){var n3=e3[1]||"",r=e3[3];if(!r)return n3;if(t4&&typeof btoa=="function"){var o=(a=r,u=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(c," */")),i=r.sources.map(function(e4){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e4," */")});return[n3].concat(i).concat([o]).join(`
`)}var a,u,c;return[n3].join(`
`)}(t3,e2);return t3[2]?"@media ".concat(t3[2]," {").concat(n2,"}"):n2}).join("")},t2.i=function(e3,n2,r){typeof e3=="string"&&(e3=[[null,e3,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];a!=null&&(o[a]=!0)}for(var u=0;u<e3.length;u++){var c=[].concat(e3[u]);r&&o[c[0]]||(n2&&(c[2]?c[2]="".concat(n2," and ").concat(c[2]):c[2]=n2),t2.push(c))}},t2}},function(e,t,n){var r=n(4);e.exports=function(e2){if(Array.isArray(e2))return r(e2)}},function(e,t){e.exports=function(e2){if(typeof Symbol<"u"&&Symbol.iterator in Object(e2))return Array.from(e2)}},function(e,t){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(e,t){e.exports=function(e2){if(Array.isArray(e2))return e2}},function(e,t){e.exports=function(e2,t2){if(typeof Symbol<"u"&&Symbol.iterator in Object(e2)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e2[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t2||n.length!==t2);r=!0);}catch(e3){o=!0,i=e3}finally{try{r||u.return==null||u.return()}finally{if(o)throw i}}return n}}},function(e,t){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}},function(e,t,n){n.r(t),n.d(t,"default",function(){return _});var r=n(3),o=n.n(r),i=n(6),a=n.n(i),u=n(2),c=n.n(u),s=n(0),l=n.n(s);n(11);const d2='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>';var f=n(7),p=n.n(f);function h(e2){var t2,n2=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r2=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o2=document.createElement(e2);Array.isArray(n2)?(t2=o2.classList).add.apply(t2,p()(n2)):n2&&o2.classList.add(n2);for(var i2 in r2)o2[i2]=r2[i2];return o2}__name(h,"h");var m2=function(){function e2(t2){var n2=t2.api,r2=t2.config,o2=t2.onSelectFile,i2=t2.readOnly;c()(this,e2),this.api=n2,this.config=r2,this.onSelectFile=o2,this.readOnly=i2,this.nodes={wrapper:h("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:h("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:h("div",this.CSS.imagePreloader),caption:h("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}return __name(e2,"e"),l()(e2,[{key:"render",value:function(t2){return t2.file&&Object.keys(t2.file).length!==0?this.toggleStatus(e2.status.UPLOADING):this.toggleStatus(e2.status.EMPTY),this.nodes.wrapper}},{key:"createFileButton",value:function(){var e3=this,t2=h("div",[this.CSS.button]);return t2.innerHTML=this.config.buttonContent||"".concat(d2," ").concat(this.api.i18n.t("Select an Image")),t2.addEventListener("click",function(){e3.onSelectFile()}),t2}},{key:"showPreloader",value:function(t2){this.nodes.imagePreloader.style.backgroundImage="url(".concat(t2,")"),this.toggleStatus(e2.status.UPLOADING)}},{key:"hidePreloader",value:function(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus(e2.status.EMPTY)}},{key:"fillImage",value:function(t2){var n2=this,r2=/\.mp4$/.test(t2)?"VIDEO":"IMG",o2={src:t2},i2="load";r2==="VIDEO"&&(o2.autoplay=!0,o2.loop=!0,o2.muted=!0,o2.playsinline=!0,i2="loadeddata"),this.nodes.imageEl=h(r2,this.CSS.imageEl,o2),this.nodes.imageEl.addEventListener(i2,function(){n2.toggleStatus(e2.status.FILLED),n2.nodes.imagePreloader&&(n2.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}},{key:"fillCaption",value:function(e3){this.nodes.caption&&(this.nodes.caption.innerHTML=e3)}},{key:"toggleStatus",value:function(t2){for(var n2 in e2.status)Object.prototype.hasOwnProperty.call(e2.status,n2)&&this.nodes.wrapper.classList.toggle("".concat(this.CSS.wrapper,"--").concat(e2.status[n2]),t2===e2.status[n2])}},{key:"applyTune",value:function(e3,t2){this.nodes.wrapper.classList.toggle("".concat(this.CSS.wrapper,"--").concat(e3),t2)}},{key:"CSS",get:function(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}}],[{key:"status",get:function(){return{EMPTY:"empty",UPLOADING:"loading",FILLED:"filled"}}}]),e2}(),g=n(8),y=n.n(g),v=n(1),b=n.n(v);function w(e2){return e2&&typeof e2.then=="function"}__name(w,"w");var k=function(){function e2(t2){var n2=t2.config,r2=t2.onUpload,o2=t2.onError;c()(this,e2),this.config=n2,this.onUpload=r2,this.onError=o2}return __name(e2,"e"),l()(e2,[{key:"uploadSelectedFile",value:function(e3){var t2=this,n2=e3.onPreview,r2=__name(function(e4){var t3=new FileReader;t3.readAsDataURL(e4),t3.onload=function(e5){n2(e5.target.result)}},"r");(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"?b.a.selectFiles({accept:this.config.types}).then(function(e4){r2(e4[0]);var n3=t2.config.uploader.uploadByFile(e4[0]);return w(n3)||console.warn("Custom uploader method uploadByFile should return a Promise"),n3}):b.a.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types,headers:this.config.additionalRequestHeaders,beforeSend:function(e4){r2(e4[0])},fieldName:this.config.field}).then(function(e4){return e4.body})).then(function(e4){t2.onUpload(e4)}).catch(function(e4){t2.onError(e4)})}},{key:"uploadByUrl",value:function(e3){var t2,n2=this;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?w(t2=this.config.uploader.uploadByUrl(e3))||console.warn("Custom uploader method uploadByUrl should return a Promise"):t2=b.a.post({url:this.config.endpoints.byUrl,data:Object.assign({url:e3},this.config.additionalRequestData),type:b.a.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(function(e4){return e4.body}),t2.then(function(e4){n2.onUpload(e4)}).catch(function(e4){n2.onError(e4)})}},{key:"uploadByFile",value:function(e3,t2){var n2,r2=this,o2=t2.onPreview,i2=new FileReader;if(i2.readAsDataURL(e3),i2.onload=function(e4){o2(e4.target.result)},this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")w(n2=this.config.uploader.uploadByFile(e3))||console.warn("Custom uploader method uploadByFile should return a Promise");else{var a2=new FormData;a2.append(this.config.field,e3),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(function(e4){var t3=y()(e4,2),n3=t3[0],r3=t3[1];a2.append(n3,r3)}),n2=b.a.post({url:this.config.endpoints.byFile,data:a2,type:b.a.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(function(e4){return e4.body})}n2.then(function(e4){r2.onUpload(e4)}).catch(function(e4){r2.onError(e4)})}}]),e2}(),_=function(){function e2(t3){var n2=this,r2=t3.data,o2=t3.config,i2=t3.api,a2=t3.readOnly;c()(this,e2),this.api=i2,this.readOnly=a2,this.config={endpoints:o2.endpoints||"",additionalRequestData:o2.additionalRequestData||{},additionalRequestHeaders:o2.additionalRequestHeaders||{},field:o2.field||"image",types:o2.types||"image/*",captionPlaceholder:this.api.i18n.t(o2.captionPlaceholder||"Caption"),buttonContent:o2.buttonContent||"",uploader:o2.uploader||void 0,actions:o2.actions||[]},this.uploader=new k({config:this.config,onUpload:function(e3){return n2.onUpload(e3)},onError:function(e3){return n2.uploadingFailed(e3)}}),this.ui=new m2({api:i2,config:this.config,onSelectFile:function(){n2.uploader.uploadSelectedFile({onPreview:function(e3){n2.ui.showPreloader(e3)}})},readOnly:a2}),this._data={},this.data=r2}__name(e2,"e");var t2;return l()(e2,null,[{key:"isReadOnlySupported",get:function(){return!0}},{key:"toolbox",get:function(){return{icon:d2,title:"Image"}}},{key:"tunes",get:function(){return[{name:"withBorder",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',title:"With border",toggle:!0},{name:"stretched",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>',title:"Stretch image",toggle:!0},{name:"withBackground",icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',title:"With background",toggle:!0}]}}]),l()(e2,[{key:"render",value:function(){return this.ui.render(this.data)}},{key:"validate",value:function(e3){return e3.file&&e3.file.url}},{key:"save",value:function(){var e3=this.ui.nodes.caption;return this._data.caption=e3.innerHTML,this.data}},{key:"renderSettings",value:function(){var t3=this;return e2.tunes.concat(this.config.actions).map(function(e3){return{icon:e3.icon,label:t3.api.i18n.t(e3.title),name:e3.name,toggle:e3.toggle,isActive:t3.data[e3.name],onActivate:function(){typeof e3.action!="function"?t3.tuneToggled(e3.name):e3.action(e3.name)}}})}},{key:"appendCallback",value:function(){this.ui.nodes.fileButton.click()}},{key:"onPaste",value:(t2=a()(o.a.mark(__name(function e3(t3){var n2,r2,i2,a2,u2;return o.a.wrap(function(e4){for(;;)switch(e4.prev=e4.next){case 0:e4.t0=t3.type,e4.next=e4.t0==="tag"?3:e4.t0==="pattern"?15:e4.t0==="file"?18:21;break;case 3:if(n2=t3.detail.data,!/^blob:/.test(n2.src)){e4.next=13;break}return e4.next=7,fetch(n2.src);case 7:return r2=e4.sent,e4.next=10,r2.blob();case 10:return i2=e4.sent,this.uploadFile(i2),e4.abrupt("break",21);case 13:return this.uploadUrl(n2.src),e4.abrupt("break",21);case 15:return a2=t3.detail.data,this.uploadUrl(a2),e4.abrupt("break",21);case 18:return u2=t3.detail.file,this.uploadFile(u2),e4.abrupt("break",21);case 21:case"end":return e4.stop()}},e3,this)},"e"))),function(e3){return t2.apply(this,arguments)})},{key:"onUpload",value:function(e3){e3.success&&e3.file?this.image=e3.file:this.uploadingFailed("incorrect response: "+JSON.stringify(e3))}},{key:"uploadingFailed",value:function(e3){console.log("Image Tool: uploading failed because of",e3),this.api.notifier.show({message:this.api.i18n.t("Couldn’t upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}},{key:"tuneToggled",value:function(e3){this.setTune(e3,!this._data[e3])}},{key:"setTune",value:function(e3,t3){var n2=this;this._data[e3]=t3,this.ui.applyTune(e3,t3),e3==="stretched"&&Promise.resolve().then(function(){var e4=n2.api.blocks.getCurrentBlockIndex();n2.api.blocks.stretchBlock(e4,t3)}).catch(function(e4){console.error(e4)})}},{key:"uploadFile",value:function(e3){var t3=this;this.uploader.uploadByFile(e3,{onPreview:function(e4){t3.ui.showPreloader(e4)}})}},{key:"uploadUrl",value:function(e3){this.ui.showPreloader(e3),this.uploader.uploadByUrl(e3)}},{key:"data",set:function(t3){var n2=this;this.image=t3.file,this._data.caption=t3.caption||"",this.ui.fillCaption(this._data.caption),e2.tunes.forEach(function(e3){var r2=e3.name,o2=t3[r2]!==void 0&&(t3[r2]===!0||t3[r2]==="true");n2.setTune(r2,o2)})},get:function(){return this._data}},{key:"image",set:function(e3){this._data.file=e3||{},e3&&e3.url&&this.ui.fillImage(e3.url)}}],[{key:"pasteConfig",get:function(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}}]),e2}();/**
 * Image Tool for the Editor.js
 *
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.js — main Tool's interface, public API and methods for working with data
 *  2) uploader.js — module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.js — module for UI manipulations: render, showing preloader, etc
 *  4) tunes.js — working with Block Tunes: render buttons, handle clicks
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */}]).default})})(bundle$1);var bundleExports$1=bundle$1.exports;const Image=getDefaultExportFromCjs(bundleExports$1);var bundle={exports:{}};(function(module,exports){(function(e,t){module.exports=t()})(self,function(){return(()=>{var e={424:(e2,t2,r2)=>{r2.r(t2),r2.d(t2,{default:()=>s});var n2=r2(81),o=r2.n(n2),i=r2(645),a=r2.n(i)()(o());a.push([e2.id,`.ce-block--drop-target .ce-block__content:before {
  content: "";
  position: absolute;
  top: 50%;
  left: -20px;
  margin-top: -1px;
  height: 8px;
  width: 8px;
  border: solid #a0a0a0;
  border-width: 1px 1px 0 0;
  -webkit-transform-origin: right;
  transform-origin: right;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}

.ce-block--drop-target .ce-block__content:after {
  background: none;
}`,""]);const s=a},645:e2=>{e2.exports=function(e3){var t2=[];return t2.toString=function(){return this.map(function(t3){var r2="",n2=t3[5]!==void 0;return t3[4]&&(r2+="@supports (".concat(t3[4],") {")),t3[2]&&(r2+="@media ".concat(t3[2]," {")),n2&&(r2+="@layer".concat(t3[5].length>0?" ".concat(t3[5]):""," {")),r2+=e3(t3),n2&&(r2+="}"),t3[2]&&(r2+="}"),t3[4]&&(r2+="}"),r2}).join("")},t2.i=function(e4,r2,n2,o,i){typeof e4=="string"&&(e4=[[null,e4,void 0]]);var a={};if(n2)for(var s=0;s<this.length;s++){var c=this[s][0];c!=null&&(a[c]=!0)}for(var l=0;l<e4.length;l++){var u=[].concat(e4[l]);n2&&a[u[0]]||(i!==void 0&&(u[5]===void 0||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),r2&&(u[2]&&(u[1]="@media ".concat(u[2]," {").concat(u[1],"}")),u[2]=r2),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),t2.push(u))}},t2}},81:e2=>{e2.exports=function(e3){return e3[1]}},406:(e2,t2,r2)=>{var n2=r2(424);typeof n2=="string"&&(n2=[[e2.id,n2,""]]),r2(723)(n2,{hmr:!0,transform:void 0,insertInto:void 0}),n2.locals&&(e2.exports=n2.locals)},723:(e2,t2,r2)=>{var n2,o,i={},a=(n2=__name(function(){return window&&document&&document.all&&!window.atob},"n"),function(){return o===void 0&&(o=n2.apply(this,arguments)),o}),s=__name(function(e3){return document.querySelector(e3)},"s"),c=function(e3){var t3={};return function(e4){if(typeof e4=="function")return e4();if(t3[e4]===void 0){var r3=s.call(this,e4);if(window.HTMLIFrameElement&&r3 instanceof window.HTMLIFrameElement)try{r3=r3.contentDocument.head}catch{r3=null}t3[e4]=r3}return t3[e4]}}(),l=null,u=0,f=[],d2=r2(947);function p(e3,t3){for(var r3=0;r3<e3.length;r3++){var n3=e3[r3],o2=i[n3.id];if(o2){o2.refs++;for(var a2=0;a2<o2.parts.length;a2++)o2.parts[a2](n3.parts[a2]);for(;a2<n3.parts.length;a2++)o2.parts.push(m2(n3.parts[a2],t3))}else{var s2=[];for(a2=0;a2<n3.parts.length;a2++)s2.push(m2(n3.parts[a2],t3));i[n3.id]={id:n3.id,refs:1,parts:s2}}}}__name(p,"p");function h(e3,t3){for(var r3=[],n3={},o2=0;o2<e3.length;o2++){var i2=e3[o2],a2=t3.base?i2[0]+t3.base:i2[0],s2={css:i2[1],media:i2[2],sourceMap:i2[3]};n3[a2]?n3[a2].parts.push(s2):r3.push(n3[a2]={id:a2,parts:[s2]})}return r3}__name(h,"h");function v(e3,t3){var r3=c(e3.insertInto);if(!r3)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n3=f[f.length-1];if(e3.insertAt==="top")n3?n3.nextSibling?r3.insertBefore(t3,n3.nextSibling):r3.appendChild(t3):r3.insertBefore(t3,r3.firstChild),f.push(t3);else if(e3.insertAt==="bottom")r3.appendChild(t3);else{if(typeof e3.insertAt!="object"||!e3.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var o2=c(e3.insertInto+" "+e3.insertAt.before);r3.insertBefore(t3,o2)}}__name(v,"v");function b(e3){if(e3.parentNode===null)return!1;e3.parentNode.removeChild(e3);var t3=f.indexOf(e3);t3>=0&&f.splice(t3,1)}__name(b,"b");function y(e3){var t3=document.createElement("style");return e3.attrs.type===void 0&&(e3.attrs.type="text/css"),g(t3,e3.attrs),v(e3,t3),t3}__name(y,"y");function g(e3,t3){Object.keys(t3).forEach(function(r3){e3.setAttribute(r3,t3[r3])})}__name(g,"g");function m2(e3,t3){var r3,n3,o2,i2;if(t3.transform&&e3.css){if(!(i2=t3.transform(e3.css)))return function(){};e3.css=i2}if(t3.singleton){var a2=u++;r3=l||(l=y(t3)),n3=x.bind(null,r3,a2,!1),o2=x.bind(null,r3,a2,!0)}else e3.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(r3=function(e4){var t4=document.createElement("link");return e4.attrs.type===void 0&&(e4.attrs.type="text/css"),e4.attrs.rel="stylesheet",g(t4,e4.attrs),v(e4,t4),t4}(t3),n3=O.bind(null,r3,t3),o2=__name(function(){b(r3),r3.href&&URL.revokeObjectURL(r3.href)},"o")):(r3=y(t3),n3=B2.bind(null,r3),o2=__name(function(){b(r3)},"o"));return n3(e3),function(t4){if(t4){if(t4.css===e3.css&&t4.media===e3.media&&t4.sourceMap===e3.sourceMap)return;n3(e3=t4)}else o2()}}__name(m2,"m"),e2.exports=function(e3,t3){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(t3=t3||{}).attrs=typeof t3.attrs=="object"?t3.attrs:{},t3.singleton||typeof t3.singleton=="boolean"||(t3.singleton=a()),t3.insertInto||(t3.insertInto="head"),t3.insertAt||(t3.insertAt="bottom");var r3=h(e3,t3);return p(r3,t3),function(e4){for(var n3=[],o2=0;o2<r3.length;o2++){var a2=r3[o2];(s2=i[a2.id]).refs--,n3.push(s2)}for(e4&&p(h(e4,t3),t3),o2=0;o2<n3.length;o2++){var s2;if((s2=n3[o2]).refs===0){for(var c2=0;c2<s2.parts.length;c2++)s2.parts[c2]();delete i[s2.id]}}}};var k,w=(k=[],function(e3,t3){return k[e3]=t3,k.filter(Boolean).join(`
`)});function x(e3,t3,r3,n3){var o2=r3?"":n3.css;if(e3.styleSheet)e3.styleSheet.cssText=w(t3,o2);else{var i2=document.createTextNode(o2),a2=e3.childNodes;a2[t3]&&e3.removeChild(a2[t3]),a2.length?e3.insertBefore(i2,a2[t3]):e3.appendChild(i2)}}__name(x,"x");function B2(e3,t3){var r3=t3.css,n3=t3.media;if(n3&&e3.setAttribute("media",n3),e3.styleSheet)e3.styleSheet.cssText=r3;else{for(;e3.firstChild;)e3.removeChild(e3.firstChild);e3.appendChild(document.createTextNode(r3))}}__name(B2,"B");function O(e3,t3,r3){var n3=r3.css,o2=r3.sourceMap,i2=t3.convertToAbsoluteUrls===void 0&&o2;(t3.convertToAbsoluteUrls||i2)&&(n3=d2(n3)),o2&&(n3+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(o2))))+" */");var a2=new Blob([n3],{type:"text/css"}),s2=e3.href;e3.href=URL.createObjectURL(a2),s2&&URL.revokeObjectURL(s2)}__name(O,"O")},947:e2=>{e2.exports=function(e3){var t2=typeof window<"u"&&window.location;if(!t2)throw new Error("fixUrls requires window.location");if(!e3||typeof e3!="string")return e3;var r2=t2.protocol+"//"+t2.host,n2=r2+t2.pathname.replace(/\/[^\/]*$/,"/");return e3.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e4,t3){var o,i=t3.trim().replace(/^"(.*)"$/,function(e5,t4){return t4}).replace(/^'(.*)'$/,function(e5,t4){return t4});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e4:(o=i.indexOf("//")===0?i:i.indexOf("/")===0?r2+i:n2+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")")})}}},t={};function r(n2){var o=t[n2];if(o!==void 0)return o.exports;var i=t[n2]={id:n2,exports:{}};return e[n2](i,i.exports,r),i.exports}__name(r,"r"),r.n=e2=>{var t2=e2&&e2.__esModule?()=>e2.default:()=>e2;return r.d(t2,{a:t2}),t2},r.d=(e2,t2)=>{for(var n2 in t2)r.o(t2,n2)&&!r.o(e2,n2)&&Object.defineProperty(e2,n2,{enumerable:!0,get:t2[n2]})},r.o=(e2,t2)=>Object.prototype.hasOwnProperty.call(e2,t2),r.r=e2=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e2,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e2,"__esModule",{value:!0})};var n={};return(()=>{function e2(e3,t3){for(var r2=0;r2<t3.length;r2++){var n2=t3[r2];n2.enumerable=n2.enumerable||!1,n2.configurable=!0,"value"in n2&&(n2.writable=!0),Object.defineProperty(e3,n2.key,n2)}}__name(e2,"e"),r.d(n,{default:()=>t2}),r(406);var t2=function(){function t3(e3,r3){var n3=e3.configuration,o2=e3.blocks,i=e3.toolbar,a=e3.save;(function(e4,t4){if(!(e4 instanceof t4))throw new TypeError("Cannot call a class as a function")})(this,t3),this.toolbar=i,this.borderStyle=r3||"1px dashed #aaa",this.api=o2,this.holder=typeof n3.holder=="string"?document.getElementById(n3.holder):n3.holder,this.readOnly=n3.readOnly,this.startBlock=null,this.endBlock=null,this.save=a,this.setDragListener(),this.setDropListener()}__name(t3,"t");var r2,n2,o;return r2=t3,o=[{key:"isReadOnlySupported",get:function(){return!0}}],(n2=[{key:"setElementCursor",value:function(e3){if(e3){var t4=document.createRange(),r3=window.getSelection();t4.setStart(e3.childNodes[0],0),t4.collapse(!0),r3.removeAllRanges(),r3.addRange(t4),e3.focus()}}},{key:"setDragListener",value:function(){var e3=this;if(!this.readOnly){var t4=this.holder.querySelector(".ce-toolbar__settings-btn");t4.setAttribute("draggable","true"),t4.addEventListener("dragstart",function(){e3.startBlock=e3.api.getCurrentBlockIndex()}),t4.addEventListener("drag",function(){if(e3.toolbar.close(),!e3.isTheOnlyBlock()){var t5=e3.holder.querySelectorAll(".ce-block"),r3=e3.holder.querySelector(".ce-block--drop-target");e3.setElementCursor(r3),e3.setBorderBlocks(t5,r3)}})}}},{key:"setBorderBlocks",value:function(e3,t4){var r3=this;Object.values(e3).forEach(function(n3){var o2=n3.querySelector(".ce-block__content");n3!==t4?(o2.style.removeProperty("border-top"),o2.style.removeProperty("border-bottom")):Object.keys(e3).find(function(r4){return e3[r4]===t4})>r3.startBlock?o2.style.borderBottom=r3.borderStyle||borderStyle:o2.style.borderTop=r3.borderStyle})}},{key:"setDropListener",value:function(){var e3=this;document.addEventListener("drop",function(t4){var r3=t4.target;if(e3.holder.contains(r3)&&e3.startBlock!==null){var n3=e3.getDropTarget(r3);if(n3){var o2=n3.querySelector(".ce-block__content");o2.style.removeProperty("border-top"),o2.style.removeProperty("border-bottom"),e3.endBlock=e3.getTargetPosition(n3),e3.moveBlocks()}}e3.startBlock=null})}},{key:"getDropTarget",value:function(e3){return e3.classList.contains("ce-block")?e3:e3.closest(".ce-block")}},{key:"getTargetPosition",value:function(e3){return Array.from(e3.parentNode.children).indexOf(e3)}},{key:"isTheOnlyBlock",value:function(){return this.api.getBlocksCount()===1}},{key:"moveBlocks",value:function(){this.isTheOnlyBlock()||this.api.move(this.endBlock,this.startBlock)}}])&&e2(r2.prototype,n2),o&&e2(r2,o),Object.defineProperty(r2,"prototype",{writable:!1}),t3}()})(),n.default})()})})(bundle);var bundleExports=bundle.exports;const DragDrop=getDefaultExportFromCjs(bundleExports),valueIterator=__name(thing=>{const values=[],normalize=__name(thing2=>Array.isArray(thing2)?thing2.entries():Object.entries(thing2),"normalize"),process=__name(thing2=>{for(const[index,item]of normalize(thing2))typeof item!="string"&&typeof item!="number"?process(item):values.push(thing2)},"process");return process(thing),values},"valueIterator"),nest=__name(jsonLd=>{if(Array.isArray(jsonLd)||jsonLd!=null&&jsonLd["@graph"]&&Array.isArray(jsonLd["@graph"])){const graphs=Array.isArray(jsonLd)?jsonLd:jsonLd["@graph"],graphsMap=new Map,nestedGraphsMap=new Set;for(const graph of graphs)graphsMap.set(graph["@id"],graph);for(const item of valueIterator(graphs))if(item!=null&&item["@id"]&&Object.keys(item).length===1&&graphsMap.get(item["@id"])){nestedGraphsMap.add(item["@id"]);const graphToMerge=graphsMap.get(item["@id"]);Object.assign(item,graphToMerge),item["@id"].substr(0,2)==="_:"&&delete item["@id"]}return graphs.filter(graph=>!(graph!=null&&graph["@id"]&&nestedGraphsMap.has(graph["@id"])))}else throw new Error("Please supply a json-ld with multiple graphs.")},"nest"),editors=new Map,_AdvancedImage=class _AdvancedImage extends Image{removed(){fetch(this._data.file.url,{method:"DELETE"})}};__name(_AdvancedImage,"AdvancedImage");let AdvancedImage=_AdvancedImage;const _WYSIWYG=class _WYSIWYG extends ShaclFormSingleEditorUhtml{constructor(){super(...arguments);__publicField(this,"widgetSettings")}async beforeRemove(){const cid=JSON.stringify([this.path,this.index]),imageBlocks=(await editors.get(cid).editorJS.saver.save()).blocks.filter(block=>block.type==="image");for(const imageBlock of imageBlocks)await fetch(imageBlock.data.file.url,{method:"DELETE"});return editors.delete(cid),!0}async template(){let initialData;const cid=JSON.stringify([this.path,this.index]);if(editors.has(cid))return editors.get(cid);const holder=document.createElement("div");editors.set(cid,holder);const parser=new N3Parser;if(this.value.value){let pointer=this.dataPointer().node([this.value]);if(pointer.out().terms.length){const quads=[];for(;pointer.ptrs.length;)quads.push(...pointer.quads()),pointer=pointer.out();const dataset=this.df.dataset(quads),document2=await jsonld$1.fromRDF(dataset,{useNativeTypes:!0}),compacted=await jsonld$1.compact(document2,{"@vocab":"https://editorjs.io/"}),[nested]=nest(compacted);initialData=nested}}const uriStart=this.shaclPointer.out([dash("uriStart")]).value,prefix=uriStart==null?void 0:uriStart.split(/\/|#/g).pop(),tools={header:{class:Header,inlineToolbar:["marker","link"],config:{placeholder:"Header"},shortcut:"CMD+SHIFT+H"},list:{class:List,inlineToolbar:!0,shortcut:"CMD+SHIFT+L"},quote:{class:Quote,inlineToolbar:!0,config:{quotePlaceholder:"Enter a quote",captionPlaceholder:"Quote's author"},shortcut:"CMD+SHIFT+O"},marker:{class:Marker,shortcut:"CMD+SHIFT+M"},delimiter:Delimiter,linkTool:LinkTool};return uriStart&&(tools.image={class:AdvancedImage,inlineToolbar:!0,config:{uploader:{uploadByFile:async file=>{const formData=new FormData;formData.append("files",file);const response=await fetch(`${this.widgetSettings.backend}/${prefix}/`,{body:formData,method:"POST"}),[filePath]=await response.json();return{success:!0,file:{url:filePath}}}}}}),holder.editorJS=new vi({inlineToolbar:!0,holder,data:initialData,tools,onReady:()=>{new DragDrop(holder.editorJS,"none")},onChange:async(api2,_event)=>{var _a13;const data=await api2.saver.save();data["@context"]={"@vocab":"https://editorjs.io/"};const nquads=await jsonld$1.toRDF(data,{format:"application/n-quads"}),quads=await parser.parse(nquads);if((_a13=this.value)!=null&&_a13.value){let pointer=this.dataPointer().node([this.value]);const quadsToRemove=this.df.dataset();for(;pointer.ptrs.length;){for(const quad of pointer.quads())quadsToRemove.add(quad);pointer=pointer.out()}for(const quad of quadsToRemove)this.rdfDataset.delete(quad)}else this.value=quads[0].subject;for(const quad of quads){const transformedQuad=this.df.quad(quad.subject.equals(quads[0].subject)?this.value:quad.subject,quad.predicate,quad.object);this.rdfDataset.add(transformedQuad)}}}),holder}};__name(_WYSIWYG,"WYSIWYG");let WYSIWYG=_WYSIWYG;export{WYSIWYG as default};
